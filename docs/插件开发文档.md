# Naimo Tools æ’ä»¶å¼€å‘æ–‡æ¡£

## ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [æ’ä»¶ç»“æ„](#æ’ä»¶ç»“æ„)
3. [æ’ä»¶é…ç½®](#æ’ä»¶é…ç½®)
4. [æ’ä»¶API](#æ’ä»¶api)
5. [æ’ä»¶ç±»å‹å’Œæ¥å£](#æ’ä»¶ç±»å‹å’Œæ¥å£)
6. [å¼€å‘ç¤ºä¾‹](#å¼€å‘ç¤ºä¾‹)
7. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
8. [è°ƒè¯•æŒ‡å—](#è°ƒè¯•æŒ‡å—)

## æ¦‚è¿°

Naimo Tools æä¾›äº†å¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿï¼Œå…è®¸å¼€å‘è€…åˆ›å»ºè‡ªå®šä¹‰åŠŸèƒ½æ‰©å±•ã€‚æ’ä»¶å¯ä»¥æ·»åŠ æ–°çš„æœç´¢é¡¹ç›®ã€æ‰§è¡Œè‡ªå®šä¹‰ä»£ç ã€æ‰“å¼€ç½‘é¡µçª—å£ç­‰ã€‚

### æ’ä»¶ç‰¹æ€§

- ğŸš€ æ”¯æŒå¤šç§æ‰§è¡Œç±»å‹ï¼ˆæ‰“å¼€åº”ç”¨ã€ç½‘é¡µã€è‡ªå®šä¹‰ä»£ç ï¼‰
- ğŸ” æ”¯æŒå¤šç§æœç´¢æ¨¡å¼ï¼ˆæ™®é€šæœç´¢ã€é™„ä»¶æœç´¢ã€æ’ä»¶æœç´¢ï¼‰
- âš™ï¸ å®Œæ•´çš„è®¾ç½®é…ç½®ç³»ç»Ÿ
- ğŸ¨ ä¸°å¯Œçš„UIç»„ä»¶æ”¯æŒ
- ğŸ“¦ ç®€å•çš„å®‰è£…å’Œç®¡ç†

## æ’ä»¶ç»“æ„

ä¸€ä¸ªæ ‡å‡†çš„æ’ä»¶åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š

```
example-plugin/
â”œâ”€â”€ config.js          # æ’ä»¶é…ç½®æ–‡ä»¶ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ index.html         # æ’ä»¶ç½‘é¡µå†…å®¹ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ preload.js         # é¢„åŠ è½½è„šæœ¬ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ other-assets/      # å…¶ä»–èµ„æºæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
```

### æ–‡ä»¶è¯´æ˜

- **config.js**: æ’ä»¶çš„ä¸»é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰æ’ä»¶çš„åŸºæœ¬ä¿¡æ¯ã€åŠŸèƒ½é¡¹ç›®å’Œè®¾ç½®
- **index.html**: å½“æ’ä»¶éœ€è¦æ˜¾ç¤ºç½‘é¡µå†…å®¹æ—¶ä½¿ç”¨
- **preload.js**: åœ¨æ’ä»¶ç½‘é¡µçª—å£ä¸­é¢„åŠ è½½çš„è„šæœ¬ï¼Œå¯ä»¥æ‰©å±•çª—å£åŠŸèƒ½
- **å…¶ä»–èµ„æº**: å›¾æ ‡ã€æ ·å¼ã€è„šæœ¬ç­‰èµ„æºæ–‡ä»¶

## æ’ä»¶é…ç½®

### åŸºæœ¬é…ç½®ç»“æ„

```javascript
// config.js
module.exports = {
  // åŸºæœ¬ä¿¡æ¯
  id: "plugin-id", // æ’ä»¶å”¯ä¸€æ ‡è¯†
  name: "æ’ä»¶åç§°", // æ˜¾ç¤ºåç§°
  description: "æ’ä»¶æè¿°", // æè¿°ä¿¡æ¯
  version: "1.0.0", // ç‰ˆæœ¬å·
  author: "ä½œè€…åç§°", // ä½œè€…
  icon: "svgå›¾æ ‡æˆ–emoji", // æ’ä»¶å›¾æ ‡
  category: "æ’ä»¶åˆ†ç±»", // åˆ†ç±»
  enabled: true, // æ˜¯å¦å¯ç”¨

  // åŠŸèƒ½é¡¹ç›®åˆ—è¡¨
  items: [
    // é¡¹ç›®é…ç½®...
  ],

  // æ’ä»¶é€‰é¡¹
  options: {
    autoStart: false,
    showInMenu: true,
    maxItems: 10,
  },

  // è®¾ç½®é…ç½®
  settings: [
    // è®¾ç½®é¡¹é…ç½®...
  ],

  // å…ƒæ•°æ®
  metadata: {
    createdAt: Date.now(),
    updatedAt: Date.now(),
    installedAt: Date.now(),
  },
};
```

### æ’ä»¶åˆ†ç±»

æ”¯æŒçš„æ’ä»¶åˆ†ç±»ç±»å‹ï¼š

```javascript
export enum PluginCategoryType {
  EFFICIENT_OFFICE = 'efficient_office',        // é«˜æ•ˆåŠå…¬ ğŸš€
  AI_ARTIFICIAL_INTELLIGENCE = 'ai_artificial_intelligence', // AIäººå·¥æ™ºèƒ½ ğŸ¤–
  DEVELOPER_ESSENTIALS = 'developer_essentials', // ç¨‹åºå‘˜å¿…å¤‡ ğŸ’»
  RECORD_IDEAS = 'record_ideas',                 // è®°å½•æƒ³æ³• âœï¸
  IMAGE_VIDEO = 'image_video',                   // å›¾åƒè§†é¢‘ ğŸ¬
  MEDIA_TOOLS = 'media_tools',                   // åª’ä½“å·¥å…· ğŸ¬
  SYSTEM_TOOLS = 'system_tools',                 // ç³»ç»Ÿå·¥å…· ğŸ“·
  STUDY_WELL = 'study_well',                     // å¥½å¥½å­¦ä¹  ğŸ“
  BRAINSTORMING = 'brainstorming',               // è„‘æ´å¤§å¼€ ğŸ§ 
  OTHER = 'other'                                // å…¶ä»– ğŸ”Œ
}
```

### æ’ä»¶é¡¹ç›®é…ç½®

æ¯ä¸ªæ’ä»¶å¯ä»¥åŒ…å«å¤šä¸ªåŠŸèƒ½é¡¹ç›®ï¼š

```javascript
{
  name: "é¡¹ç›®åç§°",                    // æ˜¾ç¤ºåç§°
  path: "åº”ç”¨è·¯å¾„æˆ–æ ‡è¯†",              // æ‰§è¡Œè·¯å¾„
  icon: "å›¾æ ‡",                       // é¡¹ç›®å›¾æ ‡
  description: "é¡¹ç›®æè¿°",            // æè¿°ä¿¡æ¯
  weight: 100,                        // æ’åºæƒé‡

  // æ‰§è¡Œç±»å‹
  executeType: PluginExecuteType.CUSTOM_CODE,

  // æ‰§è¡Œå‚æ•°
  executeParams: {
    url: "ç½‘é¡µåœ°å€",                  // SHOW_WEBPAGE æ—¶ä½¿ç”¨
    code: "è‡ªå®šä¹‰ä»£ç ",               // CUSTOM_CODE æ—¶ä½¿ç”¨
  },

  // è¡Œä¸ºé…ç½®
  autoStart: false,                   // å¼€æœºå¯åŠ¨
  closeAction: 'hide',                // å…³é—­è¡Œä¸º: 'hide' | 'close'

  // æœç´¢æ¨¡å¼é…ç½®
  hideInModes: ['normal'],            // åœ¨å“ªäº›æ¨¡å¼ä¸‹éšè—
  showInModes: ['plugin'],            // åœ¨å“ªäº›æ¨¡å¼ä¸‹æ˜¾ç¤º
  anonymousSearchFields: ['name'],    // åŒ¿åæœç´¢å­—æ®µ

  // å›è°ƒå‡½æ•°
  onEnter: (params, api) => {
    // è¿›å…¥æ—¶æ‰§è¡Œçš„ä»£ç 
  },
  onSearch: (text, files) => {
    // é™„ä»¶æœç´¢å›è°ƒ
    return true; // è¿”å›æ˜¯å¦åŒ¹é…
  },
  onPluginSearch: (searchText, files) => {
    // æ’ä»¶æœç´¢å›è°ƒ
    return []; // è¿”å›æœç´¢ç»“æœæ•°ç»„
  }
}
```

### æ‰§è¡Œç±»å‹

```javascript
export enum PluginExecuteType {
  OPEN_APP = 1,        // æ‰“å¼€è½¯ä»¶
  OPEN_WEB_URL = 2,    // æ‰“å¼€ç½‘é¡µé“¾æ¥
  SHOW_WEBPAGE = 3,    // åœ¨å†…å®¹åŒºæ˜¾ç¤ºç½‘é¡µ
  CUSTOM_CODE = 4      // æ‰§è¡Œè‡ªå®šä¹‰ä»£ç 
}
```

### è®¾ç½®é…ç½®

æ’ä»¶æ”¯æŒä¸°å¯Œçš„è®¾ç½®é€‰é¡¹ï¼š

```javascript
settings: [
  {
    name: "settingName", // è®¾ç½®é¡¹åç§°
    title: "è®¾ç½®æ ‡é¢˜", // æ˜¾ç¤ºæ ‡é¢˜
    description: "è®¾ç½®æè¿°", // æè¿°ä¿¡æ¯
    type: "input", // è®¾ç½®ç±»å‹
    defaultValue: "é»˜è®¤å€¼", // é»˜è®¤å€¼
    required: false, // æ˜¯å¦å¿…éœ€
    children: [], // å­è®¾ç½®é¡¹
  },
];
```

æ”¯æŒçš„è®¾ç½®ç±»å‹ï¼š

- `input` - æ–‡æœ¬è¾“å…¥æ¡†
- `select` - ä¸‹æ‹‰é€‰æ‹©æ¡†
- `checkbox` - å¤é€‰æ¡†
- `radio` - å•é€‰æŒ‰é’®
- `textarea` - å¤šè¡Œæ–‡æœ¬æ¡†
- `number` - æ•°å­—è¾“å…¥æ¡†
- `date` - æ—¥æœŸé€‰æ‹©å™¨
- `time` - æ—¶é—´é€‰æ‹©å™¨
- `datetime` - æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨
- `file` - æ–‡ä»¶é€‰æ‹©å™¨
- `image` - å›¾ç‰‡é€‰æ‹©å™¨
- `video` - è§†é¢‘é€‰æ‹©å™¨
- `audio` - éŸ³é¢‘é€‰æ‹©å™¨
- `url` - URLè¾“å…¥æ¡†
- `email` - é‚®ç®±è¾“å…¥æ¡†
- `password` - å¯†ç è¾“å…¥æ¡†
- `tel` - ç”µè¯å·ç è¾“å…¥æ¡†
- `search` - æœç´¢æ¡†
- `range` - èŒƒå›´æ»‘å—
- `color` - é¢œè‰²é€‰æ‹©å™¨
- `hidden` - éšè—å­—æ®µ

## æ’ä»¶API

æ’ä»¶åœ¨æ‰§è¡Œæ—¶å¯ä»¥è®¿é—®ä¸°å¯Œçš„APIæ¥å£ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ’ä»¶çš„HTMLæ–‡ä»¶ä¸­éœ€è¦éµå¾ªåŸºç¡€preload.jsæä¾›çš„APIè§„èŒƒã€‚

### APIä½¿ç”¨è§„åˆ™

**é‡è¦æç¤º**ï¼š

1. åœ¨æ’ä»¶çš„HTMLæ–‡ä»¶ä¸­ï¼Œå¿…é¡»ä½¿ç”¨åŸºç¡€preload.jsï¼ˆbasic.tsï¼‰æä¾›çš„APIæ–¹æ³•æ¥è®¿é—®ç³»ç»ŸåŠŸèƒ½
2. **å‘½åå†²çªè§„åˆ™**ï¼šæ’ä»¶preload.jsä¸­**ä¸¥ç¦ä½¿ç”¨`electronAPI`**ä½œä¸ºAPIå‘½åç©ºé—´ï¼Œå› ä¸ºå®ƒå·²è¢«åŸºç¡€preloadå ç”¨
3. æ’ä»¶å¿…é¡»ä½¿ç”¨è‡ªå·±çš„APIå‘½åç©ºé—´ï¼Œå¦‚`yourPluginAPI`ã€`translatePluginAPI`ã€`pluginNameAPI`ç­‰
4. ç³»ç»Ÿä¼šå°†åŸºç¡€preloadå’Œæ’ä»¶preloadè¿›è¡Œèåˆï¼ŒåŒæ—¶æ”¯æŒä¸¤è€…çš„æ–¹æ³•
5. è¿åå‘½åè§„åˆ™ä¼šå¯¼è‡´APIè¦†ç›–å’ŒåŠŸèƒ½å¼‚å¸¸

### å‘½åå†²çªé˜²èŒƒ

ä¸ºé¿å…ä¸åŸºç¡€preloadçš„APIå†²çªï¼Œæ’ä»¶å¼€å‘æ—¶å¿…é¡»éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š

- âŒ **ç¦æ­¢ä½¿ç”¨çš„å‘½åç©ºé—´**ï¼š`electronAPI`ã€`webUtils`
- âœ… **æ¨èçš„å‘½åæ ¼å¼**ï¼š`{pluginId}API`ã€`{åŠŸèƒ½å}PluginAPI`
- âœ… **å‘½åç¤ºä¾‹**ï¼š
  - `translatePluginAPI` - ç¿»è¯‘æ’ä»¶
  - `calculatorAPI` - è®¡ç®—å™¨æ’ä»¶
  - `fileManagerAPI` - æ–‡ä»¶ç®¡ç†æ’ä»¶
  - `weatherPluginAPI` - å¤©æ°”æ’ä»¶

### APIå‘½åè§„èŒƒ

```javascript
// âŒ é”™è¯¯ - ä¸åŸºç¡€preloadå†²çª
contextBridge.exposeInMainWorld("electronAPI", {
  // æ’ä»¶æ–¹æ³•...
});

// âœ… æ­£ç¡® - ä½¿ç”¨æ’ä»¶ç‰¹å®šçš„å‘½åç©ºé—´
contextBridge.exposeInMainWorld("yourPluginAPI", {
  // æ’ä»¶æ–¹æ³•...
});

// âœ… ç¤ºä¾‹ - ç¿»è¯‘æ’ä»¶çš„å‘½åç©ºé—´
contextBridge.exposeInMainWorld("translatePluginAPI", {
  translateText,
  getLanguageName,
  // å…¶ä»–æ’ä»¶ç‰¹å®šæ–¹æ³•...
});
```

### åŸºç¡€APIï¼ˆåœ¨HTMLä¸­å¯ç”¨ï¼‰

```javascript
// ä½¿ç”¨åŸºç¡€preloadæä¾›çš„IPCè·¯ç”±ç³»ç»Ÿ
naimo.router

// æ—¥å¿—API
naimo.log.info(message: string, ...args: any[])
naimo.log.error(message: string, ...args: any[])
naimo.log.warn(message: string, ...args: any[])
naimo.log.debug(message: string, ...args: any[])

// æ’ä»¶é…ç½®åŠ è½½
naimo.webUtils.loadPluginConfig(configPath: string)

// æ–‡ä»¶è·¯å¾„è·å–
naimo.webUtils.getPathForFile(file: File): string
```

### å­˜å‚¨æ“ä½œï¼ˆé€šè¿‡IPCè·¯ç”±ï¼‰

```javascript
// è·å–æ’ä»¶è®¾ç½® - æ­£ç¡®çš„è°ƒç”¨æ–¹å¼
const settings = await naimo.router.storeGet("pluginSettings.your-plugin-id");

// è®¾ç½®æ’ä»¶é…ç½®
await naimo.router.storeSet("pluginSettings.your-plugin-id", settingsData);

// åˆ é™¤é…ç½®
await naimo.router.storeDeleteKey("pluginSettings.your-plugin-id");
```

### æ’ä»¶Preload APIï¼ˆä»…åœ¨preload.jsä¸­å¯ç”¨ï¼‰

```javascript
// è·å–æ’ä»¶èµ„æºè·¯å¾„
api.getResourcePath(path: string): string | null

// é’©å­äº‹ä»¶å¤„ç†
api.onHook(event: string, handler: Function): void

// è·å–/è®¾ç½®æ’ä»¶è®¾ç½®
api.getSettingValue(settingName?: string): Promise<any>
api.setSettingValue(settingName: string, value: any): Promise<boolean>

// å‘½ä»¤ç³»ç»Ÿ
api.onCommand(event: string, description: string, handler: Function): void
api.emitCommand(event: string, ...args: any[]): void

// UIæ§åˆ¶
api.toggleInput(value?: boolean): void
api.openPluginWindow(): void
```

### æ–‡ä»¶å’Œçª—å£æ“ä½œ

```javascript
// æ–‡ä»¶æ“ä½œ
api.addPathToFileList(name: string, path: string): Promise<void>

// çª—å£æ“ä½œ
api.openWebPageWindow(url: string, options?: any): Promise<void>
```

### æ’ä»¶ç®¡ç†

```javascript
// æ’ä»¶ç®¡ç†
api.plugin.installZip(zipPath: string): Promise<boolean>
api.plugin.install(pluginData: any): Promise<boolean>
api.plugin.uninstall(pluginId: string): Promise<boolean>
api.plugin.toggle(pluginId: string, enabled: boolean): Promise<boolean>
```

### IPCè·¯ç”±APIï¼ˆé€šè¿‡åŸºç¡€preloadå¯ç”¨ï¼‰

é€šè¿‡ `naimo.router` å¯ä»¥è®¿é—®æ‰€æœ‰ä¸»è¿›ç¨‹åŠŸèƒ½ï¼š

```javascript
// åº”ç”¨æ“ä½œ
naimo.router.appLaunchApp(path: string)
naimo.router.appGetInstalledApps()

// æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
naimo.router.filesystemReadFile(path: string)
naimo.router.filesystemWriteFile(path: string, content: string)
naimo.router.pluginGetPluginsDirectory()

// çª—å£æ“ä½œ
naimo.router.windowCreateWebPageWindow(parentId: number, url: string)
naimo.router.windowShow(id: number)
naimo.router.windowHide(id: number)
naimo.router.windowClose(id: number)
naimo.router.windowMinimize(id: number)
naimo.router.windowMaximize(id: number)

// çƒ­é”®æ“ä½œ
naimo.router.hotkeyRegister(accelerator: string)
naimo.router.hotkeyUnregister(accelerator: string)

// æ—¥å¿—æ“ä½œ
naimo.router.logInfo(message: string)
naimo.router.logError(message: string)
naimo.router.logWarn(message: string)
naimo.router.logDebug(message: string)

// å­˜å‚¨æ“ä½œ
naimo.router.storeGet(key: string)
naimo.router.storeSet(key: string, value: any)
naimo.router.storeDeleteKey(key: string)
naimo.router.storeClear()
```

## æ’ä»¶ç±»å‹å’Œæ¥å£

### PluginItem æ¥å£

```typescript
interface PluginItem extends AppItem {
  pluginId?: string;
  description?: string;
  autoStart?: boolean;
  executeType?: PluginExecuteType;
  executeParams?: {
    url?: string;
    code?: string;
    [key: string]: any;
  };
  weight?: number;
  closeAction?: "hide" | "close";
  onSearch?: (text: string, files: AttachedFile[]) => boolean;
  onPluginSearch?: (searchText: string, files: AttachedFile[]) => AppItem[];
  onEnter?: (
    params: { files: AttachedFile[]; searchText: string },
    api: PluginApi
  ) => void;
  hideInModes?: SearchMode[];
  showInModes?: SearchMode[];
  anonymousSearchFields?: string[];
}
```

### PluginConfig æ¥å£

```typescript
interface PluginConfig {
  id: string;
  name: string;
  description?: string;
  version: string;
  author?: string;
  icon?: string;
  category?: PluginCategoryType;
  enabled: boolean;
  items: PluginItem[];
  options?: Record<string, any>;
  settings?: SettingConfig[];
  metadata?: {
    createdAt: number;
    updatedAt: number;
    installedAt: number;
  };
}
```

### APIä½¿ç”¨ç¤ºä¾‹

#### åœ¨æ’ä»¶HTMLä¸­è·å–æ’ä»¶è®¾ç½®

```javascript
// âŒ é”™è¯¯çš„æ–¹å¼ - ä¸è¦è¿™æ ·åš
if (naimo && naimo.getPluginSettings) {
  pluginSettings = (await naimo.getPluginSettings()) || {};
}

// âœ… æ­£ç¡®çš„æ–¹å¼ - ä½¿ç”¨åŸºç¡€preloadæä¾›çš„IPCè·¯ç”±
if (naimo && naimo.router) {
  pluginSettings =
    (await naimo.router.storeGet("pluginSettings.your-plugin-id")) || {};
}
```

#### åœ¨æ’ä»¶HTMLä¸­è°ƒç”¨æ’ä»¶preloadæ–¹æ³•

```javascript
// æ’ä»¶preload.jsä¸­æš´éœ²çš„æ–¹æ³•å¯ä»¥ç›´æ¥è°ƒç”¨
// æ³¨æ„ï¼šæ’ä»¶éœ€è¦ä½¿ç”¨è‡ªå·±çš„APIå‘½åç©ºé—´ï¼Œé¿å…ä¸åŸºç¡€preloadå†²çª
if (window.translatePluginAPI && window.translatePluginAPI.translateText) {
  const result = await window.translatePluginAPI.translateText({
    sourceText: text,
    source: "auto",
    target: "zh",
    settings: pluginSettings,
  });
}
```

#### æ–‡ä»¶æ“ä½œç¤ºä¾‹

```javascript
// è¯»å–æ–‡ä»¶
const content = await naimo.router.filesystemReadFile("/path/to/file.txt");

// å†™å…¥æ–‡ä»¶
await naimo.router.filesystemWriteFile("/path/to/file.txt", "content");

// è·å–æ’ä»¶ç›®å½•
const pluginDir = await naimo.router.pluginGetPluginsDirectory();
```

#### æ—¥å¿—è®°å½•ç¤ºä¾‹

```javascript
// ä½¿ç”¨åŸºç¡€preloadæä¾›çš„æ—¥å¿—API
naimo.log.info("æ’ä»¶ä¿¡æ¯æ—¥å¿—");
naimo.log.error("æ’ä»¶é”™è¯¯æ—¥å¿—");
naimo.log.warn("æ’ä»¶è­¦å‘Šæ—¥å¿—");
naimo.log.debug("æ’ä»¶è°ƒè¯•æ—¥å¿—");
```

## å¼€å‘ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šç®€å•çš„åº”ç”¨å¯åŠ¨å™¨

```javascript
// config.js
module.exports = {
  id: "app-launcher",
  name: "åº”ç”¨å¯åŠ¨å™¨",
  description: "å¿«é€Ÿå¯åŠ¨å¸¸ç”¨åº”ç”¨",
  version: "1.0.0",
  author: "Developer",
  icon: "ğŸš€",
  category: "system_tools",
  enabled: true,

  items: [
    {
      name: "è®°äº‹æœ¬",
      path: "notepad.exe",
      icon: "ğŸ“",
      description: "æ‰“å¼€ç³»ç»Ÿè®°äº‹æœ¬",
      weight: 100,
      executeType: 1, // OPEN_APP
      onEnter: (params, api) => {
        naimo.router.appLaunchApp("C:\\Windows\\System32\\notepad.exe");
      },
    },
    {
      name: "è®¡ç®—å™¨",
      path: "calc.exe",
      icon: "ğŸ§®",
      description: "æ‰“å¼€ç³»ç»Ÿè®¡ç®—å™¨",
      weight: 90,
      onEnter: (params, api) => {
        naimo.router.appLaunchApp("calc.exe");
      },
    },
  ],
};
```

### ç¤ºä¾‹2ï¼šç½‘é¡µå·¥å…·æ’ä»¶

```javascript
// config.js
module.exports = {
  id: "web-tools",
  name: "ç½‘é¡µå·¥å…·",
  description: "å¸¸ç”¨çš„ç½‘é¡µå·¥å…·é›†åˆ",
  version: "1.0.0",
  author: "Developer",
  icon: "ğŸŒ",
  category: "efficient_office",
  enabled: true,

  items: [
    {
      name: "JSONæ ¼å¼åŒ–",
      path: "json-formatter",
      icon: "ğŸ“‹",
      description: "JSONæ•°æ®æ ¼å¼åŒ–å·¥å…·",
      weight: 100,
      executeType: 3, // SHOW_WEBPAGE
      executeParams: {
        url: "https://jsonformatter.org/",
      },
      onEnter: (params, api) => {
        api.openWebPageWindow("https://jsonformatter.org/");
      },
    },
    {
      name: "æœ¬åœ°å·¥å…·",
      path: "local-tool",
      icon: "ğŸ”§",
      description: "æœ¬åœ°HTMLå·¥å…·",
      weight: 90,
      onEnter: (params, api) => {
        api.openWebPageWindow(api.getResourcePath("index.html"), {
          preload: api.getResourcePath("preload.js"),
        });
      },
    },
  ],

  settings: [
    {
      name: "defaultTool",
      title: "é»˜è®¤å·¥å…·",
      description: "é€‰æ‹©é»˜è®¤æ‰“å¼€çš„å·¥å…·",
      type: "select",
      defaultValue: "json-formatter",
    },
  ],
};
```

### ç¤ºä¾‹3ï¼šè‡ªå®šä¹‰æœç´¢æ’ä»¶

```javascript
// config.js
module.exports = {
  id: "custom-search",
  name: "è‡ªå®šä¹‰æœç´¢",
  description: "æä¾›è‡ªå®šä¹‰æœç´¢åŠŸèƒ½",
  version: "1.0.0",
  author: "Developer",
  icon: "ğŸ”",
  category: "other",
  enabled: true,

  items: [
    {
      name: "åŠ¨æ€æœç´¢",
      path: "dynamic-search",
      icon: "âš¡",
      description: "åŠ¨æ€ç”Ÿæˆæœç´¢ç»“æœ",
      weight: 100,
      showInModes: ["plugin"], // åªåœ¨æ’ä»¶æœç´¢æ¨¡å¼ä¸‹æ˜¾ç¤º
      onPluginSearch: (searchText, files) => {
        // æ ¹æ®æœç´¢æ–‡æœ¬åŠ¨æ€ç”Ÿæˆç»“æœ
        const results = [];

        if (searchText.includes("æ—¶é—´")) {
          results.push({
            name: "å½“å‰æ—¶é—´",
            path: "current-time",
            icon: "â°",
            description: new Date().toLocaleString("zh-CN"),
            onEnter: (params, api) => {
              api.toggleInput(false);
              console.log("å½“å‰æ—¶é—´:", new Date().toLocaleString("zh-CN"));
            },
          });
        }

        if (searchText.includes("æ–‡ä»¶") && files.length > 0) {
          files.forEach((file) => {
            results.push({
              name: `å¤„ç†: ${file.name}`,
              path: file.path,
              icon: "ğŸ“",
              description: `å¤„ç†æ–‡ä»¶: ${file.name}`,
              onEnter: (params, api) => {
                console.log("å¤„ç†æ–‡ä»¶:", file);
                // å¤„ç†æ–‡ä»¶é€»è¾‘
              },
            });
          });
        }

        return results;
      },
    },
  ],
};
```

### ç¤ºä¾‹4ï¼šæ–‡ä»¶å¤„ç†æ’ä»¶

```javascript
// config.js
module.exports = {
  id: "file-processor",
  name: "æ–‡ä»¶å¤„ç†å™¨",
  description: "å¤„ç†æ‹–æ‹½çš„æ–‡ä»¶",
  version: "1.0.0",
  author: "Developer",
  icon: "ğŸ“",
  category: "system_tools",
  enabled: true,

  items: [
    {
      name: "å›¾ç‰‡å‹ç¼©",
      path: "image-compress",
      icon: "ğŸ–¼ï¸",
      description: "å‹ç¼©å›¾ç‰‡æ–‡ä»¶",
      weight: 100,
      showInModes: ["attachment"], // åªåœ¨é™„ä»¶æ¨¡å¼ä¸‹æ˜¾ç¤º
      onSearch: (text, files) => {
        // æ£€æŸ¥æ˜¯å¦æœ‰å›¾ç‰‡æ–‡ä»¶
        return files.some((file) =>
          /\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(file.name)
        );
      },
      onEnter: (params, api) => {
        const imageFiles = params.files.filter((file) =>
          /\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(file.name)
        );

        console.log("å‹ç¼©å›¾ç‰‡æ–‡ä»¶:", imageFiles);
        // å®ç°å›¾ç‰‡å‹ç¼©é€»è¾‘
      },
    },
    {
      name: "æ–‡æœ¬åˆ†æ",
      path: "text-analyze",
      icon: "ğŸ“„",
      description: "åˆ†ææ–‡æœ¬æ–‡ä»¶",
      weight: 90,
      onSearch: (text, files) => {
        return files.some((file) => /\.(txt|md|log|csv)$/i.test(file.name));
      },
      onEnter: (params, api) => {
        const textFiles = params.files.filter((file) =>
          /\.(txt|md|log|csv)$/i.test(file.name)
        );

        console.log("åˆ†ææ–‡æœ¬æ–‡ä»¶:", textFiles);
        // å®ç°æ–‡æœ¬åˆ†æé€»è¾‘
      },
    },
  ],
};
```

## æœ€ä½³å®è·µ

### 1. æ’ä»¶è®¾è®¡åŸåˆ™

- **å•ä¸€èŒè´£**: æ¯ä¸ªæ’ä»¶åº”è¯¥ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½é¢†åŸŸ
- **ç”¨æˆ·å‹å¥½**: æä¾›æ¸…æ™°çš„åç§°ã€æè¿°å’Œå›¾æ ‡
- **æ€§èƒ½ä¼˜åŒ–**: é¿å…åœ¨åˆå§‹åŒ–æ—¶æ‰§è¡Œè€—æ—¶æ“ä½œ
- **é”™è¯¯å¤„ç†**: å¦¥å–„å¤„ç†å¼‚å¸¸æƒ…å†µï¼Œæä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
- **å‘½åè§„èŒƒ**: ä¸¥æ ¼éµå¾ªAPIå‘½åè§„åˆ™ï¼Œé¿å…ä¸ç³»ç»ŸAPIå†²çª

### 2. ä»£ç è§„èŒƒ

```javascript
// âœ… æ­£ç¡®çš„APIå‘½å - æ’ä»¶preload.js
contextBridge.exposeInMainWorld("myPluginAPI", {
  doSomething: () => {
    /* æ’ä»¶åŠŸèƒ½ */
  },
  getPluginData: () => {
    /* è·å–æ•°æ® */
  },
});

// âŒ é”™è¯¯çš„APIå‘½å - ä¼šä¸åŸºç¡€preloadå†²çª
contextBridge.exposeInMainWorld("electronAPI", {
  // è¿™ä¼šè¦†ç›–åŸºç¡€preloadçš„APIï¼
});

// âœ… åœ¨HTMLä¸­æ­£ç¡®ä½¿ç”¨API
// åŸºç¡€åŠŸèƒ½ä½¿ç”¨ electronAPI
const settings = await naimo.router.storeGet("pluginSettings.my-plugin");

// æ’ä»¶åŠŸèƒ½ä½¿ç”¨æ’ä»¶API
const result = await window.myPluginAPI.doSomething();

// è‰¯å¥½çš„é”™è¯¯å¤„ç†
onEnter: async (params, api) => {
  try {
    const result = await naimo.router.filesystemReadFile(filePath);
    // å¤„ç†ç»“æœ
  } catch (error) {
    console.error("æ–‡ä»¶è¯»å–å¤±è´¥:", error);
    naimo.router.logError(`æ’ä»¶æ‰§è¡Œå¤±è´¥: ${error.message}`);
  }
};

// è®¾ç½®é»˜è®¤å€¼
const settings = (await api.getSettingValue()) || {};
const maxItems = settings.maxItems || 10;

// èµ„æºè·¯å¾„å¤„ç†
const iconPath = api.getResourcePath("icons/app.png");
if (iconPath) {
  // ä½¿ç”¨å›¾æ ‡
}
```

### 3. æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨ `weight` å±æ€§åˆç†æ’åºé¡¹ç›®
- åœ¨ `onPluginSearch` ä¸­å®ç°é«˜æ•ˆçš„æœç´¢ç®—æ³•
- é¿å…åœ¨å›è°ƒå‡½æ•°ä¸­æ‰§è¡ŒåŒæ­¥çš„è€—æ—¶æ“ä½œ
- åˆç†ä½¿ç”¨ `hideInModes` å’Œ `showInModes` æ§åˆ¶æ˜¾ç¤º

### 4. ç”¨æˆ·ä½“éªŒ

- æä¾›æœ‰æ„ä¹‰çš„å›¾æ ‡å’Œæè¿°
- ä½¿ç”¨é€‚å½“çš„ `closeAction` è®¾ç½®
- åœ¨è®¾ç½®ä¸­æä¾›åˆç†çš„é»˜è®¤å€¼
- æ”¯æŒå¤šç§æœç´¢æ¨¡å¼ä»¥é€‚åº”ä¸åŒåœºæ™¯

## è°ƒè¯•æŒ‡å—

### 1. æ—¥å¿—è°ƒè¯•

```javascript
// ä½¿ç”¨æ§åˆ¶å°æ—¥å¿—
console.log("æ’ä»¶è°ƒè¯•ä¿¡æ¯:", data);

// ä½¿ç”¨ç³»ç»Ÿæ—¥å¿—
naimo.router.logInfo("æ’ä»¶ä¿¡æ¯æ—¥å¿—");
naimo.router.logError("æ’ä»¶é”™è¯¯æ—¥å¿—");
```

### 2. å¼€å‘è€…å·¥å…·

åœ¨æ’ä»¶ç½‘é¡µçª—å£ä¸­å¯ä»¥ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·è¿›è¡Œè°ƒè¯•ï¼š

```javascript
// åœ¨preload.jsä¸­æ·»åŠ è°ƒè¯•åŠŸèƒ½
window.addEventListener("keydown", (e) => {
  if (e.key === "F12") {
    // æ‰“å¼€å¼€å‘è€…å·¥å…·
    if (naimo && naimo.openDevTools) {
      naimo.openDevTools();
    }
  }
});
```

### 3. æ’ä»¶çŠ¶æ€æ£€æŸ¥

```javascript
// æ£€æŸ¥APIå¯ç”¨æ€§
onEnter: (params, api) => {
  if (!api.ipcRouter) {
    console.error("IPCè·¯ç”±ä¸å¯ç”¨");
    return;
  }

  // æ£€æŸ¥è®¾ç½®
  api
    .getSettingValue()
    .then((settings) => {
      console.log("å½“å‰è®¾ç½®:", settings);
    })
    .catch((error) => {
      console.error("è·å–è®¾ç½®å¤±è´¥:", error);
    });
};
```

### 4. å¸¸è§é—®é¢˜è§£å†³

**é—®é¢˜1: æ’ä»¶æ— æ³•åŠ è½½**

- æ£€æŸ¥ `config.js` è¯­æ³•æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æ’ä»¶IDå”¯ä¸€æ€§
- æ£€æŸ¥å¿…éœ€å­—æ®µæ˜¯å¦å®Œæ•´

**é—®é¢˜2: APIå‘½åå†²çª**

- âŒ æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº† `electronAPI` ä½œä¸ºæ’ä»¶APIå‘½åç©ºé—´
- âœ… æ”¹ç”¨æ’ä»¶ç‰¹å®šçš„å‘½åç©ºé—´ï¼Œå¦‚ `yourPluginAPI`
- æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰APIè¦†ç›–è­¦å‘Š
- éªŒè¯åŸºç¡€åŠŸèƒ½ï¼ˆå¦‚å­˜å‚¨ã€æ–‡ä»¶æ“ä½œï¼‰æ˜¯å¦æ­£å¸¸å·¥ä½œ

**é—®é¢˜3: èµ„æºæ–‡ä»¶æ— æ³•è®¿é—®**

- ä½¿ç”¨ `api.getResourcePath()` è·å–æ­£ç¡®è·¯å¾„
- ç¡®è®¤æ–‡ä»¶å­˜åœ¨äºæ’ä»¶ç›®å½•ä¸­
- æ£€æŸ¥æ–‡ä»¶æƒé™

**é—®é¢˜4: IPCè°ƒç”¨å¤±è´¥**

- ç¡®è®¤APIæ–¹æ³•åç§°æ­£ç¡®
- æ£€æŸ¥å‚æ•°ç±»å‹å’Œæ ¼å¼
- æŸ¥çœ‹ä¸»è¿›ç¨‹æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
- éªŒè¯æ˜¯å¦ä½¿ç”¨äº†æ­£ç¡®çš„APIå‘½åç©ºé—´

**é—®é¢˜5: æœç´¢åŠŸèƒ½å¼‚å¸¸**

- æ£€æŸ¥ `onSearch` å’Œ `onPluginSearch` è¿”å›å€¼æ ¼å¼
- ç¡®è®¤æœç´¢æ¨¡å¼é…ç½®æ­£ç¡®
- éªŒè¯åŒ¿åæœç´¢å­—æ®µè®¾ç½®

**é—®é¢˜6: æ’ä»¶åŠŸèƒ½æ— å“åº”**

- æ£€æŸ¥æ’ä»¶preload.jsæ˜¯å¦æ­£ç¡®æš´éœ²äº†API
- ç¡®è®¤HTMLä¸­ä½¿ç”¨äº†æ­£ç¡®çš„APIå‘½åç©ºé—´
- éªŒè¯æ’ä»¶APIæ–¹æ³•æ˜¯å¦è¢«æ­£ç¡®è°ƒç”¨

## æ€»ç»“

Naimo Tools æ’ä»¶ç³»ç»Ÿæä¾›äº†å¼ºå¤§è€Œçµæ´»çš„æ‰©å±•èƒ½åŠ›ã€‚é€šè¿‡åˆç†ä½¿ç”¨æ’ä»¶APIå’Œéµå¾ªæœ€ä½³å®è·µï¼Œå¼€å‘è€…å¯ä»¥åˆ›å»ºåŠŸèƒ½ä¸°å¯Œã€ç”¨æˆ·ä½“éªŒè‰¯å¥½çš„æ’ä»¶ã€‚

åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå»ºè®®ï¼š

1. å…ˆä»ç®€å•çš„ç¤ºä¾‹å¼€å§‹
2. é€æ­¥æ·»åŠ å¤æ‚åŠŸèƒ½
3. å……åˆ†æµ‹è¯•å„ç§åœºæ™¯
4. å…³æ³¨ç”¨æˆ·åé¦ˆå’Œæ€§èƒ½è¡¨ç°

å¸Œæœ›è¿™ä»½æ–‡æ¡£èƒ½å¸®åŠ©æ‚¨å¿«é€Ÿä¸Šæ‰‹ Naimo Tools æ’ä»¶å¼€å‘ï¼
