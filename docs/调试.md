# è°ƒè¯•æŒ‡å—

## æ¦‚è¿°

æœ¬é¡¹ç›®æä¾›äº†å®Œæ•´çš„è°ƒè¯•ç¯å¢ƒï¼Œæ”¯æŒå¯¹ä¸»è¿›ç¨‹ã€æ¸²æŸ“è¿›ç¨‹å’Œé¢„åŠ è½½è„šæœ¬è¿›è¡Œæ–­ç‚¹è°ƒè¯•ã€‚é€šè¿‡ VS Code çš„è°ƒè¯•é…ç½®ï¼Œå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œä»£ç è°ƒè¯•å’Œé—®é¢˜æ’æŸ¥ã€‚

## è°ƒè¯•é…ç½®

### VS Code è°ƒè¯•é…ç½®

é¡¹ç›®å·²é…ç½®å¥½ `.vscode/launch.json` æ–‡ä»¶ï¼ŒåŒ…å«ä»¥ä¸‹è°ƒè¯•é…ç½®ï¼š

```json
{
  "version": "0.2.0",
  "configurations": [...]
  "compounds": [
    {
      "name": "ğŸš€ å¼€å§‹è°ƒè¯•",
      "configurations": [
        "ğŸ”§ å¯åŠ¨å¼€å‘æœåŠ¡å™¨",
        "ğŸ”§ Electron: ä¸»è¿›ç¨‹",
        "ğŸ”§ Electron: æ¸²æŸ“è¿›ç¨‹",
        "ğŸ”§ Electron: Preload"
      ],
      "stopAll": true
    }
  ]
}

```

### å¯åŠ¨è°ƒè¯•

1. åœ¨ VS Code ä¸­æŒ‰ `F5` æˆ–ç‚¹å‡»è°ƒè¯•é¢æ¿ä¸­çš„ "ğŸš€ å¼€å§‹è°ƒè¯•"
2. åº”ç”¨å°†å¯åŠ¨å¹¶è‡ªåŠ¨è¿æ¥è°ƒè¯•å™¨
3. å¯ä»¥åœ¨ä»£ç ä¸­è®¾ç½®æ–­ç‚¹è¿›è¡Œè°ƒè¯•

## è°ƒè¯•ä¸åŒè¿›ç¨‹

### ä¸»è¿›ç¨‹è°ƒè¯•

ä¸»è¿›ç¨‹æ˜¯ Electron åº”ç”¨çš„æ ¸å¿ƒï¼Œè´Ÿè´£åˆ›å»ºå’Œç®¡ç†åº”ç”¨çª—å£ã€‚

**è°ƒè¯•æ­¥éª¤**ï¼š

1. åœ¨ `src/main/` ç›®å½•ä¸‹çš„ TypeScript æ–‡ä»¶ä¸­è®¾ç½®æ–­ç‚¹
2. å¯åŠ¨è°ƒè¯•ä¼šè¯
3. è§¦å‘ç›¸åº”çš„åŠŸèƒ½ï¼Œæ–­ç‚¹ä¼šè¢«å‘½ä¸­

**ç¤ºä¾‹**ï¼š

```typescript
// src/main/main.ts
import { app, BrowserWindow } from "electron";
import log from "electron-log";

app.whenReady().then(() => {
  log.info("åº”ç”¨å¯åŠ¨"); // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹
  createWindow();
});
```

### æ¸²æŸ“è¿›ç¨‹è°ƒè¯•

æ¸²æŸ“è¿›ç¨‹è¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨ Chrome DevTools è¿›è¡Œè°ƒè¯•ã€‚

**è°ƒè¯•æ­¥éª¤**ï¼š

1. åœ¨ `src/renderer/` ç›®å½•ä¸‹çš„ Vue ç»„ä»¶æˆ– TypeScript æ–‡ä»¶ä¸­è®¾ç½®æ–­ç‚¹
2. å¯åŠ¨è°ƒè¯•ä¼šè¯
3. åœ¨åº”ç”¨çª—å£ä¸­è§¦å‘ç›¸åº”åŠŸèƒ½

**ç¤ºä¾‹**ï¼š

```typescript
// src/renderer/src/App.vue
<script setup lang="ts">
import { onMounted } from 'vue';

onMounted(() => {
  console.log('ç»„ä»¶æŒ‚è½½'); // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹
  // æˆ–è€…ä½¿ç”¨ debugger è¯­å¥
  debugger;
});
</script>
```

### é¢„åŠ è½½è„šæœ¬è°ƒè¯•

é¢„åŠ è½½è„šæœ¬åœ¨ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´è¿è¡Œï¼Œè°ƒè¯•ç›¸å¯¹å¤æ‚ã€‚

**è°ƒè¯•æ­¥éª¤**ï¼š

1. åœ¨ `src/main/preloads/` ç›®å½•ä¸‹çš„æ–‡ä»¶ä¸­è®¾ç½®æ–­ç‚¹
2. å¦‚æœæ–­ç‚¹ä¸ç”Ÿæ•ˆï¼Œå…ˆä½¿ç”¨ `debugger` è¯­å¥
3. å¯åŠ¨è°ƒè¯•ä¼šè¯ï¼Œæ–­ç‚¹ä¼šè¢«å‘½ä¸­

**ç¤ºä¾‹**ï¼š

```typescript
// src/main/preloads/basic.ts
import { contextBridge } from "electron";

// ä½¿ç”¨ debugger è¯­å¥å¼ºåˆ¶æ–­ç‚¹
debugger;

contextBridge.exposeInMainWorld("electronAPI", {
  // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹
  log: {
    info: (message: string) => {
      console.log(message); // æ–­ç‚¹ä½ç½®
    },
  },
});
```

## è°ƒè¯•æŠ€å·§

### 1. ä½¿ç”¨ debugger è¯­å¥

å½“ VS Code æ–­ç‚¹ä¸ç”Ÿæ•ˆæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `debugger` è¯­å¥ï¼š

```typescript
function someFunction() {
  debugger; // å¼ºåˆ¶æ–­ç‚¹
  // ä»£ç æ‰§è¡Œä¼šåœ¨è¿™é‡Œæš‚åœ
  console.log("è°ƒè¯•ä¿¡æ¯");
}
```

### 2. æ§åˆ¶å°è°ƒè¯•

åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ VS Code çš„è°ƒè¯•æ§åˆ¶å°ï¼š

```typescript
// åœ¨æ–­ç‚¹å¤„ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
// æŸ¥çœ‹å˜é‡å€¼
console.log(variableName);

// æ‰§è¡Œè¡¨è¾¾å¼
someFunction();

// æŸ¥çœ‹å¯¹è±¡å±æ€§
Object.keys(someObject);
```

### 3. æ¡ä»¶æ–­ç‚¹

è®¾ç½®æ¡ä»¶æ–­ç‚¹ï¼Œåªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹è§¦å‘ï¼š

1. å³é”®ç‚¹å‡»æ–­ç‚¹
2. é€‰æ‹© "ç¼–è¾‘æ–­ç‚¹"
3. è¾“å…¥æ¡ä»¶è¡¨è¾¾å¼

```typescript
// ç¤ºä¾‹ï¼šåªåœ¨ userId å¤§äº 100 æ—¶è§¦å‘æ–­ç‚¹
function processUser(userId: number) {
  // æ¡ä»¶æ–­ç‚¹ï¼šuserId > 100
  console.log("å¤„ç†ç”¨æˆ·", userId);
}
```

### 4. æ—¥å¿—æ–­ç‚¹

ä½¿ç”¨æ—¥å¿—æ–­ç‚¹è®°å½•ä¿¡æ¯è€Œä¸æš‚åœæ‰§è¡Œï¼š

1. å³é”®ç‚¹å‡»æ–­ç‚¹
2. é€‰æ‹© "ç¼–è¾‘æ–­ç‚¹"
3. è¾“å…¥æ—¥å¿—æ¶ˆæ¯

```typescript
// ç¤ºä¾‹ï¼šè®°å½•å‡½æ•°è°ƒç”¨è€Œä¸æš‚åœ
function apiCall(data: any) {
  // æ—¥å¿—æ–­ç‚¹ï¼š`APIè°ƒç”¨: ${JSON.stringify(data)}`
  return fetch("/api", { method: "POST", body: JSON.stringify(data) });
}
```

## å¸¸è§è°ƒè¯•åœºæ™¯

### 1. IPC é€šä¿¡è°ƒè¯•

è°ƒè¯•ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼š

```typescript
// ä¸»è¿›ç¨‹ - src/main/ipc-router/modules/app.ts
export function getVersion(): string {
  debugger; // æ–­ç‚¹ï¼šæŸ¥çœ‹è°ƒç”¨å‚æ•°
  const version = app.getVersion();
  log.info("è·å–ç‰ˆæœ¬", version); // æ–­ç‚¹ï¼šæŸ¥çœ‹è¿”å›å€¼
  return version;
}

// æ¸²æŸ“è¿›ç¨‹
const version = await api.ipcRouter.appGetVersion(); // æ–­ç‚¹ï¼šæŸ¥çœ‹è°ƒç”¨ç»“æœ
console.log("åº”ç”¨ç‰ˆæœ¬:", version);
```

### 2. é”™è¯¯è°ƒè¯•

è°ƒè¯•åº”ç”¨ä¸­çš„é”™è¯¯ï¼š

```typescript
// ä½¿ç”¨ try-catch åŒ…è£…å¯èƒ½å‡ºé”™çš„ä»£ç 
try {
  const result = await someAsyncOperation();
  debugger; // æ–­ç‚¹ï¼šæŸ¥çœ‹æˆåŠŸç»“æœ
} catch (error) {
  debugger; // æ–­ç‚¹ï¼šæŸ¥çœ‹é”™è¯¯ä¿¡æ¯
  log.error("æ“ä½œå¤±è´¥", error);
}
```

### 3. æ€§èƒ½è°ƒè¯•

è°ƒè¯•æ€§èƒ½é—®é¢˜ï¼š

```typescript
// ä½¿ç”¨ performance API æµ‹é‡æ‰§è¡Œæ—¶é—´
const startTime = performance.now();

// æ‰§è¡Œä¸€äº›æ“ä½œ
await someOperation();

const endTime = performance.now();
debugger; // æ–­ç‚¹ï¼šæŸ¥çœ‹æ‰§è¡Œæ—¶é—´
console.log(`æ“ä½œè€—æ—¶: ${endTime - startTime}ms`);
```

## è°ƒè¯•å·¥å…·

### 1. Chrome DevTools

æ¸²æŸ“è¿›ç¨‹å¯ä»¥ä½¿ç”¨ Chrome DevToolsï¼š

1. åœ¨åº”ç”¨çª—å£ä¸­æŒ‰ `F12` æˆ– `Ctrl+Shift+I`
2. ä½¿ç”¨ Sources é¢æ¿è®¾ç½®æ–­ç‚¹
3. ä½¿ç”¨ Console é¢æ¿æ‰§è¡Œå‘½ä»¤
4. ä½¿ç”¨ Network é¢æ¿æŸ¥çœ‹ç½‘ç»œè¯·æ±‚

### 2. VS Code è°ƒè¯•é¢æ¿

VS Code è°ƒè¯•é¢æ¿æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

- **å˜é‡é¢æ¿**: æŸ¥çœ‹å½“å‰ä½œç”¨åŸŸä¸­çš„å˜é‡
- **ç›‘è§†é¢æ¿**: ç›‘è§†ç‰¹å®šè¡¨è¾¾å¼çš„å€¼
- **è°ƒç”¨å †æ ˆ**: æŸ¥çœ‹å‡½æ•°è°ƒç”¨é“¾
- **æ–­ç‚¹é¢æ¿**: ç®¡ç†æ‰€æœ‰æ–­ç‚¹

### 3. æ—¥å¿—è°ƒè¯•

ä½¿ç”¨é¡¹ç›®é›†æˆçš„æ—¥å¿—ç³»ç»Ÿè¿›è¡Œè°ƒè¯•ï¼š

```typescript
// ä¸»è¿›ç¨‹
import log from "electron-log";
log.debug("è°ƒè¯•ä¿¡æ¯", { data: someData });

// æ¸²æŸ“è¿›ç¨‹
api.log.debug("æ¸²æŸ“è¿›ç¨‹è°ƒè¯•", { component: "App" });
```

## å¸¸è§é—®é¢˜è§£å†³

### Q: æ–­ç‚¹ä¸ç”Ÿæ•ˆæ€ä¹ˆåŠï¼Ÿ

A:

1. ç¡®ä¿ä»£ç å·²ç¼–è¯‘ï¼ˆè¿è¡Œ `pnpm build`ï¼‰
2. ä½¿ç”¨ `debugger` è¯­å¥æ›¿ä»£æ–­ç‚¹
3. æ£€æŸ¥ VS Code è°ƒè¯•é…ç½®æ˜¯å¦æ­£ç¡®
4. é‡å¯è°ƒè¯•ä¼šè¯

### Q: é¢„åŠ è½½è„šæœ¬æ–­ç‚¹æ— æ•ˆï¼Ÿ

A:

1. å…ˆåœ¨ä»£ç ä¸­æ·»åŠ  `debugger` è¯­å¥
2. ç¡®ä¿é¢„åŠ è½½è„šæœ¬å·²æ­£ç¡®åŠ è½½
3. æ£€æŸ¥ `contextBridge.exposeInMainWorld` æ˜¯å¦æ­£ç¡®é…ç½®

### Q: æ¸²æŸ“è¿›ç¨‹æ–­ç‚¹æ— æ•ˆï¼Ÿ

A:

1. ç¡®ä¿ Vue ç»„ä»¶å·²æ­£ç¡®æŒ‚è½½
2. ä½¿ç”¨ Chrome DevTools ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ
3. æ£€æŸ¥çƒ­é‡è½½æ˜¯å¦å½±å“æ–­ç‚¹

### Q: å¦‚ä½•è°ƒè¯•å¼‚æ­¥ä»£ç ï¼Ÿ

A:

1. åœ¨ async/await å‡½æ•°ä¸­è®¾ç½®æ–­ç‚¹
2. ä½¿ç”¨ Promise çš„ then/catch å›è°ƒè®¾ç½®æ–­ç‚¹
3. ä½¿ç”¨ `console.log` è·Ÿè¸ªå¼‚æ­¥æ‰§è¡Œæµç¨‹

## è°ƒè¯•æœ€ä½³å®è·µ

1. **ä½¿ç”¨æœ‰æ„ä¹‰çš„æ–­ç‚¹**: åœ¨å…³é”®é€»è¾‘å¤„è®¾ç½®æ–­ç‚¹
2. **è®°å½•è°ƒè¯•ä¿¡æ¯**: ä½¿ç”¨æ—¥å¿—è®°å½•é‡è¦çš„è°ƒè¯•ä¿¡æ¯
3. **é€æ­¥è°ƒè¯•**: ä½¿ç”¨æ­¥è¿›åŠŸèƒ½é€æ­¥æ‰§è¡Œä»£ç 
4. **æ¸…ç†æ–­ç‚¹**: è°ƒè¯•å®ŒæˆååŠæ—¶æ¸…ç†æ–­ç‚¹
5. **ä½¿ç”¨æ¡ä»¶æ–­ç‚¹**: åœ¨ç‰¹å®šæ¡ä»¶ä¸‹è§¦å‘æ–­ç‚¹
6. **ç»„åˆä½¿ç”¨å·¥å…·**: ç»“åˆ VS Code å’Œ Chrome DevTools è¿›è¡Œè°ƒè¯•

## æ€§èƒ½è°ƒè¯•

### 1. å†…å­˜æ³„æ¼æ£€æµ‹

```typescript
// ä½¿ç”¨ Chrome DevTools çš„ Memory é¢æ¿
// æˆ–ä½¿ç”¨ Node.js çš„ --inspect æ ‡å¿—
process.memoryUsage(); // æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ
```

### 2. CPU æ€§èƒ½åˆ†æ

```typescript
// ä½¿ç”¨ Chrome DevTools çš„ Performance é¢æ¿
// æˆ–ä½¿ç”¨ console.time/timeEnd
console.time("operation");
await someOperation();
console.timeEnd("operation");
```

### 3. ç½‘ç»œè¯·æ±‚è°ƒè¯•

```typescript
// ä½¿ç”¨ Chrome DevTools çš„ Network é¢æ¿
// æˆ–åœ¨ä»£ç ä¸­æ·»åŠ è¯·æ±‚æ—¥å¿—
fetch("/api/data")
  .then((response) => {
    debugger; // æ–­ç‚¹ï¼šæŸ¥çœ‹å“åº”
    return response.json();
  })
  .then((data) => {
    debugger; // æ–­ç‚¹ï¼šæŸ¥çœ‹æ•°æ®
    console.log(data);
  });
```
