# Naimo Tools æ’ä»¶å¼€å‘å®Œæ•´æŒ‡å—

> ç‰ˆæœ¬ï¼šv2.0  
> æ›´æ–°æ—¶é—´ï¼š2025-10-07  
> æ¶æ„ï¼šæ‡’åŠ è½½æ¶æ„

## ğŸ“– ç›®å½•

- [ç®€ä»‹](#ç®€ä»‹)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æ’ä»¶ç»“æ„](#æ’ä»¶ç»“æ„)
- [é…ç½®æ–‡ä»¶è¯¦è§£](#é…ç½®æ–‡ä»¶è¯¦è§£)
- [åŠŸèƒ½ç±»å‹è¯¦è§£](#åŠŸèƒ½ç±»å‹è¯¦è§£)
- [Preload è„šæœ¬å¼€å‘](#preload-è„šæœ¬å¼€å‘)
- [UI é¡µé¢å¼€å‘](#ui-é¡µé¢å¼€å‘)
- [API å‚è€ƒ](#api-å‚è€ƒ)
- [ç”Ÿå‘½å‘¨æœŸ](#ç”Ÿå‘½å‘¨æœŸ)
- [è°ƒè¯•æŠ€å·§](#è°ƒè¯•æŠ€å·§)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ç®€ä»‹

Naimo Tools é‡‡ç”¨**æ‡’åŠ è½½æ¶æ„**ï¼Œæ’ä»¶ç³»ç»Ÿè®¾è®¡ä¸ºè½»é‡ã€çµæ´»ã€æ˜“æ‰©å±•ã€‚æ’ä»¶å¯ä»¥æ‰©å±•åº”ç”¨çš„æœç´¢åŠŸèƒ½ï¼Œæä¾›è‡ªå®šä¹‰çš„åŠŸèƒ½é¡¹ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **æ‡’åŠ è½½**ï¼šæ’ä»¶ä»£ç ä»…åœ¨éœ€è¦æ—¶åŠ è½½ï¼Œæå‡æ€§èƒ½
- âœ… **é…ç½®é©±åŠ¨**ï¼šé€šè¿‡ JSON é…ç½®æ–‡ä»¶å®šä¹‰æ’ä»¶è¡Œä¸º
- âœ… **å¤šåŠŸèƒ½æ”¯æŒ**ï¼šä¸€ä¸ªæ’ä»¶å¯ä»¥æä¾›å¤šä¸ªç‹¬ç«‹åŠŸèƒ½
- âœ… **ç±»å‹å®‰å…¨**ï¼šæä¾›å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- âœ… **ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šæ”¯æŒå¤šç§çª—å£ç”Ÿå‘½å‘¨æœŸæ¨¡å¼

### æ¶æ„è¯´æ˜

**æ‡’åŠ è½½æ¶æ„**æ˜¯ Naimo Tools v2.0 çš„æ ¸å¿ƒç‰¹æ€§ï¼š

- **æŒ‰éœ€åŠ è½½**ï¼šæ’ä»¶ä»£ç ä»…åœ¨åŠŸèƒ½è¢«è§¦å‘æ—¶åŠ è½½ï¼Œæå‡æ€§èƒ½
- **é…ç½®ä¸ä»£ç åˆ†ç¦»**ï¼š`manifest.json` ä¸ºçº¯ JSON é…ç½®ï¼ŒåŠŸèƒ½å¤„ç†å™¨åœ¨ `preload.js` ä¸­å®ç°
- **ç»Ÿä¸€ç®¡ç†**ï¼š`main` å’Œ `preload` åœ¨æ’ä»¶é¡¶å±‚ç»Ÿä¸€é…ç½®ï¼Œæ‰€æœ‰ feature å…±äº«

---

## å¿«é€Ÿå¼€å§‹

### åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæ’ä»¶

#### 1. åˆ›å»ºæ’ä»¶ç›®å½•

```bash
mkdir my-plugin
cd my-plugin
```

#### 2. åˆ›å»º `manifest.json`

```json
{
  "id": "my-plugin",
  "name": "æˆ‘çš„æ’ä»¶",
  "version": "1.0.0",
  "author": "ä½ çš„åå­—",
  "icon": "ğŸ¯",
  "description": "è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªæ’ä»¶",
  "category": "other",
  "enabled": true,
  "main": "./index.html",
  "preload": "./preload.js",
  "feature": [
    {
      "path": "hello",
      "name": "æ‰“æ‹›å‘¼",
      "icon": "ğŸ‘‹",
      "description": "å‘ä¸–ç•Œé—®å¥½",
      "type": "text",
      "weight": 100,
      "lifecycleType": "reuse",
      "singleton": true
    }
  ]
}
```

#### 3. åˆ›å»º `preload.js`

```javascript
// å¯¼å‡ºåŠŸèƒ½å¤„ç†å™¨
module.exports = {
  // åŠŸèƒ½æ ‡è¯†å¯¹åº” manifest.json ä¸­çš„ path
  hello: {
    onEnter: async (params) => {
      console.log("Hello World!");
      console.log("å‚æ•°:", params);
      // çª—å£ä¼šè‡ªåŠ¨æ‰“å¼€ main æŒ‡å®šçš„é¡µé¢
      // ä½ å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›åˆå§‹åŒ–å·¥ä½œ
    },
  },
};
```

#### 4. åˆ›å»º `index.html`

```html
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æˆ‘çš„æ’ä»¶</title>
    <style>
  <body>
    <div class="container">
      <h1>ğŸ‘‹ Hello World!</h1>
      <p>æ¬¢è¿ä½¿ç”¨æˆ‘çš„ç¬¬ä¸€ä¸ªæ’ä»¶</p>
      <button onclick="logMessage()">æµ‹è¯•æ—¥å¿—</button>
    </div>
    <script>
      function logMessage() {
        // ä½¿ç”¨ naimo æä¾›çš„æ—¥å¿— API
        window.naimo.log.info("Hello from plugin!");
      }
    </script>
  </body>
</html>
```

#### 5. å®‰è£…æ’ä»¶

å°†æ’ä»¶æ–‡ä»¶å¤¹å¤åˆ¶åˆ° Naimo Tools çš„ `plugins` ç›®å½•ï¼Œç„¶åé‡å¯åº”ç”¨ã€‚

#### 6. æµ‹è¯•æ’ä»¶

åœ¨æœç´¢æ¡†ä¸­è¾“å…¥ä»»æ„æ–‡æœ¬ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°"æ‰“æ‹›å‘¼"è¿™ä¸ªé€‰é¡¹ã€‚é€‰æ‹©å®ƒå³å¯è§¦å‘æ’ä»¶ã€‚

---

## æ’ä»¶ç»“æ„

### æ ‡å‡†æ–‡ä»¶ç»“æ„

```
my-plugin/
â”œâ”€â”€ manifest.json      # æ’ä»¶é…ç½®æ–‡ä»¶ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ preload.js        # Preload è„šæœ¬ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ index.html        # UI é¡µé¢ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ icon.png          # æ’ä»¶å›¾æ ‡ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ README.md         # è¯´æ˜æ–‡æ¡£ï¼ˆæ¨èï¼‰
â””â”€â”€ assets/           # èµ„æºæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
    â”œâ”€â”€ styles/
    â”œâ”€â”€ scripts/
    â””â”€â”€ images/
```

### æ–‡ä»¶è¯´æ˜

#### manifest.jsonï¼ˆå¿…éœ€ï¼‰

æ’ä»¶çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå®šä¹‰æ’ä»¶çš„æ‰€æœ‰å…ƒæ•°æ®å’ŒåŠŸèƒ½ã€‚

#### preload.jsï¼ˆå¿…éœ€ï¼‰

Preload è„šæœ¬ï¼Œåœ¨æ’ä»¶çª—å£åˆ›å»ºæ—¶æ‰§è¡Œã€‚ä¸»è¦ç”¨é€”ï¼š

1. å¯¼å‡ºåŠŸèƒ½å¤„ç†å™¨ï¼ˆ`module.exports`ï¼‰
2. æš´éœ² API åˆ°æ¸²æŸ“è¿›ç¨‹ï¼ˆ`contextBridge.exposeInMainWorld`ï¼‰
3. åˆå§‹åŒ–æ’ä»¶ç¯å¢ƒ

#### index.htmlï¼ˆå¯é€‰ï¼‰

æ’ä»¶çš„ UI é¡µé¢ã€‚å¦‚æœæ’ä»¶åªæä¾›åå°åŠŸèƒ½ï¼ˆæ—  UIï¼‰ï¼Œå¯ä»¥ä¸åˆ›å»ºæ­¤æ–‡ä»¶ã€‚

---

## é…ç½®æ–‡ä»¶è¯¦è§£

### manifest.json å®Œæ•´è¯´æ˜

```json
{
  // ===== åŸºæœ¬ä¿¡æ¯ï¼ˆå¿…éœ€ï¼‰ =====
  "id": "my-plugin", // æ’ä»¶å”¯ä¸€æ ‡è¯†
  "name": "æˆ‘çš„æ’ä»¶", // æ’ä»¶åç§°
  "version": "1.0.0", // ç‰ˆæœ¬å·ï¼ˆè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰
  "enabled": true, // æ˜¯å¦å¯ç”¨

  // ===== ä½œè€…ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰ =====
  "author": "ä½ çš„åå­—", // ä½œè€…
  "icon": "ğŸ¯", // æ’ä»¶å›¾æ ‡ï¼ˆemoji æˆ–å›¾ç‰‡è·¯å¾„ï¼‰
  "description": "æ’ä»¶æè¿°", // æ’ä»¶æè¿°

  // ===== åˆ†ç±»ï¼ˆå¯é€‰ï¼‰ =====
  "category": "other", // æ’ä»¶åˆ†ç±»

  // ===== ä¸‹è½½åœ°å€ï¼ˆå¯é€‰ï¼‰ =====
  "downloadUrl": "https://...", // æ’ä»¶ä¸‹è½½åœ°å€

  // ===== æ’ä»¶çº§åˆ«é…ç½®ï¼ˆæ‰€æœ‰ feature å…±ç”¨ï¼‰ =====
  "main": "./index.html", // UI é¡µé¢è·¯å¾„ï¼ˆå¯é€‰ï¼‰
  "preload": "./preload.js", // Preload è„šæœ¬è·¯å¾„ï¼ˆå¿…éœ€ï¼‰

  // ===== åŠŸèƒ½åˆ—è¡¨ï¼ˆå¿…éœ€ï¼‰ =====
  "feature": [
    {
      "path": "hello", // åŠŸèƒ½æ ‡è¯†
      "name": "æ‰“æ‹›å‘¼", // åŠŸèƒ½åç§°
      "type": "text", // åŠŸèƒ½ç±»å‹
      "icon": "ğŸ‘‹", // åŠŸèƒ½å›¾æ ‡
      "description": "æè¿°", // åŠŸèƒ½æè¿°
      "weight": 100, // æ’åºæƒé‡
      "lifecycleType": "reuse", // ç”Ÿå‘½å‘¨æœŸç±»å‹
      "singleton": true // æ˜¯å¦å•ä¾‹
      // ... å…¶ä»–é…ç½®
    }
  ],

  // ===== è‡ªå®šä¹‰é€‰é¡¹ï¼ˆå¯é€‰ï¼‰ =====
  "options": {
    "customKey": "customValue"
  }

  // ===== è®¾ç½®é…ç½®ï¼ˆå¯é€‰ï¼Œå½“å‰ç‰ˆæœ¬è¯»å†™åŠŸèƒ½æœªå®ç°ï¼‰ =====
  // "settings": [
  //   {
  //     "name": "apiKey",
  //     "title": "API å¯†é’¥",
  //     "type": "input",
  //     "defaultValue": "",
  //     "required": false
  //   }
  // ]
}
```

### æ’ä»¶åˆ†ç±»ï¼ˆcategoryï¼‰

| å€¼                           | åç§°       | æè¿°                      |
| ---------------------------- | ---------- | ------------------------- |
| `efficient_office`           | é«˜æ•ˆåŠå…¬   | æ™ºèƒ½åŠ©æ‰‹,è½»æ¾æå®šåŠå…¬çäº‹ |
| `ai_artificial_intelligence` | AIäººå·¥æ™ºèƒ½ | ä¸æ™ºèƒ½åŒè¡Œ,èµ‹èƒ½æ¯ä¸€åˆ»     |
| `developer_essentials`       | ç¨‹åºå‘˜å¿…å¤‡ | è®©ä½ æ›´ä¸“æ³¨åœ°æ”¹å˜ä¸–ç•Œ      |
| `record_ideas`               | è®°å½•æƒ³æ³•   | è®°å½•ç‚¹æ»´çµæ„Ÿ,åˆ›é€ æ— é™å¯èƒ½ |
| `image_video`                | å›¾åƒè§†é¢‘   | å›¾ç‰‡æ‰¹é‡å¤„ç†ã€å±å¹•å½•åˆ¶    |
| `media_tools`                | åª’ä½“å·¥å…·   | å¤„ç†å›¾ç‰‡ã€è§†é¢‘ç­‰åª’ä½“æ–‡ä»¶  |
| `system_tools`               | ç³»ç»Ÿå·¥å…·   | æå‡ç³»ç»Ÿæ•ˆèƒ½,ä¼˜åŒ–æ•°å­—ç”Ÿæ´» |
| `study_well`                 | å¥½å¥½å­¦ä¹    | ä¿æŒå¥½å¥‡å¿ƒ,ä¸æ–­æ¢ç´¢æ–°çŸ¥   |
| `brainstorming`              | è„‘æ´å¤§å¼€   | çªç ´æƒ³è±¡,å¯å‘å¥‡æ€å¦™æƒ³     |
| `other`                      | å…¶ä»–       | å…¶ä»–ç±»å‹çš„æ’ä»¶            |

---

## åŠŸèƒ½ç±»å‹è¯¦è§£

æ’ä»¶çš„æ¯ä¸ªåŠŸèƒ½é¡¹ï¼ˆfeatureï¼‰éƒ½å¿…é¡»æŒ‡å®šä¸€ä¸ªç±»å‹ï¼ˆ`type`ï¼‰ï¼Œç±»å‹å†³å®šäº†åŠŸèƒ½çš„æœç´¢åŒ¹é…è¡Œä¸ºã€‚

### 1. text - æ–‡æœ¬æœç´¢

åŒ¹é…ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬å†…å®¹ï¼Œä¼šæœç´¢ `name`ã€`path`ã€`description`ã€`anonymousSearchFields` å­—æ®µã€‚

```json
{
  "path": "text-processor",
  "name": "æ–‡æœ¬å¤„ç†å™¨",
  "type": "text",
  "description": "å¤„ç†æ–‡æœ¬å†…å®¹",
  "anonymousSearchFields": ["text", "å¤„ç†", "ç¼–è¾‘"],
  "minLength": 1, // æœ€å°é•¿åº¦ï¼ˆå¯é€‰ï¼‰
  "maxLength": 1000 // æœ€å¤§é•¿åº¦ï¼ˆå¯é€‰ï¼‰
}
```

**ä½¿ç”¨åœºæ™¯**ï¼šå¤§å¤šæ•°æ’ä»¶åŠŸèƒ½ï¼Œå¦‚æœç´¢ã€æŸ¥è¯¢ã€è½¬æ¢ç­‰ã€‚

---

### 2. regex - æ­£åˆ™åŒ¹é…

ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç”¨æˆ·è¾“å…¥ã€‚

```json
{
  "path": "url-opener",
  "name": "URL æ‰“å¼€å™¨",
  "type": "regex",
  "match": "^https?://", // æ­£åˆ™åŒ¹é…è¡¨è¾¾å¼ï¼ˆå¿…éœ€ï¼‰
  "exclude": "^file://", // æ’é™¤è¡¨è¾¾å¼ï¼ˆå¯é€‰ï¼‰
  "minLength": 10, // æœ€å°é•¿åº¦ï¼ˆå¯é€‰ï¼‰
  "maxLength": 2000 // æœ€å¤§é•¿åº¦ï¼ˆå¯é€‰ï¼‰
}
```

**ä½¿ç”¨åœºæ™¯**ï¼šåŒ¹é…ç‰¹å®šæ ¼å¼çš„å†…å®¹ï¼Œå¦‚ URLã€é‚®ç®±ã€ç”µè¯å·ç ç­‰ã€‚

---

### 3. img - å›¾ç‰‡æœç´¢

åŒ¹é…ç”¨æˆ·ä¸Šä¼ æˆ–ç²˜è´´çš„å›¾ç‰‡ã€‚

```json
{
  "path": "img-processor",
  "name": "å›¾ç‰‡å¤„ç†å™¨",
  "type": "img",
  "description": "å¤„ç†å›¾ç‰‡"
}
```

**è§¦å‘æ¡ä»¶**ï¼š

- ç”¨æˆ·é€šè¿‡æˆªå›¾åŠŸèƒ½è·å–å›¾ç‰‡
- ç”¨æˆ·æ‹–æ‹½å›¾ç‰‡æ–‡ä»¶åˆ°æœç´¢æ¡†
- ç”¨æˆ·ç²˜è´´å›¾ç‰‡

**æ¥æ”¶å‚æ•°**ï¼š

```javascript
{
  type: "img",
  data: "data:image/png;base64,...",  // base64 å›¾ç‰‡æ•°æ®
  originalFile: { /* åŸå§‹æ–‡ä»¶ä¿¡æ¯ */ }
}
```

---

### 4. files - æ–‡ä»¶æœç´¢

åŒ¹é…ç”¨æˆ·æ‹–æ‹½çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ã€‚

```json
{
  "path": "file-counter",
  "name": "æ–‡ä»¶è®¡æ•°å™¨",
  "type": "files",
  "fileType": "file", // æ–‡ä»¶ç±»å‹ï¼šfile | directory
  "extensions": [".jpg", ".png"], // æ–‡ä»¶æ‰©å±•åï¼ˆå¯é€‰ï¼‰
  "match": "^image_", // æ–‡ä»¶åæ­£åˆ™åŒ¹é…ï¼ˆå¯é€‰ï¼‰
  "minLength": 1, // æœ€å°‘æ–‡ä»¶æ•°ï¼ˆå¯é€‰ï¼‰
  "maxLength": 100 // æœ€å¤šæ–‡ä»¶æ•°ï¼ˆå¯é€‰ï¼‰
}
```

**æ¥æ”¶å‚æ•°**ï¼š

```javascript
{
  type: "file",
  data: [
    {
      name: "example.jpg",
      path: "C:\\Users\\...",
      size: 1024,
      type: "file"  // file | directory
    }
  ]
}
```

---

### åŠŸèƒ½é…ç½®é€šç”¨å­—æ®µ

æ‰€æœ‰åŠŸèƒ½ç±»å‹éƒ½æ”¯æŒä»¥ä¸‹å­—æ®µï¼š

| å­—æ®µ                    | ç±»å‹     | å¿…éœ€ | è¯´æ˜                             |
| ----------------------- | -------- | ---- | -------------------------------- |
| `path`                  | string   | âœ…   | åŠŸèƒ½æ ‡è¯†ï¼ˆè‹±æ–‡ï¼Œä¸å¸¦æ’ä»¶IDå‰ç¼€ï¼‰ |
| `name`                  | string   | âœ…   | åŠŸèƒ½åç§°                         |
| `type`                  | string   | âœ…   | åŠŸèƒ½ç±»å‹                         |
| `icon`                  | string   | âŒ   | åŠŸèƒ½å›¾æ ‡                         |
| `description`           | string   | âŒ   | åŠŸèƒ½æè¿°                         |
| `weight`                | number   | âŒ   | æ’åºæƒé‡ï¼ˆ0-1000ï¼Œé»˜è®¤ 0ï¼‰       |
| `category`              | string   | âŒ   | åŠŸèƒ½åˆ†ç±»                         |
| `platform`              | string[] | âŒ   | æ”¯æŒçš„å¹³å°                       |
| `anonymousSearchFields` | string[] | âŒ   | åŒ¿åæœç´¢å­—æ®µ                     |
| `notVisibleSearch`      | boolean  | âŒ   | ä¸åœ¨æœç´¢æ¡†ä¸­ä¸»åŠ¨æ˜¾ç¤º             |
| `showInModes`           | string[] | âŒ   | æ˜¾ç¤ºæ¨¡å¼é™åˆ¶                     |
| `lifecycleType`         | string   | âŒ   | ç”Ÿå‘½å‘¨æœŸç±»å‹                     |
| `singleton`             | boolean  | âŒ   | æ˜¯å¦å•ä¾‹ï¼ˆé»˜è®¤ trueï¼‰            |
| `autoStart`             | boolean  | âŒ   | æ˜¯å¦å¼€æœºå¯åŠ¨                     |
| `recommend`             | boolean  | âŒ   | æ˜¯å¦æ¨è                         |

---

## Preload è„šæœ¬å¼€å‘

### åŸºæœ¬ç»“æ„

```javascript
const { contextBridge } = require("electron");

// ==================== å·¥å…·å‡½æ•° ====================

function myUtilFunction() {
  // ä½ çš„å·¥å…·å‡½æ•°
}

// ==================== æš´éœ²æ’ä»¶ API ====================

contextBridge.exposeInMainWorld("myPluginAPI", {
  // æš´éœ²åˆ°æ¸²æŸ“è¿›ç¨‹çš„ API
  doSomething: () => {
    // ...
  },
});

// ==================== åŠŸèƒ½å¤„ç†å™¨å¯¼å‡º ====================

module.exports = {
  // åŠŸèƒ½æ ‡è¯†å¯¹åº” manifest.json ä¸­çš„ path
  hello: {
    onEnter: async (params, api) => {
      // åŠŸèƒ½é€»è¾‘
    },
  },

  "another-feature": {
    onEnter: async (params, api) => {
      // å¦ä¸€ä¸ªåŠŸèƒ½çš„é€»è¾‘
    },
  },
};

// ==================== åˆå§‹åŒ– ====================

window.addEventListener("DOMContentLoaded", () => {
  console.log("Preload è„šæœ¬å·²åˆå§‹åŒ–");
});
```

### onEnter é’©å­

æ¯ä¸ªåŠŸèƒ½å¤„ç†å™¨éƒ½å¿…é¡»æä¾› `onEnter` é’©å­ï¼Œè¯¥é’©å­åœ¨ç”¨æˆ·è§¦å‘åŠŸèƒ½æ—¶è¢«è°ƒç”¨ã€‚

```javascript
{
  onEnter: async (params, api) => {
    // params: è§¦å‘å‚æ•°
    // api: æ’ä»¶ API
  };
}
```

#### params å‚æ•°è¯´æ˜

æ ¹æ®åŠŸèƒ½ç±»å‹ï¼ˆ`type`ï¼‰çš„ä¸åŒï¼Œ`params` çš„ç»“æ„ä¹Ÿä¸åŒï¼š

##### text ç±»å‹

```javascript
{
  text: "ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬",
  mode: "text"
}
```

##### img ç±»å‹

```javascript
{
  type: "img",
  data: "data:image/png;base64,...",  // base64 å›¾ç‰‡
  originalFile: {
    name: "screenshot.png",
    path: "C:\\Users\\...",
    size: 1024
  }
}
```

##### files ç±»å‹

```javascript
{
  type: "file",
  data: [
    {
      name: "example.jpg",
      path: "C:\\Users\\...",
      size: 1024,
      type: "file"  // file | directory
    }
  ]
}
```

#### api å‚æ•°è¯´æ˜

`api` å¯¹è±¡é¢„ç•™ç”¨äºæœªæ¥æ‰©å±•ï¼Œå½“å‰ç‰ˆæœ¬æš‚æ— å¯ç”¨æ–¹æ³•ã€‚

### ä½¿ç”¨ç¤ºä¾‹

```javascript
module.exports = {
  "text-processor": {
    onEnter: async (params, api) => {
      console.log("æ–‡æœ¬å¤„ç†å™¨è¢«è§¦å‘");

      // è·å–ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬
      const text = params.text;

      // å¤„ç†æ–‡æœ¬
      const result = processText(text);

      // æ˜¾ç¤ºç»“æœï¼ˆé€šè¿‡ UI æˆ–é€šçŸ¥ï¼‰
      showResult(result);
    },
  },

  "file-counter": {
    onEnter: async (params, api) => {
      console.log("æ–‡ä»¶è®¡æ•°å™¨è¢«è§¦å‘");

      // è·å–æ–‡ä»¶åˆ—è¡¨
      const files = params.data;

      // ç»Ÿè®¡æ–‡ä»¶
      const stats = {
        total: files.length,
        totalSize: files.reduce((sum, f) => sum + f.size, 0),
      };

      // æ˜¾ç¤ºç»Ÿè®¡ç»“æœ
      console.log("æ–‡ä»¶ç»Ÿè®¡:", stats);
    },
  },
};
```

### æš´éœ² API åˆ°æ¸²æŸ“è¿›ç¨‹

ä½¿ç”¨ `contextBridge.exposeInMainWorld` æš´éœ² APIï¼š

```javascript
const { contextBridge } = require("electron");

contextBridge.exposeInMainWorld("myPluginAPI", {
  // åŒæ­¥æ–¹æ³•
  getCurrentTime: () => {
    return new Date().toLocaleString();
  },

  // å¼‚æ­¥æ–¹æ³•
  fetchData: async (url) => {
    const response = await fetch(url);
    return response.json();
  },

  // å·¥å…·æ–¹æ³•
  formatText: (text) => {
    return text.toUpperCase();
  },
});
```

åœ¨ HTML ä¸­ä½¿ç”¨ï¼š

```javascript
// è°ƒç”¨æš´éœ²çš„ API
const time = window.myPluginAPI.getCurrentTime();
console.log("å½“å‰æ—¶é—´:", time);

// å¼‚æ­¥è°ƒç”¨
const data = await window.myPluginAPI.fetchData("https://api.example.com/data");
console.log("æ•°æ®:", data);
```

---

## UI é¡µé¢å¼€å‘

### åŸºæœ¬æ¨¡æ¿

```html
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æˆ‘çš„æ’ä»¶</title>
    <style>
      /* ä½ çš„æ ·å¼ */
    </style>
  </head>
  <body>
    <div id="app">
      <!-- ä½ çš„å†…å®¹ -->
    </div>

    <script>
      // ä½ çš„è„šæœ¬
    </script>
  </body>
</html>
```

### ä½¿ç”¨ Naimo API

æ’ä»¶çª—å£ä¸­å¯ä»¥ä½¿ç”¨ `window.naimo` å…¨å±€å¯¹è±¡è®¿é—® Naimo æä¾›çš„ APIã€‚

#### æ—¥å¿— API

```javascript
// è®°å½•ä¸åŒçº§åˆ«çš„æ—¥å¿—
window.naimo.log.error("é”™è¯¯ä¿¡æ¯", errorObject);
window.naimo.log.warn("è­¦å‘Šä¿¡æ¯");
window.naimo.log.info("æ™®é€šä¿¡æ¯");
window.naimo.log.debug("è°ƒè¯•ä¿¡æ¯");

// æŠ›å‡ºé”™è¯¯å¹¶æ˜¾ç¤ºé”™è¯¯å¯¹è¯æ¡†
window.naimo.log.throw_error(new Error("å‘ç”Ÿé”™è¯¯"), {
  title: "é”™è¯¯æ ‡é¢˜",
});
```

### æ ·å¼å»ºè®®

æ¨èä½¿ç”¨ç°ä»£åŒ–çš„ CSS æ ·å¼ï¼š

```css
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family:
    -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue",
    Arial, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 20px;
  min-height: 100vh;
}

.container {
  background: white;
  border-radius: 16px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  padding: 40px;
  max-width: 800px;
  margin: 0 auto;
}

button {
  padding: 12px 24px;
  border: none;
  border-radius: 8px;
  background: #667eea;
  color: white;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

button:hover {
  background: #5568d3;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}
```

---

## API å‚è€ƒ

### æ’ä»¶ APIï¼ˆapi å‚æ•°ï¼‰

åœ¨ `onEnter` é’©å­ä¸­æä¾›çš„ `api` å‚æ•°å½“å‰ç‰ˆæœ¬æš‚æ— å¯ç”¨æ–¹æ³•ï¼Œé¢„ç•™ç”¨äºæœªæ¥æ‰©å±•ã€‚

### Naimo APIï¼ˆwindow.naimoï¼‰

åœ¨ HTML é¡µé¢ä¸­å¯ä»¥é€šè¿‡ `window.naimo` è®¿é—®ä»¥ä¸‹ APIï¼š

#### æ—¥å¿— API

| æ–¹æ³•                                 | è¯´æ˜                     |
| ------------------------------------ | ------------------------ |
| `log.error(message, ...args)`        | è®°å½•é”™è¯¯æ—¥å¿—             |
| `log.warn(message, ...args)`         | è®°å½•è­¦å‘Šæ—¥å¿—             |
| `log.info(message, ...args)`         | è®°å½•ä¿¡æ¯æ—¥å¿—             |
| `log.debug(message, ...args)`        | è®°å½•è°ƒè¯•æ—¥å¿—             |
| `log.throw_error(error, { title? })` | æŠ›å‡ºé”™è¯¯å¹¶æ˜¾ç¤ºé”™è¯¯å¯¹è¯æ¡† |

---

## ç”Ÿå‘½å‘¨æœŸ

### ç”Ÿå‘½å‘¨æœŸç±»å‹

æ’ä»¶åŠŸèƒ½æ”¯æŒä¸‰ç§ç”Ÿå‘½å‘¨æœŸç±»å‹ï¼ˆ`lifecycleType`ï¼‰ï¼š

#### 1. reuseï¼ˆå¤ç”¨çª—å£ï¼Œé»˜è®¤ï¼‰

å¤ç”¨ç°æœ‰çª—å£ã€‚å¦‚æœçª—å£å·²å­˜åœ¨ï¼Œåˆ™æ¿€æ´»è¯¥çª—å£ï¼›å¦åˆ™åˆ›å»ºæ–°çª—å£ã€‚

```json
{
  "lifecycleType": "reuse",
  "singleton": true
}
```

**é€‚ç”¨åœºæ™¯**ï¼š

- å•ä¾‹åŠŸèƒ½ï¼ˆå¦‚è®¾ç½®é¡µé¢ï¼‰
- éœ€è¦ä¿æŒçŠ¶æ€çš„åŠŸèƒ½

#### 2. newï¼ˆæ¯æ¬¡åˆ›å»ºæ–°çª—å£ï¼‰

æ¯æ¬¡è§¦å‘éƒ½åˆ›å»ºæ–°çª—å£ã€‚

```json
{
  "lifecycleType": "new",
  "singleton": false
}
```

**é€‚ç”¨åœºæ™¯**ï¼š

- éœ€è¦åŒæ—¶æ‰“å¼€å¤šä¸ªå®ä¾‹çš„åŠŸèƒ½
- æ¯æ¬¡å¤„ç†ç‹¬ç«‹çš„ä»»åŠ¡

#### 3. singletonï¼ˆå•ä¾‹æ¨¡å¼ï¼‰

å…¨å±€å•ä¾‹ï¼ŒåŒä¸€æ—¶é—´åªèƒ½å­˜åœ¨ä¸€ä¸ªçª—å£å®ä¾‹ã€‚

```json
{
  "lifecycleType": "singleton",
  "singleton": true
}
```

**é€‚ç”¨åœºæ™¯**ï¼š

- ç³»ç»Ÿçº§åŠŸèƒ½
- å…¨å±€å”¯ä¸€çš„åŠŸèƒ½

### singleton å­—æ®µ

`singleton` å­—æ®µå†³å®šæ˜¯å¦å¯ç”¨å•ä¾‹æ¨¡å¼ï¼š

- `true`ï¼ˆé»˜è®¤ï¼‰ï¼šåŒæ—¶åªèƒ½æ‰“å¼€ä¸€ä¸ªçª—å£
- `false`ï¼šå¯ä»¥åŒæ—¶æ‰“å¼€å¤šä¸ªçª—å£

---

## è°ƒè¯•æŠ€å·§

### 1. æ§åˆ¶å°è¾“å‡º

åœ¨ `preload.js` å’Œ HTML ä¸­ä½¿ç”¨ `console.log` æˆ– `window.naimo.log` è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼š

```javascript
console.log("åŠŸèƒ½è¢«è§¦å‘ï¼Œå‚æ•°:", params);
window.naimo.log.info("åŠŸèƒ½è¢«è§¦å‘", params);
```

### 2. æ‰“å¼€å¼€å‘è€…å·¥å…·

åœ¨æ’ä»¶çª—å£ä¸­æŒ‰ `F12` æˆ– `Ctrl+Shift+I` æ‰“å¼€å¼€å‘è€…å·¥å…·ã€‚

### 3. æŸ¥çœ‹ç½‘ç»œè¯·æ±‚

åœ¨å¼€å‘è€…å·¥å…·çš„ Network æ ‡ç­¾ä¸­æŸ¥çœ‹ç½‘ç»œè¯·æ±‚ã€‚

### 4. æ–­ç‚¹è°ƒè¯•

åœ¨å¼€å‘è€…å·¥å…·çš„ Sources æ ‡ç­¾ä¸­è®¾ç½®æ–­ç‚¹ã€‚

### 5. é”™è¯¯å¤„ç†

ä½¿ç”¨ try-catch æ•è·é”™è¯¯ï¼š

```javascript
onEnter: async (params, api) => {
  try {
    // ä½ çš„ä»£ç 
  } catch (error) {
    console.error("é”™è¯¯:", error);
    // æ˜¾ç¤ºé”™è¯¯é€šçŸ¥
    new Notification("é”™è¯¯", {
      body: error.message,
    });
  }
};
```

---

## æœ€ä½³å®è·µ

### 1. å‘½åè§„èŒƒ

- **æ’ä»¶ ID**ï¼šä½¿ç”¨å°å†™å­—æ¯ã€æ•°å­—ã€çŸ­æ¨ªçº¿ï¼Œå¦‚ `my-plugin`
- **åŠŸèƒ½ path**ï¼šä½¿ç”¨å°å†™å­—æ¯ã€æ•°å­—ã€çŸ­æ¨ªçº¿ï¼Œå¦‚ `hello-world`
- **è®¾ç½®åç§°**ï¼šä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œå¦‚ `apiKey`ã€`enableNotification`

### 2. ç‰ˆæœ¬ç®¡ç†

ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ï¼š

- `MAJOR.MINOR.PATCH`
- å¦‚ï¼š`1.0.0`ã€`1.2.3`ã€`2.0.0-beta.1`

### 3. é”™è¯¯å¤„ç†

æ€»æ˜¯ä½¿ç”¨ try-catch å¤„ç†å¯èƒ½å‡ºé”™çš„ä»£ç ï¼š

```javascript
onEnter: async (params, api) => {
  try {
    // å¯èƒ½å‡ºé”™çš„ä»£ç 
  } catch (error) {
    console.error("é”™è¯¯:", error);
    // æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
  }
};
```

### 4. æ€§èƒ½ä¼˜åŒ–

- é¿å…åœ¨ `onEnter` ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ
- ä½¿ç”¨å¼‚æ­¥æ“ä½œï¼ˆ`async/await`ï¼‰
- ç¼“å­˜è®¡ç®—ç»“æœ

### 5. ç”¨æˆ·ä½“éªŒ

- æä¾›æ¸…æ™°çš„åŠŸèƒ½æè¿°
- ä½¿ç”¨å‹å¥½çš„é”™è¯¯æç¤º
- æ·»åŠ åŠ è½½çŠ¶æ€æŒ‡ç¤º
- æ”¯æŒå¿«æ·é”®ï¼ˆå¦‚ `Ctrl+W` å…³é—­çª—å£ï¼‰

### 6. å®‰å…¨æ€§

- éªŒè¯ç”¨æˆ·è¾“å…¥
- é¿å…æ‰§è¡Œä¸å—ä¿¡ä»»çš„ä»£ç 
- å°å¿ƒå¤„ç†æ–‡ä»¶è·¯å¾„

---

## å¸¸è§é—®é¢˜

### Q1: æ’ä»¶æ²¡æœ‰å‡ºç°åœ¨æœç´¢ç»“æœä¸­ï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1. `manifest.json` æ ¼å¼æ˜¯å¦æ­£ç¡®
2. `enabled` å­—æ®µæ˜¯å¦ä¸º `true`
3. `feature` æ•°ç»„æ˜¯å¦è‡³å°‘åŒ…å«ä¸€ä¸ªåŠŸèƒ½
4. æ’ä»¶æ–‡ä»¶å¤¹æ˜¯å¦åœ¨æ­£ç¡®çš„ `plugins` ç›®å½•ä¸­
5. é‡å¯åº”ç”¨

### Q2: åŠŸèƒ½è§¦å‘äº†ï¼Œä½†çª—å£æ²¡æœ‰æ‰“å¼€ï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1. `manifest.json` ä¸­æ˜¯å¦é…ç½®äº† `main` å­—æ®µ
2. `main` æŒ‡å‘çš„ HTML æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. HTML æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼ˆç›¸å¯¹äºæ’ä»¶æ ¹ç›®å½•ï¼‰

### Q3: preload.js ä¸­çš„ä»£ç æ²¡æœ‰æ‰§è¡Œï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1. `manifest.json` ä¸­ `preload` å­—æ®µæ˜¯å¦æ­£ç¡®
2. `preload.js` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼ˆæŸ¥çœ‹æ§åˆ¶å°ï¼‰
4. `module.exports` æ ¼å¼æ˜¯å¦æ­£ç¡®

### Q4: å¦‚ä½•åœ¨åŠŸèƒ½ä¹‹é—´å…±äº«æ•°æ®ï¼Ÿ

**A**: æœ‰å‡ ç§æ–¹å¼ï¼š

1. ä½¿ç”¨ `localStorage`ï¼ˆåœ¨ HTML ä¸­ï¼‰
2. ä½¿ç”¨å…¨å±€å˜é‡ï¼ˆåœ¨ preload.js ä¸­ï¼‰
3. é€šè¿‡è‡ªå®šä¹‰çš„ contextBridge API ä¼ é€’æ•°æ®

### Q5: å¦‚ä½•å¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼Ÿ

**A**: ä½¿ç”¨ `files` ç±»å‹åŠŸèƒ½ï¼Œé€šè¿‡ `params.data` è·å–æ–‡ä»¶åˆ—è¡¨ï¼š

```javascript
'file-handler': {
  onEnter: async (params, api) => {
    const files = params.data;
    files.forEach(file => {
      console.log('æ–‡ä»¶:', file.name, file.path);
    });
  }
}
```

### Q6: å¦‚ä½•å‘é€ç½‘ç»œè¯·æ±‚ï¼Ÿ

**A**: åœ¨ preload.js æˆ– HTML ä¸­ä½¿ç”¨ `fetch` APIï¼š

```javascript
const response = await fetch("https://api.example.com/data");
const data = await response.json();
```

### Q7: å¦‚ä½•ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Ÿ

**A**: æœ‰å‡ ç§æ–¹å¼ï¼š

1. åœ¨ HTML ä¸­é€šè¿‡ `<script>` æ ‡ç­¾å¼•å…¥ CDN
2. å°†åº“æ–‡ä»¶æ”¾åˆ°æ’ä»¶ç›®å½•ä¸­ï¼Œç„¶åå¼•å…¥
3. åœ¨ preload.js ä¸­ `require` Node.js æ¨¡å—

### Q8: æ’ä»¶è®¾ç½®åœ¨å“ªé‡Œé…ç½®ï¼Ÿ

**A**: æ’ä»¶è®¾ç½®åŠŸèƒ½è§„åˆ’ä¸­ï¼Œå¯åœ¨ `manifest.json` çš„ `settings` æ•°ç»„ä¸­å£°æ˜è®¾ç½®é¡¹ï¼Œä½†å½“å‰ç‰ˆæœ¬è¯»å†™åŠŸèƒ½å°šæœªå®ç°ã€‚

### Q9: å¦‚ä½•è°ƒè¯•æ’ä»¶ï¼Ÿ

**A**:

1. åœ¨æ’ä»¶çª—å£ä¸­æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
2. ä½¿ç”¨ `console.log` è¾“å‡ºè°ƒè¯•ä¿¡æ¯
3. åœ¨ Sources æ ‡ç­¾ä¸­è®¾ç½®æ–­ç‚¹

### Q10: æ’ä»¶å¯ä»¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿå—ï¼Ÿ

**A**: å½“å‰ç‰ˆæœ¬æ’ä»¶çª—å£ä¸­æœªæš´éœ²æ–‡ä»¶ç³»ç»Ÿ APIã€‚å¦‚éœ€è®¿é—®æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥åœ¨ preload.js ä¸­ä½¿ç”¨ Node.js çš„ `fs` æ¨¡å—ï¼Œç„¶åé€šè¿‡ `contextBridge` æš´éœ²è‡ªå®šä¹‰ API åˆ°æ¸²æŸ“è¿›ç¨‹ã€‚

---

## é™„å½•

### ç¤ºä¾‹æ’ä»¶

å®Œæ•´çš„ç¤ºä¾‹æ’ä»¶è¯·å‚è€ƒï¼š

- `plugins-test/example-plugin/` - å®Œæ•´ç¤ºä¾‹
- `plugins/translate-plugin/` - ç¿»è¯‘æ’ä»¶ç¤ºä¾‹
- `plugins/ocr-trans-plugin/` - OCR ç¿»è¯‘æ’ä»¶ç¤ºä¾‹

### ç›¸å…³æ–‡æ¡£

- [JSON Schema æ–‡ä»¶](./manifest-schema.json)
- [å¿«é€Ÿå¼€å§‹æŒ‡å—](./quick-start.md)
- [API å‚è€ƒæ–‡æ¡£](./api-reference.md)

### å˜æ›´æ—¥å¿—

#### v2.0 (2025-10-07)

- é‡‡ç”¨æ‡’åŠ è½½æ¶æ„
- é…ç½®æ–‡ä»¶çº¯ JSON åŒ–
- æ”¯æŒå¤šåŠŸèƒ½æ’ä»¶
- ä¼˜åŒ–æ€§èƒ½å’ŒåŠ è½½é€Ÿåº¦

---

## è®¸å¯è¯

æœ¬æ–‡æ¡£é‡‡ç”¨ [MIT License](https://opensource.org/licenses/MIT)ã€‚

## è”ç³»æˆ‘ä»¬

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»ï¼š

- GitHub Issues: https://github.com/naimo-tools/naimo-tools/issues
- Email: support@naimo.tools

---

**ç¥ä½ å¼€å‘æ„‰å¿«ï¼** ğŸ‰
