<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Naimo API æµ‹è¯•é¢æ¿</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        "Helvetica Neue", Arial, "Microsoft YaHei", sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px;
      min-height: 100vh;
    }

    body {
      height: 100vh;
      overflow: hidden;
    }

    .container {
      background: white;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      padding: 30px;
      max-width: 1200px;
      margin: 0 auto;
      height: 100%;
      overflow: auto;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .api-section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 12px;
      border-left: 4px solid #667eea;
    }

    .api-section h2 {
      color: #333;
      margin-bottom: 15px;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .api-section h2 .icon {
      font-size: 24px;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      background: #667eea;
      color: white;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }

    button:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    button.secondary {
      background: #6c757d;
    }

    button.secondary:hover {
      background: #5a6268;
    }

    button.danger {
      background: #dc3545;
    }

    button.danger:hover {
      background: #c82333;
    }

    .input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      align-items: center;
    }

    input[type="text"],
    input[type="number"],
    textarea {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 13px;
      font-family: inherit;
    }

    textarea {
      min-height: 60px;
      resize: vertical;
    }

    .output {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin-top: 10px;
      font-family: "Courier New", monospace;
      font-size: 12px;
      max-height: 200px;
      overflow-y: auto;
      white-space: pre-wrap;
      word-break: break-all;
    }

    .output.success {
      border-color: #28a745;
      background: #f0fff4;
    }

    .output.error {
      border-color: #dc3545;
      background: #fff5f5;
      color: #dc3545;
    }

    .divider {
      height: 1px;
      background: #ddd;
      margin: 20px 0;
    }

    .info-box {
      background: #e7f3ff;
      border-left: 4px solid #2196f3;
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 15px;
      font-size: 13px;
      color: #0066cc;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>ğŸ§ª Naimo API æµ‹è¯•é¢æ¿</h1>
    <p class="subtitle">æµ‹è¯•æ‰€æœ‰å¯ç”¨çš„ Naimo API åŠŸèƒ½</p>

    <!-- ========== æ—¥å¿— API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ“</span>æ—¥å¿—ç³»ç»Ÿ (log)</h2>
      <div class="button-group">
        <button onclick="testLogError()">log.error</button>
        <button onclick="testLogWarn()">log.warn</button>
        <button onclick="testLogInfo()">log.info</button>
        <button onclick="testLogDebug()">log.debug</button>
        <button onclick="testLogThrowError()">log.throw_error</button>
      </div>
      <div id="logOutput" class="output"></div>
    </div>

    <!-- ========== çª—å£ç®¡ç† API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸªŸ</span>çª—å£ç®¡ç† (window)</h2>
      <div class="button-group">
        <button onclick="testWindowHide()">hide</button>
        <button onclick="testWindowShow()">show</button>
        <button onclick="testWindowMinimize()">minimize</button>
        <button onclick="testWindowMaximize()">maximize</button>
        <button class="danger" onclick="testWindowClose()">close</button>
      </div>
      <div class="input-group">
        <input type="number" id="windowHeight" placeholder="é«˜åº¦ (px)" value="600" />
        <button onclick="testWindowSetHeight()">è®¾ç½®é«˜åº¦</button>
      </div>
      <div class="input-group">
        <input type="number" id="windowWidth" placeholder="å®½åº¦ (px)" value="800" />
        <input type="number" id="windowHeightForSize" placeholder="é«˜åº¦ (px)" value="600" />
        <button onclick="testWindowSetSize()">è®¾ç½®å°ºå¯¸</button>
      </div>
      <div id="windowOutput" class="output"></div>
    </div>

    <!-- ========== æ•°æ®åº“ API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ’¾</span>æ–‡æ¡£æ•°æ®åº“ (db)</h2>
      <div class="info-box">
        ğŸ’¡ æç¤ºï¼šæ¯æ¬¡ put ä½¿ç”¨ä¸åŒçš„ _id ä¼šæ·»åŠ æ–°æ–‡æ¡£ï¼Œç›¸åŒ _id ä¼šæ›´æ–°ç°æœ‰æ–‡æ¡£
      </div>
      <div class="input-group">
        <input type="text" id="dbDocId" placeholder="æ–‡æ¡£ ID" value="test_doc_1" />
        <textarea id="dbDocContent" placeholder="æ–‡æ¡£å†…å®¹ (JSON)">{"name": "æµ‹è¯•æ–‡æ¡£", "value": 123}</textarea>
      </div>
      <div class="button-group">
        <button onclick="testDbPut()">put (ä¿å­˜)</button>
        <button onclick="testDbPutRandom()" style="background: #28a745;">put (éšæœºID)</button>
        <button onclick="testDbGet()">get (è¯»å–)</button>
        <button onclick="testDbRemove()">remove (åˆ é™¤)</button>
        <button onclick="testDbAllDocs()">allDocs (å…¨éƒ¨)</button>
        <button class="danger" onclick="testDbClearAll()">æ¸…ç©ºæ‰€æœ‰</button>
      </div>
      <div id="dbOutput" class="output"></div>
    </div>

    <!-- ========== é”®å€¼å­˜å‚¨ API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ—„ï¸</span>é”®å€¼å­˜å‚¨ (storage)</h2>
      <div class="input-group">
        <input type="text" id="storageKey" placeholder="é”®å" value="test_key" />
        <input type="text" id="storageValue" placeholder="å€¼" value="æµ‹è¯•æ•°æ®" />
      </div>
      <div class="button-group">
        <button onclick="testStorageSet()">setItem (ä¿å­˜)</button>
        <button onclick="testStorageGet()">getItem (è¯»å–)</button>
        <button onclick="testStorageGetAll()">getAllItems (å…¨éƒ¨)</button>
        <button onclick="testStorageRemove()">removeItem (åˆ é™¤)</button>
        <button class="danger" onclick="testStorageClear()">clear (æ¸…ç©º)</button>
      </div>
      <div id="storageOutput" class="output"></div>
    </div>

    <!-- ========== å‰ªè´´æ¿ API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ“‹</span>å‰ªè´´æ¿ (clipboard)</h2>
      <div class="input-group">
        <input type="text" id="clipboardText" placeholder="è¦å¤åˆ¶çš„æ–‡æœ¬" value="Hello Naimo!" />
        <button onclick="testClipboardWriteText()">å†™å…¥æ–‡æœ¬</button>
        <button onclick="testClipboardReadText()">è¯»å–æ–‡æœ¬</button>
      </div>
      <div class="button-group">
        <button onclick="testClipboardHasText()">hasText (æ£€æŸ¥æ–‡æœ¬)</button>
        <button onclick="testClipboardHasImage()">hasImage (æ£€æŸ¥å›¾ç‰‡)</button>
        <button onclick="testClipboardReadImage()">readImage (è¯»å–å›¾ç‰‡)</button>
        <button class="danger" onclick="testClipboardClear()">clear (æ¸…ç©º)</button>
      </div>
      <div id="clipboardOutput" class="output"></div>
    </div>

    <!-- ========== Shell æ“ä½œ API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸš</span>Shell æ“ä½œ (shell)</h2>
      <div class="input-group">
        <input type="text" id="shellPath" placeholder="æ–‡ä»¶è·¯å¾„" value="C:\\" />
      </div>
      <div class="button-group">
        <button onclick="testShellOpenPath()">openPath (æ‰“å¼€è·¯å¾„)</button>
        <button onclick="testShellShowInFolder()">showInFolder (åœ¨æ–‡ä»¶å¤¹ä¸­æ˜¾ç¤º)</button>
        <button onclick="testShellOpenUrl()">openUrl (æ‰“å¼€ç½‘å€)</button>
        <button onclick="testShellBeep()">beep (æ’­æ”¾æç¤ºéŸ³)</button>
      </div>
      <div id="shellOutput" class="output"></div>
    </div>

    <!-- ========== ç³»ç»Ÿä¿¡æ¯ API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ’»</span>ç³»ç»Ÿä¿¡æ¯ (system)</h2>
      <div class="input-group">
        <input type="text" id="notifyMessage" placeholder="é€šçŸ¥æ¶ˆæ¯" value="æµ‹è¯•é€šçŸ¥" />
        <input type="text" id="notifyTitle" placeholder="é€šçŸ¥æ ‡é¢˜" value="Naimo" />
        <button onclick="testSystemNotify()">å‘é€é€šçŸ¥</button>
      </div>
      <div class="button-group">
        <button onclick="testSystemGetVersion()">getVersion (ç‰ˆæœ¬)</button>
        <button onclick="testSystemGetName()">getName (åº”ç”¨å)</button>
        <button onclick="testSystemGetDeviceId()">getDeviceId (è®¾å¤‡ID)</button>
        <button onclick="testSystemIsMac()">isMac</button>
        <button onclick="testSystemIsWindows()">isWindows</button>
        <button onclick="testSystemIsLinux()">isLinux</button>
        <button onclick="testSystemGetPath()">getPath (ç³»ç»Ÿè·¯å¾„)</button>
      </div>
      <div id="systemOutput" class="output"></div>
    </div>

    <!-- ========== å±å¹•ä¸æ˜¾ç¤ºå™¨ API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ–¥ï¸</span>å±å¹•ä¸æ˜¾ç¤ºå™¨ (screen)</h2>
      <div class="button-group">
        <button onclick="testScreenGetSources()">getSources (è·å–æº)</button>
        <button onclick="testScreenGetCursorPosition()">getCursorPosition (å…‰æ ‡ä½ç½®)</button>
        <button onclick="testScreenGetPrimaryDisplay()">getPrimaryDisplay (ä¸»æ˜¾ç¤ºå™¨)</button>
        <button onclick="testScreenGetAllDisplays()">getAllDisplays (æ‰€æœ‰æ˜¾ç¤ºå™¨)</button>
        <button onclick="testScreenCapture()">capture (æˆªå›¾)</button>
      </div>
      <div id="screenOutput" class="output"></div>
    </div>

    <!-- ========== å¯¹è¯æ¡† API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ’¬</span>å¯¹è¯æ¡† (dialog)</h2>
      <div class="button-group">
        <button onclick="testDialogShowOpen()">showOpen (æ‰“å¼€æ–‡ä»¶)</button>
        <button onclick="testDialogShowSave()">showSave (ä¿å­˜æ–‡ä»¶)</button>
        <button onclick="testDialogShowMessage()">showMessage (æ¶ˆæ¯æ¡†)</button>
        <button onclick="testDialogShowError()">showError (é”™è¯¯æ¡†)</button>
      </div>
      <div id="dialogOutput" class="output"></div>
    </div>

    <!-- ========== è¾“å…¥æ¨¡æ‹Ÿ API ========== -->
    <div class="api-section">
      <h2><span class="icon">âŒ¨ï¸</span>è¾“å…¥æ¨¡æ‹Ÿ (input)</h2>
      <div class="info-box">
        âš ï¸ æ³¨æ„ï¼šè¾“å…¥æ¨¡æ‹ŸåŠŸèƒ½éœ€è¦çª—å£å¤±å»ç„¦ç‚¹åæ‰èƒ½ç”Ÿæ•ˆ
      </div>
      <div class="input-group">
        <input type="text" id="inputText" placeholder="è¦ç²˜è´´çš„æ–‡æœ¬" value="Hello from Naimo!" />
        <button onclick="testInputPasteText()">pasteText (ç²˜è´´æ–‡æœ¬)</button>
      </div>
      <div class="input-group">
        <input type="text" id="inputKey" placeholder="æŒ‰é”® (å¦‚: a, Enter)" value="a" />
        <button onclick="testInputSimulateKeyPress()">simulateKeyPress (æ¨¡æ‹ŸæŒ‰é”®)</button>
      </div>
      <div id="inputOutput" class="output"></div>
    </div>
  </div>

  <script>
    // ==================== å·¥å…·å‡½æ•° ====================
    function displayResult(elementId, result, isError = false) {
      const output = document.getElementById(elementId);
      output.className = `output ${isError ? "error" : "success"}`;
      output.textContent =
        typeof result === "object"
          ? JSON.stringify(result, null, 2)
          : String(result);
    }

    function displayError(elementId, error) {
      displayResult(elementId, `é”™è¯¯: ${error.message || error}`, true);
    }

    // ==================== æ—¥å¿— API æµ‹è¯• ====================
    function testLogError() {
      window.naimo.log.error("è¿™æ˜¯ä¸€æ¡é”™è¯¯æ—¥å¿—", { detail: "é”™è¯¯è¯¦æƒ…" });
      displayResult("logOutput", "å·²è®°å½•é”™è¯¯æ—¥å¿—ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°");
    }

    function testLogWarn() {
      window.naimo.log.warn("è¿™æ˜¯ä¸€æ¡è­¦å‘Šæ—¥å¿—");
      displayResult("logOutput", "å·²è®°å½•è­¦å‘Šæ—¥å¿—ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°");
    }

    function testLogInfo() {
      window.naimo.log.info("è¿™æ˜¯ä¸€æ¡ä¿¡æ¯æ—¥å¿—");
      displayResult("logOutput", "å·²è®°å½•ä¿¡æ¯æ—¥å¿—ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°");
    }

    function testLogDebug() {
      window.naimo.log.debug("è¿™æ˜¯ä¸€æ¡è°ƒè¯•æ—¥å¿—");
      displayResult("logOutput", "å·²è®°å½•è°ƒè¯•æ—¥å¿—ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°");
    }

    function testLogThrowError() {
      try {
        window.naimo.log.throw_error(new Error("æµ‹è¯•é”™è¯¯"), {
          title: "æµ‹è¯•é”™è¯¯å¯¹è¯æ¡†",
        });
        displayResult("logOutput", "å·²è§¦å‘é”™è¯¯å¯¹è¯æ¡†");
      } catch (error) {
        displayError("logOutput", error);
      }
    }

    // ==================== çª—å£ç®¡ç† API æµ‹è¯• ====================
    function testWindowHide() {
      window.naimo.window.hide();
      displayResult("windowOutput", "çª—å£å·²éšè—ï¼ˆ3ç§’åè‡ªåŠ¨æ˜¾ç¤ºï¼‰");
      setTimeout(() => window.naimo.window.show(), 3000);
    }

    function testWindowShow() {
      window.naimo.window.show();
      displayResult("windowOutput", "çª—å£å·²æ˜¾ç¤º");
    }

    function testWindowMinimize() {
      window.naimo.window.minimize();
      displayResult("windowOutput", "çª—å£å·²æœ€å°åŒ–");
    }

    function testWindowMaximize() {
      window.naimo.window.maximize();
      displayResult("windowOutput", "çª—å£å·²æœ€å¤§åŒ–/è¿˜åŸ");
    }

    function testWindowClose() {
      if (confirm("ç¡®å®šè¦å…³é—­çª—å£å—ï¼Ÿ")) {
        window.naimo.window.close();
      }
    }

    function testWindowSetHeight() {
      const height = parseInt(document.getElementById("windowHeight").value);
      window.naimo.window.setHeight(height);
      displayResult("windowOutput", `çª—å£é«˜åº¦å·²è®¾ç½®ä¸º ${height}px`);
    }

    function testWindowSetSize() {
      const width = parseInt(document.getElementById("windowWidth").value);
      const height = parseInt(
        document.getElementById("windowHeightForSize").value
      );
      window.naimo.window.setSize(width, height);
      displayResult(
        "windowOutput",
        `çª—å£å°ºå¯¸å·²è®¾ç½®ä¸º ${width}x${height}px`
      );
    }

    // ==================== æ•°æ®åº“ API æµ‹è¯• ====================
    async function testDbPut() {
      try {
        const id = document.getElementById("dbDocId").value;
        const content = JSON.parse(
          document.getElementById("dbDocContent").value
        );
        const doc = { _id: id, ...content };
        const result = await window.naimo.db.put(doc);
        displayResult("dbOutput", result);
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    async function testDbPutRandom() {
      try {
        const content = JSON.parse(
          document.getElementById("dbDocContent").value
        );
        // ç”Ÿæˆéšæœº ID
        const randomId = `test_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        const doc = { _id: randomId, ...content };
        const result = await window.naimo.db.put(doc);
        displayResult("dbOutput", `å·²æ·»åŠ æ–°æ–‡æ¡£: ${randomId}\n${JSON.stringify(result, null, 2)}`);
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    async function testDbClearAll() {
      try {
        if (confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æµ‹è¯•æ•°æ®å—ï¼Ÿ")) {
          const docs = await window.naimo.db.allDocs("test_");
          for (const doc of docs) {
            await window.naimo.db.remove(doc._id);
          }
          displayResult("dbOutput", `å·²æ¸…ç©º ${docs.length} æ¡æ•°æ®`);
        }
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    async function testDbGet() {
      try {
        const id = document.getElementById("dbDocId").value;
        const result = await window.naimo.db.get(id);
        displayResult("dbOutput", result);
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    async function testDbRemove() {
      try {
        const id = document.getElementById("dbDocId").value;
        const result = await window.naimo.db.remove(id);
        displayResult("dbOutput", result);
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    async function testDbAllDocs() {
      try {
        const result = await window.naimo.db.allDocs("test_");
        displayResult("dbOutput", result);
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    // ==================== é”®å€¼å­˜å‚¨ API æµ‹è¯• ====================
    async function testStorageSet() {
      try {
        const key = document.getElementById("storageKey").value;
        const value = document.getElementById("storageValue").value;
        await window.naimo.storage.setItem(key, value);
        displayResult("storageOutput", `å·²ä¿å­˜: ${key} = ${value}`);
      } catch (error) {
        displayError("storageOutput", error);
      }
    }

    async function testStorageGet() {
      try {
        const key = document.getElementById("storageKey").value;
        const result = await window.naimo.storage.getItem(key);
        displayResult("storageOutput", result || "æœªæ‰¾åˆ°è¯¥é”®");
      } catch (error) {
        displayError("storageOutput", error);
      }
    }

    async function testStorageGetAll() {
      try {
        const result = await window.naimo.storage.getAllItems();
        displayResult("storageOutput", result);
      } catch (error) {
        displayError("storageOutput", error);
      }
    }

    async function testStorageRemove() {
      try {
        const key = document.getElementById("storageKey").value;
        await window.naimo.storage.removeItem(key);
        displayResult("storageOutput", `å·²åˆ é™¤: ${key}`);
      } catch (error) {
        displayError("storageOutput", error);
      }
    }

    async function testStorageClear() {
      try {
        if (confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å­˜å‚¨å—ï¼Ÿ")) {
          await window.naimo.storage.clear();
          displayResult("storageOutput", "å·²æ¸…ç©ºæ‰€æœ‰å­˜å‚¨");
        }
      } catch (error) {
        displayError("storageOutput", error);
      }
    }

    // ==================== å‰ªè´´æ¿ API æµ‹è¯• ====================
    async function testClipboardWriteText() {
      try {
        const text = document.getElementById("clipboardText").value;
        await window.naimo.clipboard.writeText(text);
        displayResult("clipboardOutput", `å·²å†™å…¥å‰ªè´´æ¿: ${text}`);
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    async function testClipboardReadText() {
      try {
        const result = await window.naimo.clipboard.readText();
        displayResult("clipboardOutput", result || "å‰ªè´´æ¿ä¸ºç©º");
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    async function testClipboardHasText() {
      try {
        const result = await window.naimo.clipboard.hasText();
        displayResult(
          "clipboardOutput",
          `å‰ªè´´æ¿${result ? "æœ‰" : "æ²¡æœ‰"}æ–‡æœ¬`
        );
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    async function testClipboardHasImage() {
      try {
        const result = await window.naimo.clipboard.hasImage();
        displayResult(
          "clipboardOutput",
          `å‰ªè´´æ¿${result ? "æœ‰" : "æ²¡æœ‰"}å›¾ç‰‡`
        );
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    async function testClipboardReadImage() {
      try {
        const result = await window.naimo.clipboard.readImage();
        if (result) {
          displayResult(
            "clipboardOutput",
            `å·²è¯»å–å›¾ç‰‡ (${result.substring(0, 50)}...)`
          );
        } else {
          displayResult("clipboardOutput", "å‰ªè´´æ¿ä¸­æ²¡æœ‰å›¾ç‰‡");
        }
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    async function testClipboardClear() {
      try {
        await window.naimo.clipboard.clear();
        displayResult("clipboardOutput", "å·²æ¸…ç©ºå‰ªè´´æ¿");
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    // ==================== Shell æ“ä½œ API æµ‹è¯• ====================
    async function testShellOpenPath() {
      try {
        const path = document.getElementById("shellPath").value;
        await window.naimo.shell.openPath(path);
        displayResult("shellOutput", `å·²æ‰“å¼€è·¯å¾„: ${path}`);
      } catch (error) {
        displayError("shellOutput", error);
      }
    }

    async function testShellShowInFolder() {
      try {
        const path = document.getElementById("shellPath").value;
        await window.naimo.shell.showInFolder(path);
        displayResult("shellOutput", `å·²åœ¨æ–‡ä»¶å¤¹ä¸­æ˜¾ç¤º: ${path}`);
      } catch (error) {
        displayError("shellOutput", error);
      }
    }

    async function testShellOpenUrl() {
      try {
        await window.naimo.shell.openUrl("https://github.com");
        displayResult("shellOutput", "å·²åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ GitHub");
      } catch (error) {
        displayError("shellOutput", error);
      }
    }

    async function testShellBeep() {
      try {
        await window.naimo.shell.beep();
        displayResult("shellOutput", "å·²æ’­æ”¾ç³»ç»Ÿæç¤ºéŸ³");
      } catch (error) {
        displayError("shellOutput", error);
      }
    }

    // ==================== ç³»ç»Ÿä¿¡æ¯ API æµ‹è¯• ====================
    async function testSystemNotify() {
      try {
        const message = document.getElementById("notifyMessage").value;
        const title = document.getElementById("notifyTitle").value;
        await window.naimo.system.notify(message, title);
        displayResult("systemOutput", "å·²å‘é€ç³»ç»Ÿé€šçŸ¥");
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemGetVersion() {
      try {
        const result = await window.naimo.system.getVersion();
        displayResult("systemOutput", `åº”ç”¨ç‰ˆæœ¬: ${result}`);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemGetName() {
      try {
        const result = await window.naimo.system.getName();
        displayResult("systemOutput", `åº”ç”¨åç§°: ${result}`);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemGetDeviceId() {
      try {
        const result = await window.naimo.system.getDeviceId();
        displayResult("systemOutput", `è®¾å¤‡ID: ${result}`);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemIsMac() {
      try {
        const result = await window.naimo.system.isMac();
        displayResult("systemOutput", `æ˜¯å¦ä¸º Mac: ${result}`);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemIsWindows() {
      try {
        const result = await window.naimo.system.isWindows();
        displayResult("systemOutput", `æ˜¯å¦ä¸º Windows: ${result}`);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemIsLinux() {
      try {
        const result = await window.naimo.system.isLinux();
        displayResult("systemOutput", `æ˜¯å¦ä¸º Linux: ${result}`);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemGetPath() {
      try {
        const paths = {
          home: await window.naimo.system.getPath("home"),
          temp: await window.naimo.system.getPath("temp"),
          desktop: await window.naimo.system.getPath("desktop"),
        };
        displayResult("systemOutput", paths);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    // ==================== å±å¹•ä¸æ˜¾ç¤ºå™¨ API æµ‹è¯• ====================
    async function testScreenGetSources() {
      try {
        const result = await window.naimo.screen.getSources({
          types: ["screen", "window"],
          thumbnailSize: { width: 150, height: 150 },
        });
        displayResult("screenOutput", `æ‰¾åˆ° ${result.length} ä¸ªæº`);
      } catch (error) {
        displayError("screenOutput", error);
      }
    }

    async function testScreenGetCursorPosition() {
      try {
        const result = await window.naimo.screen.getCursorPosition();
        displayResult("screenOutput", result);
      } catch (error) {
        displayError("screenOutput", error);
      }
    }

    async function testScreenGetPrimaryDisplay() {
      try {
        const result = await window.naimo.screen.getPrimaryDisplay();
        displayResult("screenOutput", result);
      } catch (error) {
        displayError("screenOutput", error);
      }
    }

    async function testScreenGetAllDisplays() {
      try {
        const result = await window.naimo.screen.getAllDisplays();
        displayResult("screenOutput", result);
      } catch (error) {
        displayError("screenOutput", error);
      }
    }

    async function testScreenCapture() {
      try {
        const result = await window.naimo.screen.capture();
        displayResult("screenOutput", `æˆªå›¾å·²ä¿å­˜: ${result}`);
      } catch (error) {
        displayError("screenOutput", error);
      }
    }

    // ==================== å¯¹è¯æ¡† API æµ‹è¯• ====================
    async function testDialogShowOpen() {
      try {
        const result = await window.naimo.dialog.showOpen({
          title: "é€‰æ‹©æ–‡ä»¶",
          properties: ["openFile", "multiSelections"],
        });
        displayResult("dialogOutput", result);
      } catch (error) {
        displayError("dialogOutput", error);
      }
    }

    async function testDialogShowSave() {
      try {
        const result = await window.naimo.dialog.showSave({
          title: "ä¿å­˜æ–‡ä»¶",
          defaultPath: "test.txt",
        });
        displayResult("dialogOutput", result);
      } catch (error) {
        displayError("dialogOutput", error);
      }
    }

    async function testDialogShowMessage() {
      try {
        const result = await window.naimo.dialog.showMessage({
          type: "info",
          title: "æµ‹è¯•æ¶ˆæ¯",
          message: "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ¶ˆæ¯æ¡†",
          buttons: ["ç¡®å®š", "å–æ¶ˆ"],
        });
        displayResult("dialogOutput", result);
      } catch (error) {
        displayError("dialogOutput", error);
      }
    }

    async function testDialogShowError() {
      try {
        await window.naimo.dialog.showError("é”™è¯¯æ ‡é¢˜", "è¿™æ˜¯ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯");
        displayResult("dialogOutput", "å·²æ˜¾ç¤ºé”™è¯¯å¯¹è¯æ¡†");
      } catch (error) {
        displayError("dialogOutput", error);
      }
    }

    // ==================== è¾“å…¥æ¨¡æ‹Ÿ API æµ‹è¯• ====================
    async function testInputPasteText() {
      try {
        const text = document.getElementById("inputText").value;
        await window.naimo.input.pasteText(text);
        displayResult(
          "inputOutput",
          "æ–‡æœ¬å·²ç²˜è´´ï¼ˆè¯·å°†ç„¦ç‚¹ç§»åˆ°å…¶ä»–åº”ç”¨æŸ¥çœ‹æ•ˆæœï¼‰"
        );
      } catch (error) {
        displayError("inputOutput", error);
      }
    }

    async function testInputSimulateKeyPress() {
      try {
        const key = document.getElementById("inputKey").value;
        await window.naimo.input.simulateKeyPress(key);
        displayResult("inputOutput", `å·²æ¨¡æ‹ŸæŒ‰é”®: ${key}`);
      } catch (error) {
        displayError("inputOutput", error);
      }
    }

    // ==================== åˆå§‹åŒ– ====================
    window.addEventListener("DOMContentLoaded", () => {
      console.log("API æµ‹è¯•é¢æ¿å·²åŠ è½½");
      window.naimo.log.info("API æµ‹è¯•é¢æ¿å·²åˆå§‹åŒ–");
    });
  </script>
</body>

</html>