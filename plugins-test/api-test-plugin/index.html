<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Naimo API æµ‹è¯•é¢æ¿</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        "Helvetica Neue", Arial, "Microsoft YaHei", sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px;
      min-height: 100vh;
    }

    body {
      height: 100vh;
      overflow: hidden;
    }

    .container {
      background: white;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      padding: 30px;
      max-width: 1200px;
      margin: 0 auto;
      height: 100%;
      overflow: auto;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .api-section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 12px;
      border-left: 4px solid #667eea;
    }

    .api-section h2 {
      color: #333;
      margin-bottom: 15px;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .api-section h2 .icon {
      font-size: 24px;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      background: #667eea;
      color: white;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }

    button:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    button.secondary {
      background: #6c757d;
    }

    button.secondary:hover {
      background: #5a6268;
    }

    button.danger {
      background: #dc3545;
    }

    button.danger:hover {
      background: #c82333;
    }

    .input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      align-items: center;
    }

    input[type="text"],
    input[type="number"],
    textarea {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 13px;
      font-family: inherit;
    }

    textarea {
      min-height: 60px;
      resize: vertical;
    }

    .output {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin-top: 10px;
      font-family: "Courier New", monospace;
      font-size: 12px;
      max-height: 200px;
      overflow-y: auto;
      white-space: pre-wrap;
      word-break: break-all;
    }

    .output.success {
      border-color: #28a745;
      background: #f0fff4;
    }

    .output.error {
      border-color: #dc3545;
      background: #fff5f5;
      color: #dc3545;
    }

    .divider {
      height: 1px;
      background: #ddd;
      margin: 20px 0;
    }

    .info-box {
      background: #e7f3ff;
      border-left: 4px solid #2196f3;
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 15px;
      font-size: 13px;
      color: #0066cc;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>ğŸ§ª Naimo API æµ‹è¯•é¢æ¿</h1>
    <p class="subtitle">æµ‹è¯•æ‰€æœ‰å¯ç”¨çš„ Naimo API åŠŸèƒ½ - P0 æ ¸å¿ƒ API å·²å…¨éƒ¨å®ç°</p>

    <!-- ç»¼åˆä½¿ç”¨è¯´æ˜ -->
    <div class="api-section" style="background: linear-gradient(135deg, #667eea22 0%, #764ba222 100%);">
      <h2><span class="icon">ğŸ“˜</span>API ä½¿ç”¨æŒ‡å—</h2>
      <div class="info-box">
        <strong>ğŸ¯ ç¬¬äºŒé˜¶æ®µï¼ˆP0æ ¸å¿ƒAPIï¼‰å·²å®Œæˆï¼š</strong><br>
        âœ… çª—å£ç®¡ç† (window) - éšè—/æ˜¾ç¤º/å…³é—­çª—å£<br>
        âœ… æ–‡æ¡£æ•°æ®åº“ (db) - åŸºäº lowdb çš„æ–‡æ¡£å­˜å‚¨ï¼Œæ”¯æŒç‰ˆæœ¬æ§åˆ¶<br>
        âœ… é”®å€¼å­˜å‚¨ (storage) - ç®€å•çš„é…ç½®å­˜å‚¨<br>
        âœ… å‰ªè´´æ¿ (clipboard) - è¯»å†™æ–‡æœ¬å’Œå›¾ç‰‡<br>
        âœ… Shellæ“ä½œ (shell) - æ‰“å¼€æ–‡ä»¶/URL/æ–‡ä»¶å¤¹<br>
        âœ… ç³»ç»Ÿä¿¡æ¯ (system) - è·å–ç‰ˆæœ¬ã€è·¯å¾„ã€è®¾å¤‡IDç­‰<br>
        âœ… å±å¹•æ˜¾ç¤º (screen) - æˆªå›¾ã€æ˜¾ç¤ºå™¨ä¿¡æ¯<br>
        âœ… å¯¹è¯æ¡† (dialog) - æ–‡ä»¶é€‰æ‹©ã€ä¿å­˜å¯¹è¯æ¡†<br>
        âœ… è¾“å…¥æ¨¡æ‹Ÿ (input) - ç²˜è´´æ–‡æœ¬/å›¾ç‰‡/æ–‡ä»¶
      </div>
      <div class="info-box" style="background: #e7f3ff; border-color: #2196f3;">
        <strong>ğŸ’¡ å¿«é€Ÿå¼€å§‹ï¼š</strong><br>
        1ï¸âƒ£ ç‚¹å‡»å„æ¨¡å—çš„æŒ‰é’®æµ‹è¯•åŸºç¡€åŠŸèƒ½<br>
        2ï¸âƒ£ æŸ¥çœ‹å¸¦æœ‰ <span style="color: #28a745;">ç»¿è‰²</span>/<span style="color: #17a2b8;">è“è‰²</span>/<span
          style="color: #6f42c1;">ç´«è‰²</span> æŒ‰é’®çš„å®ç”¨æ¡ˆä¾‹<br>
        3ï¸âƒ£ åœ¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†çš„APIè°ƒç”¨æ—¥å¿—<br>
        4ï¸âƒ£ å‚è€ƒå®ç”¨æ¡ˆä¾‹çš„æºä»£ç äº†è§£æœ€ä½³å®è·µ
      </div>
      <div class="button-group">
        <button onclick="runComprehensiveExample()"
          style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); font-size: 15px; padding: 12px 24px;">
          ğŸš€ è¿è¡Œç»¼åˆç¤ºä¾‹
        </button>
        <button onclick="showApiDocs()" style="background: #17a2b8; font-size: 15px; padding: 12px 24px;">
          ğŸ“š æŸ¥çœ‹APIæ–‡æ¡£
        </button>
      </div>
      <div id="comprehensiveOutput" class="output" style="display: none;"></div>
    </div>

    <!-- ========== æ—¥å¿— API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ“</span>æ—¥å¿—ç³»ç»Ÿ (log)</h2>
      <div class="button-group">
        <button onclick="testLogError()">log.error</button>
        <button onclick="testLogWarn()">log.warn</button>
        <button onclick="testLogInfo()">log.info</button>
        <button onclick="testLogDebug()">log.debug</button>
        <button onclick="testLogThrowError()">log.throw_error</button>
      </div>
      <div id="logOutput" class="output"></div>
    </div>

    <!-- ========== çª—å£ç®¡ç† API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸªŸ</span>çª—å£ç®¡ç† (window)</h2>
      <div class="button-group">
        <button onclick="testWindowHide()">hide</button>
        <button onclick="testWindowShow()">show</button>
        <button onclick="testWindowMinimize()">minimize</button>
        <button onclick="testWindowMaximize()">maximize</button>
        <button class="danger" onclick="testWindowClose()">close</button>
      </div>
      <div class="input-group">
        <input type="number" id="windowHeight" placeholder="é«˜åº¦ (px)" value="600" />
        <button onclick="testWindowSetHeight()">è®¾ç½®é«˜åº¦</button>
      </div>
      <div class="input-group">
        <input type="number" id="windowWidth" placeholder="å®½åº¦ (px)" value="800" />
        <input type="number" id="windowHeightForSize" placeholder="é«˜åº¦ (px)" value="600" />
        <button onclick="testWindowSetSize()">è®¾ç½®å°ºå¯¸</button>
      </div>
      <div id="windowOutput" class="output"></div>
    </div>

    <!-- ========== æ•°æ®åº“ API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ’¾</span>æ–‡æ¡£æ•°æ®åº“ (db)</h2>
      <div class="info-box">
        ğŸ’¡ æç¤ºï¼šæ¯æ¬¡ put ä½¿ç”¨ä¸åŒçš„ _id ä¼šæ·»åŠ æ–°æ–‡æ¡£ï¼Œç›¸åŒ _id ä¼šæ›´æ–°ç°æœ‰æ–‡æ¡£
      </div>
      <div class="input-group">
        <input type="text" id="dbDocId" placeholder="æ–‡æ¡£ ID" value="test_doc_1" />
        <textarea id="dbDocContent" placeholder="æ–‡æ¡£å†…å®¹ (JSON)">{"name": "æµ‹è¯•æ–‡æ¡£", "value": 123}</textarea>
      </div>
      <div class="button-group">
        <button onclick="testDbPut()">put (ä¿å­˜)</button>
        <button onclick="testDbPutRandom()" style="background: #28a745;">put (éšæœºID)</button>
        <button onclick="testDbGet()">get (è¯»å–)</button>
        <button onclick="testDbRemove()">remove (åˆ é™¤)</button>
        <button onclick="testDbAllDocs()">allDocs (å…¨éƒ¨)</button>
        <button class="danger" onclick="testDbClearAll()">æ¸…ç©ºæ‰€æœ‰</button>
      </div>
      <div class="divider"></div>
      <div class="info-box" style="background: #fff3cd; border-color: #ffc107; color: #856404;">
        ğŸ“š å®ç”¨æ¡ˆä¾‹ï¼šç”¨æˆ·è®¾ç½®ä¿å­˜
      </div>
      <div class="button-group">
        <button onclick="testDbUseCaseUserSettings()" style="background: #28a745;">ä¿å­˜ç”¨æˆ·è®¾ç½®</button>
        <button onclick="testDbUseCaseLoadSettings()">è¯»å–ç”¨æˆ·è®¾ç½®</button>
        <button onclick="testDbUseCaseSearchHistory()" style="background: #17a2b8;">ä¿å­˜æœç´¢å†å²</button>
        <button onclick="testDbUseCaseBulkSave()" style="background: #6f42c1;">æ‰¹é‡ä¿å­˜æ•°æ®</button>
      </div>
      <div id="dbOutput" class="output"></div>
    </div>

    <!-- ========== é”®å€¼å­˜å‚¨ API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ—„ï¸</span>é”®å€¼å­˜å‚¨ (storage)</h2>
      <div class="input-group">
        <input type="text" id="storageKey" placeholder="é”®å" value="test_key" />
        <input type="text" id="storageValue" placeholder="å€¼" value="æµ‹è¯•æ•°æ®" />
      </div>
      <div class="button-group">
        <button onclick="testStorageSet()">setItem (ä¿å­˜)</button>
        <button onclick="testStorageGet()">getItem (è¯»å–)</button>
        <button onclick="testStorageGetAll()">getAllItems (å…¨éƒ¨)</button>
        <button onclick="testStorageRemove()">removeItem (åˆ é™¤)</button>
        <button class="danger" onclick="testStorageClear()">clear (æ¸…ç©º)</button>
      </div>
      <div id="storageOutput" class="output"></div>
    </div>

    <!-- ========== å‰ªè´´æ¿ API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ“‹</span>å‰ªè´´æ¿ (clipboard)</h2>
      <div class="input-group">
        <input type="text" id="clipboardText" placeholder="è¦å¤åˆ¶çš„æ–‡æœ¬" value="Hello Naimo!" />
        <button onclick="testClipboardWriteText()">å†™å…¥æ–‡æœ¬</button>
        <button onclick="testClipboardReadText()">è¯»å–æ–‡æœ¬</button>
      </div>
      <div class="button-group">
        <button onclick="testClipboardHasText()">hasText (æ£€æŸ¥æ–‡æœ¬)</button>
        <button onclick="testClipboardHasImage()">hasImage (æ£€æŸ¥å›¾ç‰‡)</button>
        <button onclick="testClipboardReadImage()">readImage (è¯»å–å›¾ç‰‡)</button>
        <button class="danger" onclick="testClipboardClear()">clear (æ¸…ç©º)</button>
      </div>
      <div class="divider"></div>
      <div class="info-box" style="background: #fff3cd; border-color: #ffc107; color: #856404;">
        ğŸ“š å®ç”¨æ¡ˆä¾‹ï¼šå‰ªè´´æ¿æ“ä½œ
      </div>
      <div class="button-group">
        <button onclick="testClipboardUseCaseCopyJson()" style="background: #28a745;">å¤åˆ¶JSONæ•°æ®</button>
        <button onclick="testClipboardUseCaseCopyLink()">å¤åˆ¶é“¾æ¥</button>
        <button onclick="testClipboardUseCaseFormatText()" style="background: #17a2b8;">æ ¼å¼åŒ–å¹¶å¤åˆ¶</button>
        <button onclick="testClipboardUseCaseMonitor()" style="background: #6f42c1;">ç›‘å¬å‰ªè´´æ¿</button>
      </div>
      <div id="clipboardOutput" class="output"></div>
    </div>

    <!-- ========== Shell æ“ä½œ API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸš</span>Shell æ“ä½œ (shell)</h2>
      <div class="input-group">
        <input type="text" id="shellPath" placeholder="æ–‡ä»¶è·¯å¾„" value="C:\\" />
      </div>
      <div class="button-group">
        <button onclick="testShellOpenPath()">openPath (æ‰“å¼€è·¯å¾„)</button>
        <button onclick="testShellShowInFolder()">showInFolder (åœ¨æ–‡ä»¶å¤¹ä¸­æ˜¾ç¤º)</button>
        <button onclick="testShellOpenUrl()">openUrl (æ‰“å¼€ç½‘å€)</button>
        <button onclick="testShellBeep()">beep (æ’­æ”¾æç¤ºéŸ³)</button>
      </div>
      <div class="divider"></div>
      <div class="info-box" style="background: #fff3cd; border-color: #ffc107; color: #856404;">
        ğŸ“š å®ç”¨æ¡ˆä¾‹ï¼šå¿«é€Ÿè®¿é—®å¸¸ç”¨è·¯å¾„
      </div>
      <div class="button-group">
        <button onclick="testShellUseCaseOpenDesktop()" style="background: #28a745;">æ‰“å¼€æ¡Œé¢</button>
        <button onclick="testShellUseCaseOpenDownloads()">æ‰“å¼€ä¸‹è½½</button>
        <button onclick="testShellUseCaseOpenDocs()" style="background: #17a2b8;">æ‰“å¼€æ–‡æ¡£</button>
        <button onclick="testShellUseCaseQuickSearch()" style="background: #6f42c1;">å¿«é€Ÿæœç´¢GitHub</button>
      </div>
      <div id="shellOutput" class="output"></div>
    </div>

    <!-- ========== ç³»ç»Ÿä¿¡æ¯ API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ’»</span>ç³»ç»Ÿä¿¡æ¯ (system)</h2>
      <div class="input-group">
        <input type="text" id="notifyMessage" placeholder="é€šçŸ¥æ¶ˆæ¯" value="æµ‹è¯•é€šçŸ¥" />
        <input type="text" id="notifyTitle" placeholder="é€šçŸ¥æ ‡é¢˜" value="Naimo" />
        <button onclick="testSystemNotify()">å‘é€é€šçŸ¥</button>
      </div>
      <div class="button-group">
        <button onclick="testSystemGetVersion()">getVersion (ç‰ˆæœ¬)</button>
        <button onclick="testSystemGetName()">getName (åº”ç”¨å)</button>
        <button onclick="testSystemGetDeviceId()">getDeviceId (è®¾å¤‡ID)</button>
        <button onclick="testSystemIsMac()">isMac</button>
        <button onclick="testSystemIsWindows()">isWindows</button>
        <button onclick="testSystemIsLinux()">isLinux</button>
        <button onclick="testSystemGetPath()">getPath (ç³»ç»Ÿè·¯å¾„)</button>
      </div>
      <div id="systemOutput" class="output"></div>
    </div>

    <!-- ========== å±å¹•ä¸æ˜¾ç¤ºå™¨ API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ–¥ï¸</span>å±å¹•ä¸æ˜¾ç¤ºå™¨ (screen)</h2>
      <div class="button-group">
        <button onclick="testScreenGetSources()">getSources (è·å–æº)</button>
        <button onclick="testScreenGetCursorPosition()">getCursorPosition (å…‰æ ‡ä½ç½®)</button>
        <button onclick="testScreenGetPrimaryDisplay()">getPrimaryDisplay (ä¸»æ˜¾ç¤ºå™¨)</button>
        <button onclick="testScreenGetAllDisplays()">getAllDisplays (æ‰€æœ‰æ˜¾ç¤ºå™¨)</button>
        <button onclick="testScreenCapture()">capture (æˆªå›¾)</button>
      </div>
      <div id="screenOutput" class="output"></div>
    </div>

    <!-- ========== å¯¹è¯æ¡† API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ’¬</span>å¯¹è¯æ¡† (dialog)</h2>
      <div class="button-group">
        <button onclick="testDialogShowOpen()">showOpen (æ‰“å¼€æ–‡ä»¶)</button>
        <button onclick="testDialogShowSave()">showSave (ä¿å­˜æ–‡ä»¶)</button>
        <button onclick="testDialogShowMessage()">showMessage (æ¶ˆæ¯æ¡†)</button>
        <button onclick="testDialogShowError()">showError (é”™è¯¯æ¡†)</button>
      </div>
      <div class="divider"></div>
      <div class="info-box" style="background: #fff3cd; border-color: #ffc107; color: #856404;">
        ğŸ“š å®ç”¨æ¡ˆä¾‹ï¼šæ–‡ä»¶é€‰æ‹©ä¸ä¿å­˜
      </div>
      <div class="button-group">
        <button onclick="testDialogUseCaseSelectImage()" style="background: #28a745;">é€‰æ‹©å›¾ç‰‡</button>
        <button onclick="testDialogUseCaseSelectMultiFiles()">é€‰æ‹©å¤šä¸ªæ–‡ä»¶</button>
        <button onclick="testDialogUseCaseExportJson()" style="background: #17a2b8;">å¯¼å‡ºJSONé…ç½®</button>
        <button onclick="testDialogUseCaseConfirm()" style="background: #6f42c1;">ç¡®è®¤å¯¹è¯æ¡†</button>
      </div>
      <div id="dialogOutput" class="output"></div>
    </div>

    <!-- ========== è¾“å…¥æ¨¡æ‹Ÿ API ========== -->
    <div class="api-section">
      <h2><span class="icon">âŒ¨ï¸</span>è¾“å…¥æ¨¡æ‹Ÿ (input)</h2>
      <div class="info-box">
        âš ï¸ æ³¨æ„ï¼šè¾“å…¥æ¨¡æ‹ŸåŠŸèƒ½éœ€è¦çª—å£å¤±å»ç„¦ç‚¹åæ‰èƒ½ç”Ÿæ•ˆ
      </div>
      <div class="input-group">
        <input type="text" id="inputText" placeholder="è¦ç²˜è´´çš„æ–‡æœ¬" value="Hello from Naimo!" />
        <button onclick="testInputPasteText()">pasteText (ç²˜è´´æ–‡æœ¬)</button>
      </div>
      <div class="input-group">
        <input type="text" id="inputKey" placeholder="æŒ‰é”® (å¦‚: a, Enter)" value="a" />
        <button onclick="testInputSimulateKeyPress()">simulateKeyPress (æ¨¡æ‹ŸæŒ‰é”®)</button>
      </div>
      <div id="inputOutput" class="output"></div>
    </div>

    <!-- ========== ç½‘é¡µè‡ªåŠ¨åŒ– API ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ¤–</span>ç½‘é¡µè‡ªåŠ¨åŒ– (automation)</h2>
      <div class="info-box">
        ğŸ’¡ æç¤ºï¼šä½¿ç”¨ Puppeteer è¿›è¡Œç½‘é¡µè‡ªåŠ¨åŒ–æ“ä½œï¼Œæ”¯æŒç‚¹å‡»ã€è¾“å…¥ã€ç­‰å¾…ç­‰æ“ä½œ
      </div>
      <div class="input-group">
        <input type="text" id="automationUrl" placeholder="ç›®æ ‡ç½‘å€" value="https://www.baidu.com" />
      </div>
      <div class="button-group">
        <button onclick="testAutomationFetchHTML()">fetchHTML (è·å–HTML)</button>
        <button onclick="testAutomationFetchJSON()">fetchJSON (è·å–JSON)</button>
        <button onclick="testAutomationWithSteps()">automateWithJson (è‡ªåŠ¨åŒ–ä»»åŠ¡)</button>
        <button onclick="testAutomationSearch()" style="background: #28a745;">ç™¾åº¦æœç´¢ç¤ºä¾‹</button>
      </div>
      <div class="divider"></div>
      <div class="info-box" style="background: #fff3cd; border-color: #ffc107; color: #856404;">
        ğŸ“š å®ç”¨æ¡ˆä¾‹ï¼šç½‘é¡µæ•°æ®é‡‡é›†å’Œè‡ªåŠ¨åŒ–
      </div>
      <div class="button-group">
        <button onclick="testAutomationUseCaseGetTitle()" style="background: #28a745;">è·å–ç½‘é¡µæ ‡é¢˜</button>
        <button onclick="testAutomationUseCaseAPIData()">API æ•°æ®è·å–</button>
        <button onclick="testAutomationUseCaseLogin()" style="background: #17a2b8;">ç™¾åº¦æœç´¢è‡ªåŠ¨åŒ–</button>
        <button onclick="testAutomationUseCaseDataCrawl()" style="background: #6f42c1;">Bç«™ç•ªå‰§çˆ¬å–</button>
      </div>
      <div id="automationOutput" class="output"></div>
    </div>

    <!-- ========== å¯ç¼–ç¨‹æµè§ˆå™¨ API (UBrowser) ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸŒ</span>å¯ç¼–ç¨‹æµè§ˆå™¨ (ubrowser)</h2>
      <div class="info-box">
        ğŸ’¡ æç¤ºï¼šUBrowser æä¾›ä¸¤ç§æ¨¡å¼ - <strong>é“¾å¼è°ƒç”¨æ¨¡å¼</strong>ï¼ˆæ„å»ºé˜Ÿåˆ—ç»Ÿä¸€æ‰§è¡Œï¼‰å’Œ<strong>å³æ—¶æ‰§è¡Œæ¨¡å¼</strong>ï¼ˆæ¯æ­¥ç«‹å³æ‰§è¡Œï¼‰
      </div>

      <h3 style="margin-top: 20px;">ğŸ“¦ é“¾å¼è°ƒç”¨æ¨¡å¼ï¼ˆè‡ªåŠ¨åŒ–è„šæœ¬ï¼‰</h3>
      <div class="info-box" style="background: #e7f3ff; border-color: #2196f3;">
        <strong>ğŸ¯ ç‰¹æ€§ï¼š</strong>æ„å»ºæ“ä½œé˜Ÿåˆ—ï¼Œæœ€åç»Ÿä¸€æ‰§è¡Œ<br>
        <strong>ğŸ’¡ è¯­æ³•ï¼š</strong><code>naimo.ubrowser.goto().wait().click().run()</code>
      </div>
      <div class="button-group">
        <button onclick="testUBrowserBasic()" style="background: #28a745;">åŸºç¡€ç¤ºä¾‹</button>
        <button onclick="testUBrowserSearch()" style="background: #17a2b8;">ç™¾åº¦æœç´¢</button>
        <button onclick="testUBrowserExpressQuery()" style="background: #6f42c1;">å¿«é€’æŸ¥è¯¢</button>
        <button onclick="testUBrowserScreenshot()" style="background: #fd7e14;">ç½‘é¡µæˆªå›¾</button>
        <button onclick="testUBrowserCondition()" style="background: #e83e8c;">æ¡ä»¶åˆ¤æ–­</button>
      </div>
      <div id="ubrowserOutput" class="output"></div>

      <div class="divider"></div>

      <h3>âš¡ å³æ—¶æ‰§è¡Œæ¨¡å¼ï¼ˆé€æ­¥æ“ä½œï¼‰</h3>
      <div class="info-box" style="background: #fff3cd; border-color: #ffc107; color: #856404;">
        <strong>ğŸ¯ ç‰¹æ€§ï¼š</strong>æ¯ä¸ªæ“ä½œç«‹å³æ‰§è¡Œï¼Œçª—å£ä¿æŒæ‰“å¼€<br>
        <strong>ğŸ’¡ è¯­æ³•ï¼š</strong><code>const b = naimo.instantBrowser.create(); await b.goto()</code>
      </div>
      <div class="button-group">
        <button onclick="testInstantStep1()" style="background: #007bff;">â‘  æ‰“å¼€ç½‘é¡µ</button>
        <button onclick="testInstantStep2()" style="background: #007bff;">â‘¡ ç­‰å¾…å…ƒç´ </button>
        <button onclick="testInstantStep3()" style="background: #007bff;">â‘¢ è¾“å…¥æ–‡æœ¬</button>
        <button onclick="testInstantStep4()" style="background: #007bff;">â‘£ ç‚¹å‡»æœç´¢</button>
        <button onclick="testInstantStep5()" style="background: #007bff;">â‘¤ æå–ç»“æœ</button>
        <button onclick="testInstantClose()" class="danger">å…³é—­æµè§ˆå™¨</button>
      </div>
      <div id="instantOutput" class="output"></div>
    </div>

    <!-- ========== æœ¬åœ°æµ‹è¯•é¡µé¢è‡ªåŠ¨åŒ– ========== -->
    <div class="api-section">
      <h2><span class="icon">ğŸ§ª</span>æœ¬åœ°æµ‹è¯•é¡µé¢è‡ªåŠ¨åŒ– (test.html)</h2>
      <div class="info-box">
        ğŸ’¡ æµ‹è¯•æœ¬åœ° HTTP æœåŠ¡å™¨ä¸Šçš„ test.html é¡µé¢<br>
        ğŸ“ è¯·å…ˆè¿è¡Œ: <code>python server.py</code><br>
        ğŸŒ æµ‹è¯•åœ°å€: <code>http://localhost:8000/test.html</code>
      </div>

      <h3 style="margin-top: 20px;">ğŸ¯ ä¸‰ç§è‡ªåŠ¨åŒ–æ¨¡å¼å¯¹æ¯”</h3>

      <!-- æ¨¡å¼1: automateWithJson -->
      <div class="info-box" style="background: #e7f3ff; border-color: #2196f3;">
        <strong>æ¨¡å¼1: automateWithJson (é…ç½®æ¨¡å¼)</strong><br>
        â€¢ å®Œå…¨åŸºäºJSONé…ç½®<br>
        â€¢ é€‚åˆä¸€æ¬¡æ€§ä»»åŠ¡<br>
        â€¢ ä»»åŠ¡ç»“æŸåè‡ªåŠ¨å…³é—­çª—å£
      </div>
      <div class="button-group">
        <button onclick="testLocalAutomateLogin()" style="background: #28a745;">æµ‹è¯•ç™»å½•è¡¨å•</button>
        <button onclick="testLocalAutomateSearch()" style="background: #17a2b8;">æµ‹è¯•æœç´¢åŠŸèƒ½</button>
        <button onclick="testLocalAutomateForm()" style="background: #6f42c1;">æµ‹è¯•æ•°æ®è¡¨å•</button>
      </div>
      <div id="localAutomateOutput" class="output"></div>

      <div class="divider"></div>

      <!-- æ¨¡å¼2: UBrowser é“¾å¼è°ƒç”¨ -->
      <div class="info-box" style="background: #fff3cd; border-color: #ffc107; color: #856404;">
        <strong>æ¨¡å¼2: UBrowser (é“¾å¼è°ƒç”¨æ¨¡å¼)</strong><br>
        â€¢ ä¼˜é›…çš„é“¾å¼API<br>
        â€¢ æ„å»ºé˜Ÿåˆ—ç»Ÿä¸€æ‰§è¡Œ<br>
        â€¢ è¿”å›æ‰€æœ‰æ­¥éª¤ç»“æœ
      </div>
      <div class="button-group">
        <button onclick="testLocalUBrowserLogin()" style="background: #28a745;">é“¾å¼-ç™»å½•è¡¨å•</button>
        <button onclick="testLocalUBrowserSearch()" style="background: #17a2b8;">é“¾å¼-æœç´¢åŠŸèƒ½</button>
        <button onclick="testLocalUBrowserComplex()" style="background: #6f42c1;">é“¾å¼-å¤æ‚è¡¨å•</button>
        <button onclick="testLocalUBrowserAll()" style="background: #e83e8c;">é“¾å¼-å®Œæ•´æµç¨‹</button>
      </div>
      <div id="localUBrowserOutput" class="output"></div>

      <div class="divider"></div>

      <!-- æ¨¡å¼3: InstantBrowser å³æ—¶æ‰§è¡Œ -->
      <div class="info-box" style="background: #f8d7da; border-color: #dc3545; color: #721c24;">
        <strong>æ¨¡å¼3: InstantBrowser (å³æ—¶æ‰§è¡Œæ¨¡å¼)</strong><br>
        â€¢ æ¯æ­¥ç«‹å³æ‰§è¡Œ<br>
        â€¢ çª—å£ä¿æŒæ‰“å¼€<br>
        â€¢ å¯äº¤äº’è°ƒè¯•
      </div>
      <div class="button-group">
        <button onclick="testLocalInstantStart()" style="background: #007bff;">â‘  æ‰“å¼€é¡µé¢</button>
        <button onclick="testLocalInstantLogin()" style="background: #007bff;">â‘¡ å¡«å†™ç™»å½•</button>
        <button onclick="testLocalInstantSearch()" style="background: #007bff;">â‘¢ æ‰§è¡Œæœç´¢</button>
        <button onclick="testLocalInstantForm()" style="background: #007bff;">â‘£ å¡«å†™è¡¨å•</button>
        <button onclick="testLocalInstantClose()" class="danger">â‘¤ å…³é—­æµè§ˆå™¨</button>
      </div>
      <div id="localInstantOutput" class="output"></div>

      <div class="divider"></div>

      <!-- ç»¼åˆå¯¹æ¯” -->
      <div class="info-box" style="background: linear-gradient(135deg, #667eea22 0%, #764ba222 100%);">
        <strong>ğŸ“Š ä¸‰ç§æ¨¡å¼å¯¹æ¯”æ€»ç»“</strong><br><br>
        <strong>1. automateWithJson (é…ç½®æ¨¡å¼)</strong><br>
        âœ… ä¼˜ç‚¹: é…ç½®æ¸…æ™°ã€æ˜“äºå­˜å‚¨å’Œä¼ è¾“<br>
        âŒ ç¼ºç‚¹: ä¸å¤Ÿçµæ´»ã€éœ€è¦é¢„å…ˆå®šä¹‰æ‰€æœ‰æ­¥éª¤<br>
        ğŸ¯ é€‚ç”¨: å›ºå®šæµç¨‹çš„è‡ªåŠ¨åŒ–ä»»åŠ¡<br><br>

        <strong>2. UBrowser (é“¾å¼è°ƒç”¨)</strong><br>
        âœ… ä¼˜ç‚¹: APIä¼˜é›…ã€ä»£ç å¯è¯»æ€§é«˜ã€ç»Ÿä¸€æ‰§è¡Œ<br>
        âŒ ç¼ºç‚¹: æ— æ³•ä¸­é€”è°ƒæ•´ã€è°ƒè¯•ä¸ä¾¿<br>
        ğŸ¯ é€‚ç”¨: è„šæœ¬åŒ–è‡ªåŠ¨åŒ–ã€æ‰¹é‡å¤„ç†<br><br>

        <strong>3. InstantBrowser (å³æ—¶æ‰§è¡Œ)</strong><br>
        âœ… ä¼˜ç‚¹: çµæ´»å¯æ§ã€ä¾¿äºè°ƒè¯•ã€å¯äº¤äº’<br>
        âŒ ç¼ºç‚¹: éœ€è¦æ‰‹åŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ<br>
        ğŸ¯ é€‚ç”¨: éœ€è¦äººå·¥å¹²é¢„çš„åŠè‡ªåŠ¨åŒ–ä»»åŠ¡
      </div>
    </div>
  </div>

  <script>
    // ==================== å·¥å…·å‡½æ•° ====================
    function displayResult(elementId, result, isError = false) {
      const output = document.getElementById(elementId);
      output.className = `output ${isError ? "error" : "success"}`;
      output.textContent =
        typeof result === "object"
          ? JSON.stringify(result, null, 2)
          : String(result);
    }

    function displayError(elementId, error) {
      displayResult(elementId, `é”™è¯¯: ${error.message || error}`, true);
    }

    // ==================== æ—¥å¿— API æµ‹è¯• ====================
    function testLogError() {
      window.naimo.log.error("è¿™æ˜¯ä¸€æ¡é”™è¯¯æ—¥å¿—", { detail: "é”™è¯¯è¯¦æƒ…" });
      displayResult("logOutput", "å·²è®°å½•é”™è¯¯æ—¥å¿—ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°");
    }

    function testLogWarn() {
      window.naimo.log.warn("è¿™æ˜¯ä¸€æ¡è­¦å‘Šæ—¥å¿—");
      displayResult("logOutput", "å·²è®°å½•è­¦å‘Šæ—¥å¿—ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°");
    }

    function testLogInfo() {
      window.naimo.log.info("è¿™æ˜¯ä¸€æ¡ä¿¡æ¯æ—¥å¿—");
      displayResult("logOutput", "å·²è®°å½•ä¿¡æ¯æ—¥å¿—ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°");
    }

    function testLogDebug() {
      window.naimo.log.debug("è¿™æ˜¯ä¸€æ¡è°ƒè¯•æ—¥å¿—");
      displayResult("logOutput", "å·²è®°å½•è°ƒè¯•æ—¥å¿—ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°");
    }

    function testLogThrowError() {
      try {
        window.naimo.log.throw_error(new Error("æµ‹è¯•é”™è¯¯"), {
          title: "æµ‹è¯•é”™è¯¯å¯¹è¯æ¡†",
        });
        displayResult("logOutput", "å·²è§¦å‘é”™è¯¯å¯¹è¯æ¡†");
      } catch (error) {
        displayError("logOutput", error);
      }
    }

    // ==================== çª—å£ç®¡ç† API æµ‹è¯• ====================
    function testWindowHide() {
      window.naimo.window.hide();
      displayResult("windowOutput", "çª—å£å·²éšè—ï¼ˆ3ç§’åè‡ªåŠ¨æ˜¾ç¤ºï¼‰");
      setTimeout(() => window.naimo.window.show(), 3000);
    }

    function testWindowShow() {
      window.naimo.window.show();
      displayResult("windowOutput", "çª—å£å·²æ˜¾ç¤º");
    }

    function testWindowMinimize() {
      window.naimo.window.minimize();
      displayResult("windowOutput", "çª—å£å·²æœ€å°åŒ–");
    }

    function testWindowMaximize() {
      window.naimo.window.maximize();
      displayResult("windowOutput", "çª—å£å·²æœ€å¤§åŒ–/è¿˜åŸ");
    }

    function testWindowClose() {
      if (confirm("ç¡®å®šè¦å…³é—­çª—å£å—ï¼Ÿ")) {
        window.naimo.window.close();
      }
    }

    function testWindowSetHeight() {
      const height = parseInt(document.getElementById("windowHeight").value);
      window.naimo.window.setHeight(height);
      displayResult("windowOutput", `çª—å£é«˜åº¦å·²è®¾ç½®ä¸º ${height}px`);
    }

    function testWindowSetSize() {
      const width = parseInt(document.getElementById("windowWidth").value);
      const height = parseInt(
        document.getElementById("windowHeightForSize").value
      );
      window.naimo.window.setSize(width, height);
      displayResult(
        "windowOutput",
        `çª—å£å°ºå¯¸å·²è®¾ç½®ä¸º ${width}x${height}px`
      );
    }

    // ==================== æ•°æ®åº“ API æµ‹è¯• ====================
    async function testDbPut() {
      try {
        const id = document.getElementById("dbDocId").value;
        const content = JSON.parse(
          document.getElementById("dbDocContent").value
        );
        const doc = { _id: id, ...content };
        const result = await window.naimo.db.put(doc);
        displayResult("dbOutput", result);
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    async function testDbPutRandom() {
      try {
        const content = JSON.parse(
          document.getElementById("dbDocContent").value
        );
        // ç”Ÿæˆéšæœº ID
        const randomId = `test_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        const doc = { _id: randomId, ...content };
        const result = await window.naimo.db.put(doc);
        displayResult("dbOutput", `å·²æ·»åŠ æ–°æ–‡æ¡£: ${randomId}\n${JSON.stringify(result, null, 2)}`);
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    async function testDbClearAll() {
      try {
        if (confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æµ‹è¯•æ•°æ®å—ï¼Ÿ")) {
          const docs = await window.naimo.db.allDocs("test_");
          for (const doc of docs) {
            await window.naimo.db.remove(doc._id);
          }
          displayResult("dbOutput", `å·²æ¸…ç©º ${docs.length} æ¡æ•°æ®`);
        }
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    async function testDbGet() {
      try {
        const id = document.getElementById("dbDocId").value;
        const result = await window.naimo.db.get(id);
        displayResult("dbOutput", result);
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    async function testDbRemove() {
      try {
        const id = document.getElementById("dbDocId").value;
        const result = await window.naimo.db.remove(id);
        displayResult("dbOutput", result);
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    async function testDbAllDocs() {
      try {
        const result = await window.naimo.db.allDocs("test_");
        displayResult("dbOutput", result);
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    // ==================== æ•°æ®åº“å®ç”¨æ¡ˆä¾‹ ====================

    // æ¡ˆä¾‹1: ä¿å­˜ç”¨æˆ·è®¾ç½®ï¼ˆä¸»é¢˜ã€è¯­è¨€ã€å­—ä½“å¤§å°ç­‰ï¼‰
    async function testDbUseCaseUserSettings() {
      try {
        const userSettings = {
          _id: "user_settings",
          theme: "dark",
          language: "zh-CN",
          fontSize: 14,
          autoSave: true,
          lastModified: new Date().toISOString()
        };
        const result = await window.naimo.db.put(userSettings);
        displayResult(
          "dbOutput",
          `âœ… ç”¨æˆ·è®¾ç½®å·²ä¿å­˜:\n${JSON.stringify(userSettings, null, 2)}\n\nä¿å­˜ç»“æœ:\n${JSON.stringify(result, null, 2)}`
        );
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    // æ¡ˆä¾‹2: è¯»å–ç”¨æˆ·è®¾ç½®
    async function testDbUseCaseLoadSettings() {
      try {
        const settings = await window.naimo.db.get("user_settings");
        if (settings) {
          displayResult(
            "dbOutput",
            `âœ… ç”¨æˆ·è®¾ç½®è¯»å–æˆåŠŸ:\n${JSON.stringify(settings, null, 2)}`
          );
        } else {
          displayResult("dbOutput", "âš ï¸ æœªæ‰¾åˆ°ç”¨æˆ·è®¾ç½®ï¼Œè¯·å…ˆä¿å­˜è®¾ç½®");
        }
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    // æ¡ˆä¾‹3: ä¿å­˜æœç´¢å†å²ï¼ˆå¸¦æ—¶é—´æˆ³ï¼‰
    async function testDbUseCaseSearchHistory() {
      try {
        const timestamp = Date.now();
        const searchRecord = {
          _id: `search_history_${timestamp}`,
          keyword: "Electron API",
          timestamp: timestamp,
          type: "web_search",
          results: 42
        };

        await window.naimo.db.put(searchRecord);

        // è¯»å–æ‰€æœ‰æœç´¢å†å²
        const allHistory = await window.naimo.db.allDocs("search_history_");
        displayResult(
          "dbOutput",
          `âœ… æœç´¢å†å²å·²ä¿å­˜\n\nå½“å‰å…±æœ‰ ${allHistory.length} æ¡æœç´¢è®°å½•:\n${JSON.stringify(allHistory.slice(-5), null, 2)}`
        );
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    // æ¡ˆä¾‹4: æ‰¹é‡ä¿å­˜æ•°æ®
    async function testDbUseCaseBulkSave() {
      try {
        const bookmarks = [
          { _id: "bookmark_1", title: "GitHub", url: "https://github.com", category: "dev" },
          { _id: "bookmark_2", title: "Stack Overflow", url: "https://stackoverflow.com", category: "dev" },
          { _id: "bookmark_3", title: "MDN", url: "https://developer.mozilla.org", category: "docs" }
        ];

        const results = await window.naimo.db.bulkDocs(bookmarks);

        displayResult(
          "dbOutput",
          `âœ… æ‰¹é‡ä¿å­˜äº† ${bookmarks.length} ä¸ªä¹¦ç­¾:\n${JSON.stringify(results, null, 2)}`
        );
      } catch (error) {
        displayError("dbOutput", error);
      }
    }

    // ==================== é”®å€¼å­˜å‚¨ API æµ‹è¯• ====================
    async function testStorageSet() {
      try {
        const key = document.getElementById("storageKey").value;
        const value = document.getElementById("storageValue").value;
        await window.naimo.storage.setItem(key, value);
        displayResult("storageOutput", `å·²ä¿å­˜: ${key} = ${value}`);
      } catch (error) {
        displayError("storageOutput", error);
      }
    }

    async function testStorageGet() {
      try {
        const key = document.getElementById("storageKey").value;
        const result = await window.naimo.storage.getItem(key);
        displayResult("storageOutput", result || "æœªæ‰¾åˆ°è¯¥é”®");
      } catch (error) {
        displayError("storageOutput", error);
      }
    }

    async function testStorageGetAll() {
      try {
        const result = await window.naimo.storage.getAllItems();
        displayResult("storageOutput", result);
      } catch (error) {
        displayError("storageOutput", error);
      }
    }

    async function testStorageRemove() {
      try {
        const key = document.getElementById("storageKey").value;
        await window.naimo.storage.removeItem(key);
        displayResult("storageOutput", `å·²åˆ é™¤: ${key}`);
      } catch (error) {
        displayError("storageOutput", error);
      }
    }

    async function testStorageClear() {
      try {
        if (confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å­˜å‚¨å—ï¼Ÿ")) {
          await window.naimo.storage.clear();
          displayResult("storageOutput", "å·²æ¸…ç©ºæ‰€æœ‰å­˜å‚¨");
        }
      } catch (error) {
        displayError("storageOutput", error);
      }
    }

    // ==================== å‰ªè´´æ¿ API æµ‹è¯• ====================
    async function testClipboardWriteText() {
      try {
        const text = document.getElementById("clipboardText").value;
        await window.naimo.clipboard.writeText(text);
        displayResult("clipboardOutput", `å·²å†™å…¥å‰ªè´´æ¿: ${text}`);
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    async function testClipboardReadText() {
      try {
        const result = await window.naimo.clipboard.readText();
        displayResult("clipboardOutput", result || "å‰ªè´´æ¿ä¸ºç©º");
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    async function testClipboardHasText() {
      try {
        const result = await window.naimo.clipboard.hasText();
        displayResult(
          "clipboardOutput",
          `å‰ªè´´æ¿${result ? "æœ‰" : "æ²¡æœ‰"}æ–‡æœ¬`
        );
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    async function testClipboardHasImage() {
      try {
        const result = await window.naimo.clipboard.hasImage();
        displayResult(
          "clipboardOutput",
          `å‰ªè´´æ¿${result ? "æœ‰" : "æ²¡æœ‰"}å›¾ç‰‡`
        );
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    async function testClipboardReadImage() {
      try {
        const result = await window.naimo.clipboard.readImage();
        if (result) {
          displayResult(
            "clipboardOutput",
            `å·²è¯»å–å›¾ç‰‡ (${result.substring(0, 50)}...)`
          );
        } else {
          displayResult("clipboardOutput", "å‰ªè´´æ¿ä¸­æ²¡æœ‰å›¾ç‰‡");
        }
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    async function testClipboardClear() {
      try {
        await window.naimo.clipboard.clear();
        displayResult("clipboardOutput", "å·²æ¸…ç©ºå‰ªè´´æ¿");
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    // ==================== å‰ªè´´æ¿å®ç”¨æ¡ˆä¾‹ ====================

    // æ¡ˆä¾‹1: å¤åˆ¶JSONæ•°æ®ï¼ˆæ ¼å¼åŒ–ï¼‰
    async function testClipboardUseCaseCopyJson() {
      try {
        const data = {
          name: "Naimo Tools",
          version: "1.0.0",
          features: ["å¿«é€Ÿå¯åŠ¨", "æ’ä»¶ç³»ç»Ÿ", "æ•°æ®å­˜å‚¨"],
          config: {
            theme: "dark",
            language: "zh-CN"
          }
        };
        const jsonString = JSON.stringify(data, null, 2);
        await window.naimo.clipboard.writeText(jsonString);
        displayResult(
          "clipboardOutput",
          `âœ… JSONæ•°æ®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿:\n${jsonString}`
        );
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    // æ¡ˆä¾‹2: å¤åˆ¶Markdowné“¾æ¥
    async function testClipboardUseCaseCopyLink() {
      try {
        const title = "Naimo Tools - GitHub";
        const url = "https://github.com/imohuan/naimo_tools";
        const markdownLink = `[${title}](${url})`;
        await window.naimo.clipboard.writeText(markdownLink);
        displayResult(
          "clipboardOutput",
          `âœ… Markdowné“¾æ¥å·²å¤åˆ¶:\n${markdownLink}`
        );
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    // æ¡ˆä¾‹3: æ ¼å¼åŒ–æ–‡æœ¬å¹¶å¤åˆ¶
    async function testClipboardUseCaseFormatText() {
      try {
        const rawText = await window.naimo.clipboard.readText();
        if (!rawText) {
          displayResult("clipboardOutput", "âš ï¸ å‰ªè´´æ¿ä¸ºç©º");
          return;
        }
        // ç§»é™¤å¤šä½™ç©ºç™½å¹¶æ ¼å¼åŒ–
        const formatted = rawText.trim().replace(/\s+/g, " ");
        await window.naimo.clipboard.writeText(formatted);
        displayResult(
          "clipboardOutput",
          `âœ… æ–‡æœ¬å·²æ ¼å¼åŒ–å¹¶å¤åˆ¶:\nåŸæ–‡: ${rawText.substring(0, 50)}...\næ ¼å¼åŒ–å: ${formatted.substring(0, 50)}...`
        );
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    // æ¡ˆä¾‹4: ç›‘å¬å‰ªè´´æ¿å˜åŒ–ï¼ˆæ¼”ç¤ºï¼‰
    let clipboardMonitorInterval;
    async function testClipboardUseCaseMonitor() {
      try {
        if (clipboardMonitorInterval) {
          clearInterval(clipboardMonitorInterval);
          clipboardMonitorInterval = null;
          displayResult("clipboardOutput", "âŒ å·²åœæ­¢ç›‘å¬å‰ªè´´æ¿");
          return;
        }

        let lastText = await window.naimo.clipboard.readText();
        displayResult("clipboardOutput", "âœ… å¼€å§‹ç›‘å¬å‰ªè´´æ¿å˜åŒ–ï¼ˆå†æ¬¡ç‚¹å‡»åœæ­¢ï¼‰\nå½“å‰å†…å®¹: " + (lastText || "ç©º"));

        clipboardMonitorInterval = setInterval(async () => {
          const currentText = await window.naimo.clipboard.readText();
          if (currentText !== lastText) {
            lastText = currentText;
            displayResult(
              "clipboardOutput",
              `ğŸ”” æ£€æµ‹åˆ°å‰ªè´´æ¿å˜åŒ–:\n${currentText?.substring(0, 100) || "ç©º"}...`
            );
          }
        }, 1000);
      } catch (error) {
        displayError("clipboardOutput", error);
      }
    }

    // ==================== Shell æ“ä½œ API æµ‹è¯• ====================
    async function testShellOpenPath() {
      try {
        const path = document.getElementById("shellPath").value;
        await window.naimo.shell.openPath(path);
        displayResult("shellOutput", `å·²æ‰“å¼€è·¯å¾„: ${path}`);
      } catch (error) {
        displayError("shellOutput", error);
      }
    }

    async function testShellShowInFolder() {
      try {
        const path = document.getElementById("shellPath").value;
        await window.naimo.shell.showInFolder(path);
        displayResult("shellOutput", `å·²åœ¨æ–‡ä»¶å¤¹ä¸­æ˜¾ç¤º: ${path}`);
      } catch (error) {
        displayError("shellOutput", error);
      }
    }

    async function testShellOpenUrl() {
      try {
        await window.naimo.shell.openUrl("https://github.com");
        displayResult("shellOutput", "å·²åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ GitHub");
      } catch (error) {
        displayError("shellOutput", error);
      }
    }

    async function testShellBeep() {
      try {
        await window.naimo.shell.beep();
        displayResult("shellOutput", "å·²æ’­æ”¾ç³»ç»Ÿæç¤ºéŸ³");
      } catch (error) {
        displayError("shellOutput", error);
      }
    }

    // ==================== Shell å®ç”¨æ¡ˆä¾‹ ====================

    // æ¡ˆä¾‹1: å¿«é€Ÿæ‰“å¼€æ¡Œé¢æ–‡ä»¶å¤¹
    async function testShellUseCaseOpenDesktop() {
      try {
        const desktopPath = await window.naimo.system.getPath("desktop");
        await window.naimo.shell.openPath(desktopPath);
        displayResult("shellOutput", `âœ… å·²æ‰“å¼€æ¡Œé¢æ–‡ä»¶å¤¹:\n${desktopPath}`);
      } catch (error) {
        displayError("shellOutput", error);
      }
    }

    // æ¡ˆä¾‹2: å¿«é€Ÿæ‰“å¼€ä¸‹è½½æ–‡ä»¶å¤¹
    async function testShellUseCaseOpenDownloads() {
      try {
        const downloadsPath = await window.naimo.system.getPath("downloads");
        await window.naimo.shell.openPath(downloadsPath);
        displayResult("shellOutput", `âœ… å·²æ‰“å¼€ä¸‹è½½æ–‡ä»¶å¤¹:\n${downloadsPath}`);
      } catch (error) {
        displayError("shellOutput", error);
      }
    }

    // æ¡ˆä¾‹3: å¿«é€Ÿæ‰“å¼€æ–‡æ¡£æ–‡ä»¶å¤¹
    async function testShellUseCaseOpenDocs() {
      try {
        const docsPath = await window.naimo.system.getPath("documents");
        await window.naimo.shell.openPath(docsPath);
        displayResult("shellOutput", `âœ… å·²æ‰“å¼€æ–‡æ¡£æ–‡ä»¶å¤¹:\n${docsPath}`);
      } catch (error) {
        displayError("shellOutput", error);
      }
    }

    // æ¡ˆä¾‹4: å¿«é€Ÿæœç´¢ï¼ˆæ‰“å¼€GitHubï¼‰
    async function testShellUseCaseQuickSearch() {
      try {
        const keyword = "electron";
        const searchUrl = `https://github.com/search?q=${encodeURIComponent(keyword)}`;
        await window.naimo.shell.openUrl(searchUrl);
        displayResult("shellOutput", `âœ… å·²åœ¨æµè§ˆå™¨ä¸­æœç´¢:\nå…³é”®è¯: ${keyword}\nURL: ${searchUrl}`);
      } catch (error) {
        displayError("shellOutput", error);
      }
    }

    // ==================== ç³»ç»Ÿä¿¡æ¯ API æµ‹è¯• ====================
    async function testSystemNotify() {
      try {
        const message = document.getElementById("notifyMessage").value;
        const title = document.getElementById("notifyTitle").value;
        await window.naimo.system.notify(message, title);
        displayResult("systemOutput", "å·²å‘é€ç³»ç»Ÿé€šçŸ¥");
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemGetVersion() {
      try {
        const result = await window.naimo.system.getVersion();
        displayResult("systemOutput", `åº”ç”¨ç‰ˆæœ¬: ${result}`);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemGetName() {
      try {
        const result = await window.naimo.system.getName();
        displayResult("systemOutput", `åº”ç”¨åç§°: ${result}`);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemGetDeviceId() {
      try {
        const result = await window.naimo.system.getDeviceId();
        displayResult("systemOutput", `è®¾å¤‡ID: ${result}`);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemIsMac() {
      try {
        const result = await window.naimo.system.isMac();
        displayResult("systemOutput", `æ˜¯å¦ä¸º Mac: ${result}`);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemIsWindows() {
      try {
        const result = await window.naimo.system.isWindows();
        displayResult("systemOutput", `æ˜¯å¦ä¸º Windows: ${result}`);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemIsLinux() {
      try {
        const result = await window.naimo.system.isLinux();
        displayResult("systemOutput", `æ˜¯å¦ä¸º Linux: ${result}`);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    async function testSystemGetPath() {
      try {
        const paths = {
          home: await window.naimo.system.getPath("home"),
          temp: await window.naimo.system.getPath("temp"),
          desktop: await window.naimo.system.getPath("desktop"),
        };
        displayResult("systemOutput", paths);
      } catch (error) {
        displayError("systemOutput", error);
      }
    }

    // ==================== å±å¹•ä¸æ˜¾ç¤ºå™¨ API æµ‹è¯• ====================
    async function testScreenGetSources() {
      try {
        const result = await window.naimo.screen.getSources({
          types: ["screen", "window"],
          thumbnailSize: { width: 150, height: 150 },
        });
        displayResult("screenOutput", `æ‰¾åˆ° ${result.length} ä¸ªæº`);
      } catch (error) {
        displayError("screenOutput", error);
      }
    }

    async function testScreenGetCursorPosition() {
      try {
        const result = await window.naimo.screen.getCursorPosition();
        displayResult("screenOutput", result);
      } catch (error) {
        displayError("screenOutput", error);
      }
    }

    async function testScreenGetPrimaryDisplay() {
      try {
        const result = await window.naimo.screen.getPrimaryDisplay();
        displayResult("screenOutput", result);
      } catch (error) {
        displayError("screenOutput", error);
      }
    }

    async function testScreenGetAllDisplays() {
      try {
        const result = await window.naimo.screen.getAllDisplays();
        displayResult("screenOutput", result);
      } catch (error) {
        displayError("screenOutput", error);
      }
    }

    async function testScreenCapture() {
      try {
        const result = await window.naimo.screen.capture();
        displayResult("screenOutput", `æˆªå›¾å·²ä¿å­˜: ${result}`);
      } catch (error) {
        displayError("screenOutput", error);
      }
    }

    // ==================== å¯¹è¯æ¡† API æµ‹è¯• ====================
    async function testDialogShowOpen() {
      try {
        const result = await window.naimo.dialog.showOpen({
          title: "é€‰æ‹©æ–‡ä»¶",
          properties: ["openFile", "multiSelections"],
        });
        displayResult("dialogOutput", result);
      } catch (error) {
        displayError("dialogOutput", error);
      }
    }

    async function testDialogShowSave() {
      try {
        const result = await window.naimo.dialog.showSave({
          title: "ä¿å­˜æ–‡ä»¶",
          defaultPath: "test.txt",
        });
        displayResult("dialogOutput", result);
      } catch (error) {
        displayError("dialogOutput", error);
      }
    }

    async function testDialogShowMessage() {
      try {
        const result = await window.naimo.dialog.showMessage({
          type: "info",
          title: "æµ‹è¯•æ¶ˆæ¯",
          message: "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ¶ˆæ¯æ¡†",
          buttons: ["ç¡®å®š", "å–æ¶ˆ"],
        });
        displayResult("dialogOutput", result);
      } catch (error) {
        displayError("dialogOutput", error);
      }
    }

    async function testDialogShowError() {
      try {
        await window.naimo.dialog.showError("é”™è¯¯æ ‡é¢˜", "è¿™æ˜¯ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯");
        displayResult("dialogOutput", "å·²æ˜¾ç¤ºé”™è¯¯å¯¹è¯æ¡†");
      } catch (error) {
        displayError("dialogOutput", error);
      }
    }

    // ==================== å¯¹è¯æ¡†å®ç”¨æ¡ˆä¾‹ ====================

    // æ¡ˆä¾‹1: é€‰æ‹©å›¾ç‰‡æ–‡ä»¶
    async function testDialogUseCaseSelectImage() {
      try {
        const result = await window.naimo.dialog.showOpen({
          title: "é€‰æ‹©å›¾ç‰‡",
          filters: [
            { name: "å›¾ç‰‡æ–‡ä»¶", extensions: ["png", "jpg", "jpeg", "gif", "webp"] },
            { name: "æ‰€æœ‰æ–‡ä»¶", extensions: ["*"] }
          ],
          properties: ["openFile"]
        });

        if (result && result.length > 0) {
          displayResult(
            "dialogOutput",
            `âœ… å·²é€‰æ‹©å›¾ç‰‡:\n${result[0]}`
          );
        } else {
          displayResult("dialogOutput", "âš ï¸ æœªé€‰æ‹©æ–‡ä»¶");
        }
      } catch (error) {
        displayError("dialogOutput", error);
      }
    }

    // æ¡ˆä¾‹2: é€‰æ‹©å¤šä¸ªæ–‡ä»¶
    async function testDialogUseCaseSelectMultiFiles() {
      try {
        const result = await window.naimo.dialog.showOpen({
          title: "é€‰æ‹©å¤šä¸ªæ–‡ä»¶",
          properties: ["openFile", "multiSelections"]
        });

        if (result && result.length > 0) {
          displayResult(
            "dialogOutput",
            `âœ… å·²é€‰æ‹© ${result.length} ä¸ªæ–‡ä»¶:\n${result.map((f, i) => `${i + 1}. ${f}`).join("\n")}`
          );
        } else {
          displayResult("dialogOutput", "âš ï¸ æœªé€‰æ‹©æ–‡ä»¶");
        }
      } catch (error) {
        displayError("dialogOutput", error);
      }
    }

    // æ¡ˆä¾‹3: å¯¼å‡ºJSONé…ç½®æ–‡ä»¶
    async function testDialogUseCaseExportJson() {
      try {
        const result = await window.naimo.dialog.showSave({
          title: "å¯¼å‡ºé…ç½®æ–‡ä»¶",
          defaultPath: "naimo_config.json",
          filters: [
            { name: "JSONæ–‡ä»¶", extensions: ["json"] },
            { name: "æ‰€æœ‰æ–‡ä»¶", extensions: ["*"] }
          ]
        });

        if (result) {
          // è¿™é‡Œå¯ä»¥ä¿å­˜æ–‡ä»¶
          const config = {
            version: "1.0.0",
            settings: {
              theme: "dark",
              language: "zh-CN"
            },
            exportTime: new Date().toISOString()
          };

          displayResult(
            "dialogOutput",
            `âœ… é€‰æ‹©ä¿å­˜è·¯å¾„:\n${result}\n\né…ç½®å†…å®¹:\n${JSON.stringify(config, null, 2)}\n\nğŸ’¡ æç¤ºï¼šå®é™…ä½¿ç”¨æ—¶å¯é…åˆæ–‡ä»¶ç³»ç»ŸAPIä¿å­˜`
          );
        } else {
          displayResult("dialogOutput", "âš ï¸ å–æ¶ˆä¿å­˜");
        }
      } catch (error) {
        displayError("dialogOutput", error);
      }
    }

    // æ¡ˆä¾‹4: ç¡®è®¤å¯¹è¯æ¡†
    async function testDialogUseCaseConfirm() {
      try {
        const result = await window.naimo.dialog.showMessage({
          type: "question",
          title: "ç¡®è®¤æ“ä½œ",
          message: "æ˜¯å¦è¦åˆ é™¤æ‰€æœ‰æµ‹è¯•æ•°æ®ï¼Ÿ",
          detail: "æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼Œè¯·è°¨æ…é€‰æ‹©",
          buttons: ["å–æ¶ˆ", "ç¡®å®š"],
          defaultId: 0,
          cancelId: 0
        });

        if (result.response === 1) {
          displayResult(
            "dialogOutput",
            "âœ… ç”¨æˆ·ç‚¹å‡»äº†ã€ç¡®å®šã€‘\nå¯ä»¥ç»§ç»­æ‰§è¡Œåˆ é™¤æ“ä½œ"
          );
        } else {
          displayResult(
            "dialogOutput",
            "âŒ ç”¨æˆ·ç‚¹å‡»äº†ã€å–æ¶ˆã€‘\næ“ä½œå·²å–æ¶ˆ"
          );
        }
      } catch (error) {
        displayError("dialogOutput", error);
      }
    }

    // ==================== è¾“å…¥æ¨¡æ‹Ÿ API æµ‹è¯• ====================
    async function testInputPasteText() {
      try {
        const text = document.getElementById("inputText").value;
        await window.naimo.input.pasteText(text);
        displayResult(
          "inputOutput",
          "æ–‡æœ¬å·²ç²˜è´´ï¼ˆè¯·å°†ç„¦ç‚¹ç§»åˆ°å…¶ä»–åº”ç”¨æŸ¥çœ‹æ•ˆæœï¼‰"
        );
      } catch (error) {
        displayError("inputOutput", error);
      }
    }

    async function testInputSimulateKeyPress() {
      try {
        const key = document.getElementById("inputKey").value;
        await window.naimo.input.simulateKeyPress(key);
        displayResult("inputOutput", `å·²æ¨¡æ‹ŸæŒ‰é”®: ${key}`);
      } catch (error) {
        displayError("inputOutput", error);
      }
    }

    // ==================== ç»¼åˆç¤ºä¾‹ ====================

    // è¿è¡Œç»¼åˆç¤ºä¾‹ï¼šæ¼”ç¤ºå¤šä¸ªAPIçš„ç»„åˆä½¿ç”¨
    async function runComprehensiveExample() {
      const output = document.getElementById("comprehensiveOutput");
      output.style.display = "block";
      output.className = "output success";

      let log = "ğŸš€ å¼€å§‹è¿è¡Œç»¼åˆç¤ºä¾‹...\n\n";

      try {
        // 1. è·å–ç³»ç»Ÿä¿¡æ¯
        log += "ğŸ“ æ­¥éª¤ 1: è·å–ç³»ç»Ÿä¿¡æ¯\n";
        const version = await window.naimo.system.getVersion();
        const isWindows = await window.naimo.system.isWindows();
        const deviceId = await window.naimo.system.getDeviceId();
        log += `  âœ“ åº”ç”¨ç‰ˆæœ¬: ${version}\n`;
        log += `  âœ“ æ“ä½œç³»ç»Ÿ: ${isWindows ? "Windows" : "å…¶ä»–"}\n`;
        log += `  âœ“ è®¾å¤‡ID: ${deviceId}\n\n`;

        // 2. ä¿å­˜ç”¨æˆ·é…ç½®åˆ°æ•°æ®åº“
        log += "ğŸ“ æ­¥éª¤ 2: ä¿å­˜ç”¨æˆ·é…ç½®åˆ°æ•°æ®åº“\n";
        const userConfig = {
          _id: "demo_user_config",
          username: "demo_user",
          preferences: {
            theme: "dark",
            language: "zh-CN",
            notifications: true
          },
          deviceId: deviceId,
          lastLogin: new Date().toISOString()
        };
        const dbResult = await window.naimo.db.put(userConfig);
        log += `  âœ“ é…ç½®å·²ä¿å­˜: ${dbResult.id}\n`;
        log += `  âœ“ ç‰ˆæœ¬å·: ${dbResult.rev}\n\n`;

        // 3. ä¿å­˜ç®€å•é…ç½®åˆ°é”®å€¼å­˜å‚¨
        log += "ğŸ“ æ­¥éª¤ 3: ä¿å­˜å¿«æ·é”®åˆ°é”®å€¼å­˜å‚¨\n";
        await window.naimo.storage.setItem("last_opened", new Date().toISOString());
        await window.naimo.storage.setItem("launch_count", "1");
        log += `  âœ“ å¯åŠ¨æ—¶é—´å·²è®°å½•\n\n`;

        // 4. å¤åˆ¶é…ç½®ä¿¡æ¯åˆ°å‰ªè´´æ¿
        log += "ğŸ“ æ­¥éª¤ 4: å¤åˆ¶é…ç½®ä¿¡æ¯åˆ°å‰ªè´´æ¿\n";
        const configText = JSON.stringify(userConfig, null, 2);
        await window.naimo.clipboard.writeText(configText);
        log += `  âœ“ é…ç½®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿\n\n`;

        // 5. å‘é€æˆåŠŸé€šçŸ¥
        log += "ğŸ“ æ­¥éª¤ 5: å‘é€ç³»ç»Ÿé€šçŸ¥\n";
        await window.naimo.system.notify(
          "ç»¼åˆç¤ºä¾‹æ‰§è¡ŒæˆåŠŸï¼é…ç½®å·²ä¿å­˜å¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚",
          "Naimo Tools"
        );
        log += `  âœ“ é€šçŸ¥å·²å‘é€\n\n`;

        // 6. è·å–ä¿å­˜çš„é…ç½®å¹¶éªŒè¯
        log += "ğŸ“ æ­¥éª¤ 6: éªŒè¯ä¿å­˜çš„é…ç½®\n";
        const savedConfig = await window.naimo.db.get("demo_user_config");
        const lastOpened = await window.naimo.storage.getItem("last_opened");
        log += `  âœ“ æ•°æ®åº“é…ç½®éªŒè¯: ${savedConfig ? "æˆåŠŸ" : "å¤±è´¥"}\n`;
        log += `  âœ“ é”®å€¼å­˜å‚¨éªŒè¯: ${lastOpened ? "æˆåŠŸ" : "å¤±è´¥"}\n\n`;

        log += "âœ… ç»¼åˆç¤ºä¾‹æ‰§è¡Œå®Œæˆï¼\n\n";
        log += "ğŸ’¡ æç¤ºï¼š\n";
        log += "  â€¢ é…ç½®å·²ä¿å­˜åˆ°æ•°æ®åº“ï¼ˆæ–‡æ¡£ID: demo_user_configï¼‰\n";
        log += "  â€¢ å¯åŠ¨æ—¶é—´å·²ä¿å­˜åˆ°é”®å€¼å­˜å‚¨\n";
        log += "  â€¢ é…ç½®ä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼ˆå¯ç›´æ¥ç²˜è´´ï¼‰\n";
        log += "  â€¢ ç³»ç»Ÿé€šçŸ¥å·²å‘é€\n";

        output.textContent = log;

      } catch (error) {
        log += `\nâŒ æ‰§è¡Œå¤±è´¥: ${error.message}`;
        output.className = "output error";
        output.textContent = log;
      }
    }

    // æ˜¾ç¤ºAPIæ–‡æ¡£
    function showApiDocs() {
      const output = document.getElementById("comprehensiveOutput");
      output.style.display = "block";
      output.className = "output";

      const docs = `
ğŸ“š Naimo API æ–‡æ¡£

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸªŸ çª—å£ç®¡ç† (naimo.window)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ hide()                    - éšè—å½“å‰çª—å£
â€¢ show()                    - æ˜¾ç¤ºå½“å‰çª—å£
â€¢ close()                   - å…³é—­å½“å‰çª—å£
â€¢ minimize()                - æœ€å°åŒ–çª—å£
â€¢ maximize()                - æœ€å¤§åŒ–/è¿˜åŸçª—å£
â€¢ setHeight(height)         - è®¾ç½®çª—å£é«˜åº¦
â€¢ setSize(width, height)    - è®¾ç½®çª—å£å°ºå¯¸
â€¢ create(url, options)      - åˆ›å»ºæ–°çª—å£

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¾ æ–‡æ¡£æ•°æ®åº“ (naimo.db) - åŸºäº lowdb
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ put(doc)                  - ä¿å­˜/æ›´æ–°æ–‡æ¡£ï¼ˆéœ€è¦ _idï¼‰
â€¢ get(id)                   - è·å–æ–‡æ¡£
â€¢ remove(id)                - åˆ é™¤æ–‡æ¡£
â€¢ allDocs(prefix?)          - è·å–æ‰€æœ‰æ–‡æ¡£ï¼ˆå¯æŒ‰å‰ç¼€è¿‡æ»¤ï¼‰
â€¢ bulkDocs(docs[])          - æ‰¹é‡ä¿å­˜æ–‡æ¡£
â€¢ putAttachment(id, data, type) - ä¿å­˜é™„ä»¶
â€¢ getAttachment(id)         - è·å–é™„ä»¶

ğŸ’¡ ç‰¹ç‚¹ï¼šæ”¯æŒ _rev ç‰ˆæœ¬æ§åˆ¶ï¼Œæ¯ä¸ªæ’ä»¶ç‹¬ç«‹æ•°æ®åº“

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ—„ï¸ é”®å€¼å­˜å‚¨ (naimo.storage) - å…¼å®¹ localStorage
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ setItem(key, value)       - ä¿å­˜é”®å€¼å¯¹
â€¢ getItem(key)              - è·å–å€¼
â€¢ removeItem(key)           - åˆ é™¤é”®
â€¢ clear()                   - æ¸…ç©ºæ‰€æœ‰
â€¢ getAllItems()             - è·å–æ‰€æœ‰é…ç½®

ğŸ’¡ é€‚ç”¨äºï¼šç®€å•é…ç½®ã€ç¼“å­˜æ•°æ®

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ å‰ªè´´æ¿ (naimo.clipboard)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ readText()                - è¯»å–æ–‡æœ¬
â€¢ writeText(text)           - å†™å…¥æ–‡æœ¬
â€¢ readImage()               - è¯»å–å›¾ç‰‡ï¼ˆbase64ï¼‰
â€¢ writeImage(imageData)     - å†™å…¥å›¾ç‰‡
â€¢ hasText()                 - æ£€æŸ¥æ˜¯å¦æœ‰æ–‡æœ¬
â€¢ hasImage()                - æ£€æŸ¥æ˜¯å¦æœ‰å›¾ç‰‡
â€¢ clear()                   - æ¸…ç©ºå‰ªè´´æ¿

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš Shell æ“ä½œ (naimo.shell)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ openPath(path)            - æ‰“å¼€æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹
â€¢ openUrl(url)              - åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€URL
â€¢ showInFolder(path)        - åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ˜¾ç¤º
â€¢ moveToTrash(path)         - ç§»åŠ¨åˆ°å›æ”¶ç«™
â€¢ beep()                    - æ’­æ”¾ç³»ç»Ÿæç¤ºéŸ³

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’» ç³»ç»Ÿä¿¡æ¯ (naimo.system)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ notify(message, title?)   - å‘é€ç³»ç»Ÿé€šçŸ¥
â€¢ getPath(name)             - è·å–ç³»ç»Ÿè·¯å¾„
  å¯ç”¨è·¯å¾„: home, desktop, documents, downloads,
           temp, appData, userData, logs
â€¢ getDeviceId()             - è·å–è®¾å¤‡å”¯ä¸€ID
â€¢ getVersion()              - è·å–åº”ç”¨ç‰ˆæœ¬
â€¢ getName()                 - è·å–åº”ç”¨åç§°
â€¢ getFileIcon(path)         - è·å–æ–‡ä»¶å›¾æ ‡
â€¢ isMac()                   - æ˜¯å¦Macç³»ç»Ÿ
â€¢ isWindows()               - æ˜¯å¦Windowsç³»ç»Ÿ
â€¢ isLinux()                 - æ˜¯å¦Linuxç³»ç»Ÿ

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ–¥ï¸ å±å¹•ä¸æ˜¾ç¤ºå™¨ (naimo.screen)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ capture(options?)         - æˆªå›¾å¹¶ä¿å­˜
â€¢ getSources(options)       - è·å–å±å¹•å’Œçª—å£æº
â€¢ getCursorPosition()       - è·å–é¼ æ ‡ä½ç½®
â€¢ getPrimaryDisplay()       - è·å–ä¸»æ˜¾ç¤ºå™¨ä¿¡æ¯
â€¢ getAllDisplays()          - è·å–æ‰€æœ‰æ˜¾ç¤ºå™¨
â€¢ getDisplayNearestPoint(point) - è·å–æŒ‡å®šåæ ‡çš„æ˜¾ç¤ºå™¨
â€¢ screenToDipPoint(point)   - å±å¹•åæ ‡è½¬DIP
â€¢ dipToScreenPoint(point)   - DIPåæ ‡è½¬å±å¹•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¬ å¯¹è¯æ¡† (naimo.dialog)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ showOpen(options)         - æ˜¾ç¤ºæ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†
â€¢ showSave(options)         - æ˜¾ç¤ºä¿å­˜æ–‡ä»¶å¯¹è¯æ¡†
â€¢ showMessage(options)      - æ˜¾ç¤ºæ¶ˆæ¯æ¡†
â€¢ showError(title, content) - æ˜¾ç¤ºé”™è¯¯å¯¹è¯æ¡†

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ¨ï¸ è¾“å…¥æ¨¡æ‹Ÿ (naimo.input)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ pasteText(text)           - æ¨¡æ‹Ÿç²˜è´´æ–‡æœ¬
â€¢ pasteImage(imageData)     - æ¨¡æ‹Ÿç²˜è´´å›¾ç‰‡
â€¢ pasteFile(filePath)       - æ¨¡æ‹Ÿç²˜è´´æ–‡ä»¶
â€¢ simulateKeyPress(key)     - æ¨¡æ‹ŸæŒ‰é”®
â€¢ simulateHotkey(modifiers, key) - æ¨¡æ‹Ÿç»„åˆé”®

âš ï¸ æ³¨æ„ï¼šè¾“å…¥æ¨¡æ‹Ÿéœ€è¦çª—å£å¤±å»ç„¦ç‚¹

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ æ—¥å¿—ç³»ç»Ÿ (naimo.log)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ error(message, ...args)   - è®°å½•é”™è¯¯
â€¢ warn(message, ...args)    - è®°å½•è­¦å‘Š
â€¢ info(message, ...args)    - è®°å½•ä¿¡æ¯
â€¢ debug(message, ...args)   - è®°å½•è°ƒè¯•ä¿¡æ¯
â€¢ throw_error(error, options?) - æŠ›å‡ºé”™è¯¯å¹¶æ˜¾ç¤ºå¯¹è¯æ¡†

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Œ æœ€ä½³å®è·µï¼š

1ï¸âƒ£ æ•°æ®å­˜å‚¨é€‰æ‹©ï¼š
   â€¢ å¤æ‚æ•°æ®ã€éœ€è¦æŸ¥è¯¢ â†’ ä½¿ç”¨ dbï¼ˆæ–‡æ¡£æ•°æ®åº“ï¼‰
   â€¢ ç®€å•é…ç½®ã€é”®å€¼å¯¹    â†’ ä½¿ç”¨ storageï¼ˆé”®å€¼å­˜å‚¨ï¼‰

2ï¸âƒ£ é”™è¯¯å¤„ç†ï¼š
   â€¢ æ‰€æœ‰ API è°ƒç”¨éƒ½åº”è¯¥ä½¿ç”¨ try-catch
   â€¢ ä½¿ç”¨ naimo.log.error è®°å½•é”™è¯¯æ—¥å¿—

3ï¸âƒ£ æ•°æ®éš”ç¦»ï¼š
   â€¢ æ¯ä¸ªæ’ä»¶çš„æ•°æ®åº“æ˜¯ç‹¬ç«‹çš„
   â€¢ ä½¿ç”¨æœ‰æ„ä¹‰çš„ _id å‰ç¼€ç»„ç»‡æ•°æ®

4ï¸âƒ£ æ€§èƒ½ä¼˜åŒ–ï¼š
   â€¢ æ‰¹é‡æ“ä½œä½¿ç”¨ bulkDocs
   â€¢ é¿å…é¢‘ç¹çš„ allDocs è°ƒç”¨
   â€¢ ä½¿ç”¨å‰ç¼€è¿‡æ»¤å‡å°‘æ•°æ®ä¼ è¾“

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”— ç›¸å…³èµ„æºï¼š
   â€¢ GitHub: https://github.com/imohuan/naimo_tools
   â€¢ æ–‡æ¡£: plugins-doc/uTools-APIå…¼å®¹å±‚å®æ–½æ–¹æ¡ˆ.md
`;

      output.textContent = docs;
    }

    // ==================== ç½‘é¡µè‡ªåŠ¨åŒ– API æµ‹è¯• ====================

    // ç®€å•è·å– HTML
    async function testAutomationFetchHTML() {
      try {
        const url = document.getElementById("automationUrl").value;
        displayResult("automationOutput", "æ­£åœ¨è·å–ç½‘é¡µå†…å®¹...");

        const result = await window.naimo.automation.fetchHTML(url);

        // æ˜¾ç¤º HTML çš„å‰ 500 ä¸ªå­—ç¬¦
        const preview = result.html.substring(0, 500);
        const title = result.getTitle();
        const links = result.getLinks();

        displayResult(
          "automationOutput",
          `âœ… æˆåŠŸè·å–ç½‘é¡µå†…å®¹:\n\nğŸ“„ æ ‡é¢˜: ${title}\nğŸ“ å†…å®¹é•¿åº¦: ${result.html.length} å­—ç¬¦\nğŸ”— é“¾æ¥æ•°: ${links?.length || 0}\n\nå†…å®¹é¢„è§ˆ:\n${preview}...\n\nğŸ’¡ æç¤ºï¼šå®Œæ•´å†…å®¹å·²è®°å½•åœ¨æ§åˆ¶å°`
        );
        console.log("å®Œæ•´ç»“æœ:", result);
        console.log("HTML:", result.html);
        console.log("æ ‡é¢˜:", title);
        console.log("é“¾æ¥:", links);
      } catch (error) {
        displayError("automationOutput", error);
      }
    }

    // è·å– JSON æ•°æ®
    async function testAutomationFetchJSON() {
      try {
        displayResult("automationOutput", "æ­£åœ¨è·å– JSON æ•°æ®...");

        // ä½¿ç”¨å…¬å¼€çš„ JSON API è¿›è¡Œæµ‹è¯•
        const jsonUrl = "https://api.github.com/repos/electron/electron";

        const data = await window.naimo.automation.fetchJSON(jsonUrl);

        displayResult(
          "automationOutput",
          `âœ… æˆåŠŸè·å– JSON æ•°æ®:\n\nURL: ${jsonUrl}\n\næ•°æ®:\n${JSON.stringify(data, null, 2).substring(0, 800)}...\n\nğŸ’¡ æç¤ºï¼š\n- è¿™æ˜¯ Electron ä»“åº“çš„ä¿¡æ¯\n- å®Œæ•´æ•°æ®å·²è®°å½•åœ¨æ§åˆ¶å°\n- å¯ä»¥ä¿®æ”¹ URL æµ‹è¯•å…¶ä»– API`
        );
        console.log("å®Œæ•´ JSON æ•°æ®:", data);
      } catch (error) {
        displayError("automationOutput", error);
      }
    }

    // è‡ªåŠ¨åŒ–ä»»åŠ¡ç¤ºä¾‹
    async function testAutomationWithSteps() {
      try {
        displayResult("automationOutput", "æ­£åœ¨æ‰§è¡Œè‡ªåŠ¨åŒ–ä»»åŠ¡...");

        const config = {
          url: "https://www.example.com",
          show: true, // æ˜¾ç¤ºæµè§ˆå™¨çª—å£
          timeout: 15000,
          steps: [
            // ç­‰å¾…é¡µé¢åŠ è½½
            { action: "waitForSelector", args: ["h1"] },
            // ç­‰å¾… 1 ç§’
            { action: "waitForTimeout", args: [1000] }
          ]
        };

        const html = await window.naimo.automation.automateWithJson(config);

        const preview = html.substring(0, 500);
        displayResult(
          "automationOutput",
          `âœ… è‡ªåŠ¨åŒ–ä»»åŠ¡æ‰§è¡Œå®Œæˆ:\n\né…ç½®:\n${JSON.stringify(config, null, 2)}\n\nè·å–åˆ°çš„å†…å®¹ (å‰ 500 å­—ç¬¦):\n${preview}...`
        );
        console.log("å®Œæ•´ HTML:", html);
      } catch (error) {
        displayError("automationOutput", error);
      }
    }

    // ç™¾åº¦æœç´¢ç¤ºä¾‹
    async function testAutomationSearch() {
      try {
        displayResult("automationOutput", "æ­£åœ¨æ‰§è¡Œç™¾åº¦æœç´¢...");

        const config = {
          url: "https://www.baidu.com",
          show: true,
          timeout: 20000,
          steps: [
            // ç­‰å¾…æœç´¢æ¡†åŠ è½½
            { action: "waitForSelector", args: ["#kw"] },
            // åœ¨æœç´¢æ¡†è¾“å…¥å†…å®¹
            { action: "type", args: ["#kw", "Electron æ•™ç¨‹"] },
            // ç­‰å¾…ä¸€ä¸‹
            { action: "waitForTimeout", args: [500] },
            // ç‚¹å‡»æœç´¢æŒ‰é’®
            { action: "click", args: ["#su"] },
            // ç­‰å¾…ç»“æœåŠ è½½
            { action: "waitForTimeout", args: [2000] }
          ]
        };

        const html = await window.naimo.automation.automateWithJson(config);

        displayResult(
          "automationOutput",
          `âœ… ç™¾åº¦æœç´¢ä»»åŠ¡æ‰§è¡Œå®Œæˆ!\n\næœç´¢å…³é”®è¯: Electron æ•™ç¨‹\nè·å–åˆ°çš„å†…å®¹é•¿åº¦: ${html.length} å­—ç¬¦\n\nğŸ’¡ æç¤ºï¼š\n- å·²åœ¨æ–°çª—å£ä¸­æ¼”ç¤ºæœç´¢è¿‡ç¨‹\n- å®Œæ•´ç»“æœå·²è®°å½•åœ¨æ§åˆ¶å°`
        );
        console.log("æœç´¢ç»“æœ HTML:", html);
      } catch (error) {
        displayError("automationOutput", error);
      }
    }

    // ==================== ç½‘é¡µè‡ªåŠ¨åŒ–å®ç”¨æ¡ˆä¾‹ ====================

    // æ¡ˆä¾‹1: è·å–ç½‘é¡µæ ‡é¢˜
    async function testAutomationUseCaseGetTitle() {
      try {
        const url = document.getElementById("automationUrl").value || "https://www.baidu.com";
        displayResult("automationOutput", `æ­£åœ¨è·å– ${url} çš„æ ‡é¢˜...`);

        const config = {
          url: url,
          show: true,
          timeout: 10000,
          steps: [
            { action: "waitForTimeout", args: [1000] }
          ]
        };

        const html = await window.naimo.automation.automateWithJson(config);

        // ä» HTML ä¸­æå–æ ‡é¢˜
        const titleMatch = html.match(/<title>(.*?)<\/title>/i);
        const title = titleMatch ? titleMatch[1] : "æœªæ‰¾åˆ°æ ‡é¢˜";

        displayResult(
          "automationOutput",
          `âœ… ç½‘é¡µæ ‡é¢˜è·å–æˆåŠŸ:\n\nURL: ${url}\næ ‡é¢˜: ${title}`
        );
      } catch (error) {
        displayError("automationOutput", error);
      }
    }

    // æ¡ˆä¾‹2: API æ•°æ®è·å–ï¼ˆfetchJSON + fetchHTML ç»“åˆä½¿ç”¨ï¼‰
    async function testAutomationUseCaseAPIData() {
      try {
        displayResult("automationOutput", "æ­£åœ¨æ¼”ç¤º API æ•°æ®è·å–...");

        // è·å– GitHub ä»“åº“ä¿¡æ¯
        const repoData = await window.naimo.automation.fetchJSON(
          "https://api.github.com/repos/electron/electron"
        );

        // è·å– GitHub ä¸»é¡µï¼ˆæ¼”ç¤º fetchHTMLï¼‰
        const htmlResult = await window.naimo.automation.fetchHTML(
          "https://github.com/electron/electron"
        );

        displayResult(
          "automationOutput",
          `âœ… API æ•°æ®è·å–å®Œæˆ:\n\nğŸ“Š JSON API æ•°æ® (fetchJSON):\n- ä»“åº“å: ${repoData.name}\n- æè¿°: ${repoData.description}\n- Star æ•°: ${repoData.stargazers_count}\n- Fork æ•°: ${repoData.forks_count}\n- å¼€æºåè®®: ${repoData.license?.name}\n\nğŸ“„ HTML æ•°æ® (fetchHTML):\n- é¡µé¢æ ‡é¢˜: ${htmlResult.getTitle()}\n- é“¾æ¥æ•°é‡: ${htmlResult.getLinks()?.length || 0}\n\nğŸ’¡ åº”ç”¨åœºæ™¯:\n- API æ•°æ®èšåˆ\n- ç½‘é¡µå†…å®¹åˆ†æ\n- æ•°æ®å¯¹æ¯”éªŒè¯\n- å¤šæºæ•°æ®æ•´åˆ`
        );
        console.log("JSON æ•°æ®:", repoData);
        console.log("HTML ç»“æœ:", htmlResult);
      } catch (error) {
        displayError("automationOutput", error);
      }
    }

    // æ¡ˆä¾‹3: ç™¾åº¦æœç´¢è‡ªåŠ¨åŒ–ï¼ˆå®Œæ•´æµç¨‹ + å®æ—¶æ“ä½œå±•ç¤ºï¼‰
    async function testAutomationUseCaseLogin() {
      try {
        displayResult("automationOutput", "æ­£åœ¨æ‰§è¡Œç™¾åº¦æœç´¢è‡ªåŠ¨åŒ–ä»»åŠ¡...\n\nğŸ“Š æ“ä½œçŠ¶æ€å°†å®æ—¶å±•ç¤ºåœ¨é¡µé¢ä¸Š");

        const searchKeyword = "Electron æ¡Œé¢åº”ç”¨å¼€å‘";

        const config = {
          url: "https://www.baidu.com",
          show: true,
          timeout: 20000,
          requestInterception: {
            enabled: true,
            regex: [
              /\.(png|jpg|jpeg|gif|svg|webp|ico)$/i,
              /\.(woff2?|ttf|eot)$/i
            ]
          },
          steps: [
            // æ­¥éª¤ 1: ç­‰å¾…æœç´¢æ¡†åŠ è½½
            { action: "waitForSelector", args: ["#kw", { timeout: 5000 }] },
            {
              action: "evaluate",
              args: [`
                const status = document.createElement('div');
                status.id = 'automation-status';
                status.style.cssText = 'position:fixed;top:20px;right:20px;background:rgba(0,0,0,0.8);color:#fff;padding:20px;border-radius:8px;font-size:16px;z-index:9999;max-width:300px;';
                status.innerHTML = 'âœ… æ­¥éª¤ 1/5: é¡µé¢åŠ è½½å®Œæˆ';
                document.body.appendChild(status);
              `]
            },
            { action: "waitForTimeout", args: [800] },

            // æ­¥éª¤ 2: æ¸…ç©ºæœç´¢æ¡†
            { action: "waitForSelector", args: ["#kw", { timeout: 5000 }] },
            { action: "click", args: ["#kw"] },
            { action: "evaluate", args: [`document.querySelector('#kw').value = '';`] },
            {
              action: "evaluate",
              args: [`document.querySelector('#automation-status').innerHTML = 'âœ… æ­¥éª¤ 2/5: æœç´¢æ¡†å·²æ¸…ç©º';`]
            },
            { action: "waitForTimeout", args: [500] },

            // æ­¥éª¤ 3: è¾“å…¥æœç´¢å…³é”®è¯
            { action: "type", args: ["#kw", searchKeyword, { delay: 100 }] },
            {
              action: "evaluate",
              args: [`document.querySelector('#automation-status').innerHTML = 'âœ… æ­¥éª¤ 3/5: æ­£åœ¨è¾“å…¥æœç´¢è¯<br>"${searchKeyword}"';`]
            },
            { action: "waitForTimeout", args: [800] },

            // æ­¥éª¤ 4: ç‚¹å‡»æœç´¢æŒ‰é’®
            {
              action: "evaluate",
              args: [`document.querySelector('#automation-status').innerHTML = 'âœ… æ­¥éª¤ 4/5: å‡†å¤‡æœç´¢...';`]
            },
            { action: "waitForTimeout", args: [500] },
            { action: "click", args: ["#su"] },

            // æ­¥éª¤ 5: ç­‰å¾…æœç´¢ç»“æœåŠ è½½
            { action: "waitForSelector", args: ["#content_left", { timeout: 5000 }] },
            {
              action: "evaluate",
              args: [`document.querySelector('#automation-status').innerHTML = 'âœ… æ­¥éª¤ 5/5: æœç´¢å®Œæˆï¼<br><br>æ‰¾åˆ°æœç´¢ç»“æœ';`]
            },
            { action: "waitForTimeout", args: [1500] },

            // æ­¥éª¤ 6: æå–æœç´¢ç»“æœ
            {
              action: "evaluate",
              args: [`
                const results = Array.from(document.querySelectorAll('#content_left .result')).slice(0, 5).map((item, index) => {
                  const title = item.querySelector('h3')?.innerText || 'æ— æ ‡é¢˜';
                  const link = item.querySelector('h3 a')?.href || '';
                  return { index: index + 1, title, link };
                });
                
                document.querySelector('#automation-status').innerHTML = 
                  '<strong>ğŸ‰ æœç´¢å®Œæˆï¼</strong><br><br>' +
                  '<strong>å…³é”®è¯ï¼š</strong>"${searchKeyword}"<br>' +
                  '<strong>ç»“æœæ•°ï¼š</strong>' + results.length + ' æ¡<br><br>' +
                  '<strong>å‰ ' + results.length + ' æ¡ç»“æœï¼š</strong><br>' +
                  results.map(r => (r.index + '. ' + r.title.substring(0, 30) + '...')).join('<br>');
                
                // è¿”å›ç»“æœ
                return results;
              `]
            },
            { action: "waitForTimeout", args: [2000] }
          ]
        };

        const html = await window.naimo.automation.automateWithJson(config);

        displayResult(
          "automationOutput",
          `âœ… ç™¾åº¦æœç´¢è‡ªåŠ¨åŒ–ä»»åŠ¡å®Œæˆï¼\n\nğŸ“ ä»»åŠ¡è¯¦æƒ…:\n- æœç´¢å…³é”®è¯: "${searchKeyword}"\n- æ‰§è¡Œæ­¥éª¤: 6 æ­¥\n- æ€»è€—æ—¶: ~8ç§’\n\nâœ¨ äº®ç‚¹åŠŸèƒ½:\n1. å®æ—¶çŠ¶æ€å±•ç¤º - ä½¿ç”¨ evaluate åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºå½“å‰æ“ä½œ\n2. èµ„æºæ‹¦æˆªä¼˜åŒ– - æ‹¦æˆªå›¾ç‰‡å’Œå­—ä½“ï¼Œæå‡é€Ÿåº¦\n3. æ¨¡æ‹ŸçœŸå®æ“ä½œ - å¸¦å»¶è¿Ÿçš„è¾“å…¥ï¼Œæ›´åƒçœŸäºº\n4. æ•°æ®æå– - è‡ªåŠ¨æå–å‰5æ¡æœç´¢ç»“æœ\n5. è§†è§‰åé¦ˆ - æµ®åŠ¨çŠ¶æ€æ¡†å®æ—¶æ›´æ–°\n\nğŸ’¡ å®Œæ•´ HTML é•¿åº¦: ${html.length} å­—ç¬¦\n\nğŸ” æŠ€æœ¯è¦ç‚¹:\n- waitForSelector: ç­‰å¾…å…ƒç´ åŠ è½½\n- type: æ¨¡æ‹Ÿé”®ç›˜è¾“å…¥\n- click: æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»\n- evaluate: æ‰§è¡Œè‡ªå®šä¹‰ JS ä»£ç \n- requestInterception: æ‹¦æˆªä¸éœ€è¦çš„èµ„æº`
        );
        console.log("ç™¾åº¦æœç´¢ç»“æœ HTML:", html);
      } catch (error) {
        displayError("automationOutput", error);
      }
    }

    // æ¡ˆä¾‹4: Bç«™ç•ªå‰§ç´¢å¼•çˆ¬å–ï¼ˆfetchHTML + parseHtmlByConfigï¼‰
    async function testAutomationUseCaseDataCrawl() {
      try {
        displayResult("automationOutput", "æ­£åœ¨çˆ¬å– Bç«™ç•ªå‰§ç´¢å¼•é¡µé¢æ•°æ®...\n\nâ³ è¯·ç¨å€™ï¼Œæ­£åœ¨è·å–é¡µé¢...");

        const bilibiliUrl = "https://www.bilibili.com/anime/index/?from_spmid=666.4.index.0#st=1&order=3&season_version=-1&spoken_language_type=-1&area=-1&is_finish=-1&copyright=-1&season_status=-1&season_month=-1&year=-1&style_id=-1&sort=0&page=1";

        // æ–¹æ¡ˆ 1: ä½¿ç”¨ fetchHTML + parseHtmlByConfig
        const result = await window.naimo.automation.fetchHTML(bilibiliUrl, {
          show: true,
          timeout: 15000,
          requestInterception: {
            enabled: true,
            regex: [
              /\.(png|jpg|jpeg|gif|svg|webp|ico)$/i,
              /\.(css|woff2?|ttf|eot)$/i,
              /\.(mp4|webm|ogg)$/i
            ]
          },
          steps: [
            // ç­‰å¾…ç•ªå‰§åˆ—è¡¨åŠ è½½
            { action: "waitForSelector", args: [".bangumi-list", { timeout: 10000 }] },
            { action: "waitForTimeout", args: [2000] },
            // åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºçˆ¬å–çŠ¶æ€
            {
              action: "evaluate",
              args: [`
                const status = document.createElement('div');
                status.style.cssText = 'position:fixed;top:20px;right:20px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px;border-radius:12px;font-size:16px;z-index:9999;box-shadow:0 4px 20px rgba(0,0,0,0.3);';
                status.innerHTML = '<strong>ğŸš€ æ•°æ®çˆ¬å–ä¸­...</strong><br><br>æ­£åœ¨æå–ç•ªå‰§ä¿¡æ¯';
                document.body.appendChild(status);
              `]
            },
            { action: "waitForTimeout", args: [1000] }
          ]
        });

        // ä½¿ç”¨ parseHtmlByConfig è§£æ HTML
        const parseConfig = {
          name: "bangumiList",
          cls: "@.bangumi-item",
          children: [
            {
              name: "title",
              cls: ".bangumi-title::text"
            },
            {
              name: "link",
              cls: ".bangumi-title::attr(href)"
            },
            {
              name: "followers",
              cls: ".shadow::text"
            },
            {
              name: "tag",
              cls: ".corner-tag::text"
            },
            {
              name: "episodes",
              cls: ".pub-info::text"
            }
          ]
        };

        const bangumiData = window.naimo.automation.parseHtmlByConfig(parseConfig, result.html);

        displayResult(
          "automationOutput",
          `âœ… Bç«™ç•ªå‰§æ•°æ®çˆ¬å–å®Œæˆï¼\n\nğŸ“Š çˆ¬å–ç»Ÿè®¡:\n- é¡µé¢æ ‡é¢˜: ${result.getTitle()}\n- ç•ªå‰§æ•°é‡: ${bangumiData?.length || 0} éƒ¨\n- HTML å¤§å°: ${result.html.length} å­—ç¬¦\n\nğŸ¬ å‰ 5 éƒ¨ç•ªå‰§ä¿¡æ¯:\n${bangumiData?.slice(0, 5).map((item, idx) =>
            `\n${idx + 1}. ${item.title || 'æ— æ ‡é¢˜'}\n   è¿½ç•ª: ${item.followers || 'æœªçŸ¥'}\n   æ ‡ç­¾: ${item.tag || 'æ— '}\n   çŠ¶æ€: ${item.episodes || 'æœªçŸ¥'}`
          ).join('\n') || 'æ— æ•°æ®'}\n\nâœ¨ æŠ€æœ¯äº®ç‚¹:\n\n1ï¸âƒ£ fetchHTML - æ™ºèƒ½è·å–é¡µé¢\n   â€¢ æ”¯æŒè‡ªåŠ¨åŒ–é…ç½®\n   â€¢ ç­‰å¾…åŠ¨æ€å†…å®¹åŠ è½½\n   â€¢ èµ„æºæ‹¦æˆªä¼˜åŒ–é€Ÿåº¦\n\n2ï¸âƒ£ parseHtmlByConfig - ç»“æ„åŒ–è§£æ\n   â€¢ CSS é€‰æ‹©å™¨å®šä½\n   â€¢ ::text æå–æ–‡æœ¬\n   â€¢ ::attr() æå–å±æ€§\n   â€¢ children åµŒå¥—è§£æ\n   â€¢ @ å‰ç¼€æ‰¹é‡æå–\n\n3ï¸âƒ£ æ•°æ®ç»“æ„åŒ–\n   â€¢ è‡ªåŠ¨æå–ç•ªå‰§åˆ—è¡¨\n   â€¢ åŒ…å«æ ‡é¢˜ã€é“¾æ¥ã€è¿½ç•ªæ•°ç­‰\n   â€¢ è¿”å› JSON æ ¼å¼æ•°æ®\n\nğŸ’¡ å®Œæ•´æ•°æ®å·²è®°å½•åœ¨æ§åˆ¶å°\n\nğŸ“ è§£æé…ç½®:\n${JSON.stringify(parseConfig, null, 2)}`
        );

        console.log("=== Bç«™ç•ªå‰§çˆ¬å–ç»“æœ ===");
        console.log("ğŸ“„ é¡µé¢æ ‡é¢˜:", result.getTitle());
        console.log("ğŸ“Š ç•ªå‰§æ•°æ®:", bangumiData);
        console.log("ğŸ“ HTML é•¿åº¦:", result.html.length);
        console.log("ğŸ”— æ‰€æœ‰é“¾æ¥æ•°:", result.getLinks()?.length);
        console.log("\nğŸ“‹ å®Œæ•´ç•ªå‰§åˆ—è¡¨:");
        console.table(bangumiData?.slice(0, 10));

      } catch (error) {
        displayError("automationOutput", error);
        console.error("çˆ¬å–å¤±è´¥:", error);
      }
    }

    // ==================== UBrowser API æµ‹è¯• ====================

    // åŸºç¡€ç¤ºä¾‹ - æ‰“å¼€ç½‘é¡µå¹¶è·å–æ ‡é¢˜
    async function testUBrowserBasic() {
      try {
        displayResult("ubrowserOutput", "æ­£åœ¨è¿è¡Œ UBrowser åŸºç¡€ç¤ºä¾‹...");

        const result = await window.naimo.ubrowser
          .goto("https://www.baidu.com")
          .wait("#kw")
          .evaluate(`document.title`)
          .run({ width: 1000, height: 700 });

        // result æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæœ€åä¸€ä¸ªå…ƒç´ æ˜¯ BrowserInstance
        const title = result[0]; // evaluate çš„è¿”å›å€¼
        const instance = result[result.length - 1]; // BrowserInstance

        displayResult(
          "ubrowserOutput",
          `âœ… UBrowser åŸºç¡€ç¤ºä¾‹è¿è¡Œå®Œæˆï¼

ğŸ“‹ é“¾å¼è°ƒç”¨:
window.naimo.ubrowser
  .goto("https://www.baidu.com")
  .wait("#kw")
  .evaluate(() => document.title)
  .run({ width: 1000, height: 700 })

ğŸ¯ æ‰§è¡Œç»“æœ:
- é¡µé¢æ ‡é¢˜: ${title}
- çª—å£ ID: ${instance.id}
- URL: ${instance.url}
- çª—å£å¤§å°: ${instance.width} x ${instance.height}

ğŸ’¡ ç‰¹ç‚¹:
1. ä¼˜é›…çš„é“¾å¼è°ƒç”¨
2. è‡ªåŠ¨ç­‰å¾…å…ƒç´ åŠ è½½
3. æ‰§è¡Œè‡ªå®šä¹‰ JS
4. è¿”å›çª—å£å®ä¾‹ä¿¡æ¯`
        );
        console.log("UBrowser ç»“æœ:", result);
      } catch (error) {
        displayError("ubrowserOutput", error);
      }
    }

    // ç™¾åº¦æœç´¢ç¤ºä¾‹
    async function testUBrowserSearch() {
      try {
        displayResult("ubrowserOutput", "æ­£åœ¨æ‰§è¡Œç™¾åº¦æœç´¢...");

        const searchKeyword = "Electron å¼€å‘";

        const result = await window.naimo.ubrowser
          .goto("https://www.baidu.com")
          .wait("#kw")
          .value("#kw", searchKeyword)
          .wait(300)
          .press("enter")
          .wait("#content_left", 5000)
          .evaluate(`
            Array.from(document.querySelectorAll('#content_left .result'))
              .slice(0, 5)
              .map((item, index) => {
                const title = item.querySelector('h3')?.innerText || 'æ— æ ‡é¢˜';
                const link = item.querySelector('h3 a')?.href || '';
                return { index: index + 1, title, link };
              })
          `)
          .run({ width: 1200, height: 800 });

        const searchResults = result[0]; // evaluate è¿”å›çš„æœç´¢ç»“æœ

        displayResult(
          "ubrowserOutput",
          `âœ… ç™¾åº¦æœç´¢å®Œæˆï¼

ğŸ” æœç´¢å…³é”®è¯: "${searchKeyword}"

ğŸ“‹ å‰ 5 æ¡ç»“æœ:
${searchResults.map(r => `${r.index}. ${r.title.substring(0, 60)}...`).join('\n')}

ğŸ’¡ é“¾å¼è°ƒç”¨æµç¨‹:
.goto() â†’ æ‰“å¼€ç½‘é¡µ
.wait() â†’ ç­‰å¾…æœç´¢æ¡†
.value() â†’ è¾“å…¥å…³é”®è¯
.press() â†’ æŒ‰å›è½¦é”®
.wait() â†’ ç­‰å¾…ç»“æœåŠ è½½
.evaluate() â†’ æå–ç»“æœæ•°æ®
.run() â†’ æ‰§è¡Œä»»åŠ¡

âœ¨ å®Œæ•´ç»“æœå·²è®°å½•åœ¨æ§åˆ¶å°`
        );
        console.log("æœç´¢ç»“æœ:", searchResults);
      } catch (error) {
        displayError("ubrowserOutput", error);
      }
    }

    // å¿«é€’æŸ¥è¯¢ç¤ºä¾‹
    async function testUBrowserExpressQuery() {
      try {
        displayResult("ubrowserOutput", "æ­£åœ¨æŸ¥è¯¢å¿«é€’ä¿¡æ¯...");

        const expressNo = "YT8933937901850";

        const result = await window.naimo.ubrowser
          .goto("https://www.kuaidi100.com/")
          .wait("#input")
          .scroll(0, 450)
          .value("#input", expressNo)
          .click("#query")
          .wait(2000)
          .run({ width: 1280, height: 720 });

        const instance = result[result.length - 1];

        displayResult(
          "ubrowserOutput",
          `âœ… å¿«é€’æŸ¥è¯¢å®Œæˆï¼

ğŸ“¦ å¿«é€’å•å·: ${expressNo}
ğŸŒ æŸ¥è¯¢ç½‘ç«™: å¿«é€’100
ğŸ“Š çª—å£ä¿¡æ¯:
  - ID: ${instance.id}
  - URL: ${instance.url}
  - å¤§å°: ${instance.width} x ${instance.height}

ğŸ’¡ é“¾å¼è°ƒç”¨æµç¨‹:
.goto() â†’ æ‰“å¼€å¿«é€’100
.wait() â†’ ç­‰å¾…è¾“å…¥æ¡†
.scroll() â†’ æ»šåŠ¨åˆ°åˆé€‚ä½ç½®
.value() â†’ è¾“å…¥å¿«é€’å•å·
.click() â†’ ç‚¹å‡»æŸ¥è¯¢æŒ‰é’®
.wait() â†’ ç­‰å¾…ç»“æœåŠ è½½
.run() â†’ æ‰§è¡Œä»»åŠ¡

âœ¨ å®é™…åº”ç”¨åœºæ™¯:
- å¿«é€’æ‰¹é‡æŸ¥è¯¢
- è‡ªåŠ¨åŒ–ç‰©æµè·Ÿè¸ª
- å¿«é€’ä¿¡æ¯èšåˆ`
        );
        console.log("UBrowser å®ä¾‹:", instance);
      } catch (error) {
        displayError("ubrowserOutput", error);
      }
    }

    // ç½‘é¡µæˆªå›¾ç¤ºä¾‹
    async function testUBrowserScreenshot() {
      try {
        displayResult("ubrowserOutput", "æ­£åœ¨æˆªå–ç½‘é¡µ...");

        const result = await window.naimo.ubrowser
          .goto("https://www.baidu.com")
          .wait("#kw")
          .wait(1000)
          .screenshot()
          .run({ width: 1200, height: 800 });

        const screenshot = result[0]; // screenshot è¿”å›çš„ Buffer

        displayResult(
          "ubrowserOutput",
          `âœ… ç½‘é¡µæˆªå›¾å®Œæˆï¼

ğŸ“¸ æˆªå›¾ä¿¡æ¯:
  - ç±»å‹: Buffer
  - å¤§å°: ${screenshot?.length || 0} å­—èŠ‚
  - æ ¼å¼: PNG

ğŸ’¡ é“¾å¼è°ƒç”¨æµç¨‹:
.goto() â†’ æ‰“å¼€ç½‘é¡µ
.wait() â†’ ç­‰å¾…é¡µé¢åŠ è½½
.screenshot() â†’ æˆªå–æ•´é¡µ
.run() â†’ æ‰§è¡Œä»»åŠ¡

âœ¨ å®é™…åº”ç”¨åœºæ™¯:
- ç½‘é¡µå½’æ¡£
- è‡ªåŠ¨åŒ–æµ‹è¯•
- å†…å®¹å¿«ç…§
- è§†è§‰å›å½’æµ‹è¯•

ğŸ“ æ³¨æ„: æˆªå›¾æ•°æ®å·²è®°å½•åœ¨æ§åˆ¶å°`
        );
        console.log("æˆªå›¾ Buffer:", screenshot);
      } catch (error) {
        displayError("ubrowserOutput", error);
      }
    }

    // æ¡ä»¶åˆ¤æ–­ç¤ºä¾‹
    async function testUBrowserCondition() {
      try {
        displayResult("ubrowserOutput", "æ­£åœ¨æ¼”ç¤ºæ¡ä»¶åˆ¤æ–­...");

        const result = await window.naimo.ubrowser
          .goto("https://www.baidu.com")
          .wait("#kw")
          // åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç™»å½•æŒ‰é’®
          .when("#s-top-loginbtn")
          .evaluate(`
            const btn = document.querySelector("#s-top-loginbtn");
            if (btn) btn.style.border = "2px solid red";
            "æ‰¾åˆ°ç™»å½•æŒ‰é’®"
          `)
          .end()
          // åˆ¤æ–­æ˜¯å¦å­˜åœ¨æœç´¢æ¡†
          .when("#kw")
          .evaluate(`
            const input = document.querySelector("#kw");
            if (input) input.style.border = "2px solid green";
            "æ‰¾åˆ°æœç´¢æ¡†"
          `)
          .end()
          .wait(2000)
          .run({ width: 1000, height: 700 });

        displayResult(
          "ubrowserOutput",
          `âœ… æ¡ä»¶åˆ¤æ–­ç¤ºä¾‹å®Œæˆï¼

ğŸ¯ æ¡ä»¶åˆ†æ”¯è¯­æ³•:
.when(selector)
  .æ“ä½œ1()
  .æ“ä½œ2()
.end()

ğŸ“Š æ‰§è¡Œç»“æœ:
${result.slice(0, -1).map((r, i) => `  ${i + 1}. ${r}`).join('\n')}

ğŸ’¡ é“¾å¼è°ƒç”¨æµç¨‹:
.goto() â†’ æ‰“å¼€ç½‘é¡µ
.wait() â†’ ç­‰å¾…åŠ è½½
.when() â†’ åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨
  .evaluate() â†’ å­˜åœ¨æ—¶æ‰§è¡Œæ“ä½œ
.end() â†’ ç»“æŸæ¡ä»¶åˆ†æ”¯
.run() â†’ æ‰§è¡Œä»»åŠ¡

âœ¨ å®é™…åº”ç”¨åœºæ™¯:
- é¡µé¢çŠ¶æ€æ£€æµ‹
- ç™»å½•çŠ¶æ€åˆ¤æ–­
- å…ƒç´ å­˜åœ¨æ€§éªŒè¯
- æ™ºèƒ½åŒ–æµç¨‹æ§åˆ¶`
        );
        console.log("æ¡ä»¶åˆ¤æ–­ç»“æœ:", result);
      } catch (error) {
        displayError("ubrowserOutput", error);
      }
    }

    // ==================== UBrowser å³æ—¶æ‰§è¡Œæ¨¡å¼æµ‹è¯• ====================

    // å…¨å±€æµè§ˆå™¨å®ä¾‹
    let instantBrowser = null;

    // æ­¥éª¤ 1: æ‰“å¼€ç½‘é¡µ
    async function testInstantStep1() {
      try {
        displayResult("instantOutput", "â³ æ­£åœ¨æ‰“å¼€ç½‘é¡µ...");

        // åˆ›å»ºæµè§ˆå™¨å®ä¾‹
        instantBrowser = window.naimo.instantBrowser.create();

        // æ‰“å¼€ç½‘é¡µ
        const info = await instantBrowser.goto("https://www.baidu.com", {
          width: 1200,
          height: 800
        });

        displayResult(
          "instantOutput",
          `âœ… æ­¥éª¤ 1 å®Œæˆï¼šç½‘é¡µå·²æ‰“å¼€

ğŸ“Š æµè§ˆå™¨ä¿¡æ¯:
  - ID: ${info.id}
  - URL: ${info.url}
  - çª—å£å¤§å°: ${info.width} x ${info.height}

ğŸ’¡ æç¤ºï¼šç‚¹å‡»"â‘¡ ç­‰å¾…å…ƒç´ "ç»§ç»­ä¸‹ä¸€æ­¥`
        );
        console.log("æµè§ˆå™¨ä¿¡æ¯:", info);
      } catch (error) {
        displayError("instantOutput", error);
      }
    }

    // æ­¥éª¤ 2: ç­‰å¾…å…ƒç´ 
    async function testInstantStep2() {
      try {
        if (!instantBrowser) {
          throw new Error("è¯·å…ˆç‚¹å‡»\"â‘  æ‰“å¼€ç½‘é¡µ\"");
        }

        displayResult("instantOutput", "â³ æ­£åœ¨ç­‰å¾…æœç´¢æ¡†åŠ è½½...");

        await instantBrowser.wait("#kw");

        displayResult(
          "instantOutput",
          `âœ… æ­¥éª¤ 2 å®Œæˆï¼šæœç´¢æ¡†å·²å°±ç»ª

ğŸ“‹ æ‰§è¡Œçš„æ“ä½œ:
  - ç­‰å¾…é€‰æ‹©å™¨: #kw
  - ç­‰å¾…è¶…æ—¶: 30ç§’

ğŸ’¡ æç¤ºï¼šç‚¹å‡»"â‘¢ è¾“å…¥æ–‡æœ¬"ç»§ç»­ä¸‹ä¸€æ­¥`
        );
      } catch (error) {
        displayError("instantOutput", error);
      }
    }

    // æ­¥éª¤ 3: è¾“å…¥æ–‡æœ¬
    async function testInstantStep3() {
      try {
        if (!instantBrowser) {
          throw new Error("è¯·å…ˆç‚¹å‡»\"â‘  æ‰“å¼€ç½‘é¡µ\"");
        }

        const keyword = "Electron å¼€å‘æ•™ç¨‹";
        displayResult("instantOutput", `â³ æ­£åœ¨è¾“å…¥æœç´¢å…³é”®è¯: "${keyword}"...`);

        await instantBrowser.value("#kw", keyword);
        await instantBrowser.wait(500);

        displayResult(
          "instantOutput",
          `âœ… æ­¥éª¤ 3 å®Œæˆï¼šæ–‡æœ¬å·²è¾“å…¥

ğŸ“ è¾“å…¥å†…å®¹:
  - é€‰æ‹©å™¨: #kw
  - å…³é”®è¯: "${keyword}"

ğŸ’¡ æç¤ºï¼šç‚¹å‡»"â‘£ ç‚¹å‡»æœç´¢"ç»§ç»­ä¸‹ä¸€æ­¥`
        );
      } catch (error) {
        displayError("instantOutput", error);
      }
    }

    // æ­¥éª¤ 4: ç‚¹å‡»æœç´¢
    async function testInstantStep4() {
      try {
        if (!instantBrowser) {
          throw new Error("è¯·å…ˆç‚¹å‡»\"â‘  æ‰“å¼€ç½‘é¡µ\"");
        }

        displayResult("instantOutput", "â³ æ­£åœ¨ç‚¹å‡»æœç´¢æŒ‰é’®...");

        await instantBrowser.press("enter");
        await instantBrowser.wait("#content_left", 10000);

        displayResult(
          "instantOutput",
          `âœ… æ­¥éª¤ 4 å®Œæˆï¼šæœç´¢å·²æ‰§è¡Œ

ğŸ“‹ æ‰§è¡Œçš„æ“ä½œ:
  - æŒ‰é”®: Enter
  - ç­‰å¾…ç»“æœåŒºåŸŸ: #content_left
  - è¶…æ—¶æ—¶é—´: 10ç§’

ğŸ’¡ æç¤ºï¼šç‚¹å‡»"â‘¤ æå–ç»“æœ"æŸ¥çœ‹æœç´¢ç»“æœ`
        );
      } catch (error) {
        displayError("instantOutput", error);
      }
    }

    // æ­¥éª¤ 5: æå–ç»“æœ
    async function testInstantStep5() {
      try {
        if (!instantBrowser) {
          throw new Error("è¯·å…ˆç‚¹å‡»\"â‘  æ‰“å¼€ç½‘é¡µ\"");
        }

        displayResult("instantOutput", "â³ æ­£åœ¨æå–æœç´¢ç»“æœ...");

        const results = await instantBrowser.evaluate(() => {
          return Array.from(document.querySelectorAll('#content_left .result'))
            .slice(0, 5)
            .map((item, index) => {
              const title = item.querySelector('h3')?.innerText || 'æ— æ ‡é¢˜';
              const link = item.querySelector('h3 a')?.href || '';
              return { index: index + 1, title, link };
            });
        });

        displayResult(
          "instantOutput",
          `âœ… æ­¥éª¤ 5 å®Œæˆï¼šç»“æœå·²æå–

ğŸ“Š æœç´¢ç»“æœ (å‰ 5 æ¡):
${results.map(r => `${r.index}. ${r.title.substring(0, 50)}...`).join('\n')}

ğŸ’¡ å®Œæ•´ç»“æœå·²è®°å½•åœ¨æ§åˆ¶å°
ğŸ’¡ ç‚¹å‡»"å…³é—­æµè§ˆå™¨"ç»“æŸæµ‹è¯•`
        );
        console.log("æœç´¢ç»“æœ:", results);
      } catch (error) {
        displayError("instantOutput", error);
      }
    }

    // å…³é—­æµè§ˆå™¨
    async function testInstantClose() {
      try {
        if (!instantBrowser) {
          displayResult("instantOutput", "âš ï¸ æµè§ˆå™¨å·²å…³é—­æˆ–æœªåˆ›å»º");
          return;
        }

        displayResult("instantOutput", "â³ æ­£åœ¨å…³é—­æµè§ˆå™¨...");

        await instantBrowser.close();
        instantBrowser = null;

        displayResult(
          "instantOutput",
          `âœ… æµè§ˆå™¨å·²å…³é—­

ğŸ’¡ å¯ä»¥é‡æ–°ç‚¹å‡»"â‘  æ‰“å¼€ç½‘é¡µ"å¼€å§‹æ–°çš„æµ‹è¯•`
        );
      } catch (error) {
        displayError("instantOutput", error);
        instantBrowser = null;
      }
    }

    // ==================== æœ¬åœ°æµ‹è¯•é¡µé¢è‡ªåŠ¨åŒ– ====================

    const TEST_URL = "http://localhost:8000/test.html";

    // ========== æ¨¡å¼1: automateWithJson (é…ç½®æ¨¡å¼) ==========

    // æµ‹è¯•ç™»å½•è¡¨å•
    async function testLocalAutomateLogin() {
      try {
        displayResult("localAutomateOutput", "æ­£åœ¨æµ‹è¯•ç™»å½•è¡¨å•...");

        const config = {
          url: TEST_URL,
          show: true,
          timeout: 15000,
          steps: [
            // ç­‰å¾…é¡µé¢åŠ è½½
            { action: "waitForSelector", args: ["#username"] },
            { action: "waitForTimeout", args: [500] },

            // å¡«å†™ç”¨æˆ·å
            { action: "type", args: ["#username", "test_user", { delay: 50 }] },
            { action: "waitForTimeout", args: [300] },

            // å¡«å†™å¯†ç 
            { action: "type", args: ["#password", "test_pass123", { delay: 50 }] },
            { action: "waitForTimeout", args: [300] },

            // å‹¾é€‰è®°ä½æˆ‘
            { action: "click", args: ["#remember"] },
            { action: "waitForTimeout", args: [300] },

            // ç‚¹å‡»ç™»å½•æŒ‰é’®
            { action: "click", args: ["#loginForm button[type='submit']"] },
            { action: "waitForTimeout", args: [1000] },

            // è·å–ç»“æœ
            { action: "evaluate", args: [`document.querySelector('#loginResult').textContent`] }
          ]
        };

        const html = await window.naimo.automation.automateWithJson(config);

        displayResult(
          "localAutomateOutput",
          `âœ… ç™»å½•è¡¨å•æµ‹è¯•å®Œæˆï¼\n\nğŸ¯ é…ç½®æ¨¡å¼ (automateWithJson)\næ‰§è¡Œæ­¥éª¤: ${config.steps.length} æ­¥\n\nğŸ’¡ ç‰¹ç‚¹:\nâ€¢ å®Œå…¨åŸºäºJSONé…ç½®\nâ€¢ æ­¥éª¤æ¸…æ™°å¯ä¿å­˜\nâ€¢ ä»»åŠ¡å®Œæˆåè‡ªåŠ¨å…³é—­çª—å£\n\nğŸ“ å®Œæ•´HTMLé•¿åº¦: ${html.length} å­—ç¬¦`
        );
        console.log("ç™»å½•æµ‹è¯•ç»“æœ:", html);
      } catch (error) {
        displayError("localAutomateOutput", error);
      }
    }

    // æµ‹è¯•æœç´¢åŠŸèƒ½
    async function testLocalAutomateSearch() {
      try {
        displayResult("localAutomateOutput", "æ­£åœ¨æµ‹è¯•æœç´¢åŠŸèƒ½...");

        const config = {
          url: TEST_URL,
          show: true,
          timeout: 15000,
          steps: [
            { action: "waitForSelector", args: ["#searchInput"] },
            { action: "waitForTimeout", args: [500] },

            // è¾“å…¥æœç´¢å…³é”®è¯
            { action: "type", args: ["#searchInput", "Electron", { delay: 80 }] },
            { action: "waitForTimeout", args: [300] },

            // ç‚¹å‡»æœç´¢æŒ‰é’®
            { action: "click", args: ["#searchBtn"] },
            { action: "waitForTimeout", args: [1500] },

            // è·å–æœç´¢ç»“æœ
            {
              action: "evaluate", args: [`
              Array.from(document.querySelectorAll('#searchList li')).map(li => li.textContent)
            `]
            }
          ]
        };

        const html = await window.naimo.automation.automateWithJson(config);

        displayResult(
          "localAutomateOutput",
          `âœ… æœç´¢åŠŸèƒ½æµ‹è¯•å®Œæˆï¼\n\nğŸ” æœç´¢å…³é”®è¯: Electron\næ‰§è¡Œæ­¥éª¤: ${config.steps.length} æ­¥\n\nå®Œæ•´HTMLé•¿åº¦: ${html.length} å­—ç¬¦`
        );
        console.log("æœç´¢æµ‹è¯•ç»“æœ:", html);
      } catch (error) {
        displayError("localAutomateOutput", error);
      }
    }

    // æµ‹è¯•æ•°æ®è¡¨å•
    async function testLocalAutomateForm() {
      try {
        displayResult("localAutomateOutput", "æ­£åœ¨æµ‹è¯•æ•°æ®è¡¨å•...");

        const config = {
          url: TEST_URL,
          show: true,
          timeout: 20000,
          steps: [
            { action: "waitForSelector", args: ["#name"] },
            { action: "waitForTimeout", args: [500] },

            // å¡«å†™å§“å
            { action: "type", args: ["#name", "å¼ ä¸‰", { delay: 80 }] },
            { action: "waitForTimeout", args: [200] },

            // å¡«å†™é‚®ç®±
            { action: "type", args: ["#email", "zhangsan@example.com", { delay: 60 }] },
            { action: "waitForTimeout", args: [200] },

            // å¡«å†™å¹´é¾„
            { action: "type", args: ["#age", "25", { delay: 100 }] },
            { action: "waitForTimeout", args: [200] },

            // é€‰æ‹©åŸå¸‚
            { action: "select", args: ["#city", "beijing"] },
            { action: "waitForTimeout", args: [200] },

            // å‹¾é€‰å…´è¶£çˆ±å¥½
            { action: "click", args: ["#hobby1"] },
            { action: "waitForTimeout", args: [100] },
            { action: "click", args: ["#hobby3"] },
            { action: "waitForTimeout", args: [100] },

            // å¡«å†™å¤‡æ³¨
            { action: "type", args: ["#comment", "è¿™æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•å¡«å†™çš„å¤‡æ³¨ä¿¡æ¯", { delay: 50 }] },
            { action: "waitForTimeout", args: [300] },

            // æäº¤è¡¨å•
            { action: "click", args: ["#dataForm button[type='submit']"] },
            { action: "waitForTimeout", args: [1000] }
          ]
        };

        const html = await window.naimo.automation.automateWithJson(config);

        displayResult(
          "localAutomateOutput",
          `âœ… æ•°æ®è¡¨å•æµ‹è¯•å®Œæˆï¼\n\nğŸ“‹ è¡¨å•å­—æ®µ:\nâ€¢ å§“å: å¼ ä¸‰\nâ€¢ é‚®ç®±: zhangsan@example.com\nâ€¢ å¹´é¾„: 25\nâ€¢ åŸå¸‚: åŒ—äº¬\nâ€¢ å…´è¶£: é˜…è¯»ã€éŸ³ä¹\nâ€¢ å¤‡æ³¨: å·²å¡«å†™\n\næ‰§è¡Œæ­¥éª¤: ${config.steps.length} æ­¥`
        );
        console.log("è¡¨å•æµ‹è¯•ç»“æœ:", html);
      } catch (error) {
        displayError("localAutomateOutput", error);
      }
    }

    // ========== æ¨¡å¼2: UBrowser (é“¾å¼è°ƒç”¨) ==========

    // é“¾å¼-ç™»å½•è¡¨å•
    async function testLocalUBrowserLogin() {
      try {
        displayResult("localUBrowserOutput", "æ­£åœ¨æ‰§è¡Œé“¾å¼ç™»å½•...");

        const result = await window.naimo.ubrowser
          .goto(TEST_URL)
          .wait("#username")
          .wait(500)
          .type("#username", "chain_user", { delay: 50 })
          .wait(300)
          .type("#password", "chain_pass456", { delay: 50 })
          .wait(300)
          .click("#remember")
          .wait(300)
          .click("#loginForm button[type='submit']")
          .wait(1000)
          .evaluate(`document.querySelector('#loginResult').textContent`)
          .run({ width: 1000, height: 700 });

        const loginResult = result[0]; // evaluate çš„è¿”å›å€¼
        const instance = result[result.length - 1];

        displayResult(
          "localUBrowserOutput",
          `âœ… é“¾å¼ç™»å½•å®Œæˆï¼\n\nğŸ“ é“¾å¼è°ƒç”¨è¯­æ³•:\nubrowser\n  .goto(url)\n  .wait(selector)\n  .type(selector, text)\n  .click(selector)\n  .evaluate(func)\n  .run(options)\n\nğŸ¯ æ‰§è¡Œç»“æœ:\nç™»å½•ä¿¡æ¯: ${loginResult}\nçª—å£ID: ${instance.id}\n\nğŸ’¡ ä¼˜ç‚¹:\nâ€¢ API ä¼˜é›…æµç•…\nâ€¢ ä»£ç å¯è¯»æ€§é«˜\nâ€¢ ç»Ÿä¸€æ‰§è¡Œæ‰€æœ‰æ­¥éª¤`
        );
        console.log("é“¾å¼ç™»å½•ç»“æœ:", result);
      } catch (error) {
        displayError("localUBrowserOutput", error);
      }
    }

    // é“¾å¼-æœç´¢åŠŸèƒ½
    async function testLocalUBrowserSearch() {
      try {
        displayResult("localUBrowserOutput", "æ­£åœ¨æ‰§è¡Œé“¾å¼æœç´¢...");

        const result = await window.naimo.ubrowser
          .goto(TEST_URL)
          .wait("#searchInput")
          .wait(500)
          .type("#searchInput", "JavaScript", { delay: 80 })
          .wait(300)
          .click("#searchBtn")
          .wait(1500)
          .evaluate(`
            Array.from(document.querySelectorAll('#searchList li'))
              .map(li => li.textContent)
          `)
          .run({ width: 1200, height: 800 });

        const searchResults = result[0];

        displayResult(
          "localUBrowserOutput",
          `âœ… é“¾å¼æœç´¢å®Œæˆï¼\n\nğŸ” æœç´¢å…³é”®è¯: JavaScript\nğŸ“Š ç»“æœæ•°é‡: ${searchResults?.length || 0}\n\næœç´¢ç»“æœ:\n${searchResults?.join('\n') || 'æ— '}\n\nğŸ’¡ é“¾å¼è°ƒç”¨æµç¨‹:\n.goto() â†’ .wait() â†’ .type() â†’ .click() â†’ .evaluate() â†’ .run()`
        );
        console.log("é“¾å¼æœç´¢ç»“æœ:", searchResults);
      } catch (error) {
        displayError("localUBrowserOutput", error);
      }
    }

    // é“¾å¼-å¤æ‚è¡¨å•
    async function testLocalUBrowserComplex() {
      try {
        displayResult("localUBrowserOutput", "æ­£åœ¨å¡«å†™å¤æ‚è¡¨å•...");

        const result = await window.naimo.ubrowser
          .goto(TEST_URL)
          .wait("#name")
          .wait(500)
          .type("#name", "æå››", { delay: 80 })
          .wait(200)
          .type("#email", "lisi@example.com", { delay: 60 })
          .wait(200)
          .type("#age", "30", { delay: 100 })
          .wait(200)
          .select("#city", "shanghai")
          .wait(200)
          .click("#hobby2")
          .wait(100)
          .click("#hobby4")
          .wait(100)
          .type("#comment", "UBrowseré“¾å¼è°ƒç”¨æµ‹è¯•", { delay: 50 })
          .wait(300)
          .screenshot()
          .run({ width: 1200, height: 900 });

        const screenshot = result[0];

        displayResult(
          "localUBrowserOutput",
          `âœ… å¤æ‚è¡¨å•å¡«å†™å®Œæˆï¼\n\nğŸ“¸ å·²æˆªå›¾: ${screenshot?.length || 0} å­—èŠ‚\n\nğŸ“‹ è¡¨å•å†…å®¹:\nâ€¢ å§“å: æå››\nâ€¢ é‚®ç®±: lisi@example.com\nâ€¢ å¹´é¾„: 30\nâ€¢ åŸå¸‚: ä¸Šæµ·\nâ€¢ å…´è¶£: è¿åŠ¨ã€æ—…è¡Œ\nâ€¢ å¤‡æ³¨: å·²å¡«å†™\n\nğŸ’¡ æŠ€æœ¯ç‚¹:\nâ€¢ å¤šç§è¡¨å•å…ƒç´ æ“ä½œ\nâ€¢ é¡µé¢æˆªå›¾åŠŸèƒ½\nâ€¢ æµç•…çš„é“¾å¼è°ƒç”¨`
        );
        console.log("è¡¨å•å¡«å†™ç»“æœ:", result);
      } catch (error) {
        displayError("localUBrowserOutput", error);
      }
    }

    // é“¾å¼-å®Œæ•´æµç¨‹
    async function testLocalUBrowserAll() {
      try {
        displayResult("localUBrowserOutput", "æ­£åœ¨æ‰§è¡Œå®Œæ•´æµç¨‹æµ‹è¯•...");

        const result = await window.naimo.ubrowser
          .goto(TEST_URL)
          .wait("#username")

          // æ­¥éª¤1: ç™»å½•
          .css(`
            #loginForm { border: 2px solid green !important; }
          `)
          .wait(500)
          .type("#username", "complete_test", { delay: 50 })
          .type("#password", "pass123", { delay: 50 })
          .click("#loginForm button[type='submit']")
          .wait(1000)

          // æ­¥éª¤2: æœç´¢
          .scroll("#searchInput")
          .wait(500)
          .type("#searchInput", "æµ‹è¯•", { delay: 80 })
          .click("#searchBtn")
          .wait(1500)

          // æ­¥éª¤3: å¡«å†™è¡¨å•
          .scroll("#name")
          .wait(500)
          .type("#name", "ç‹äº”", { delay: 60 })
          .type("#email", "wangwu@test.com", { delay: 50 })

          // æ­¥éª¤4: æå–æ‰€æœ‰ç»“æœ
          .evaluate(`
            ({
              login: document.querySelector('#loginResult')?.textContent || '',
              search: Array.from(document.querySelectorAll('#searchList li')).map(li => li.textContent),
              time: document.querySelector('#clock')?.textContent || ''
            })
          `)
          .run({ width: 1400, height: 1000 });

        const data = result[0];

        displayResult(
          "localUBrowserOutput",
          `âœ… å®Œæ•´æµç¨‹æµ‹è¯•å®Œæˆï¼\n\nğŸ¯ æ‰§è¡Œäº†ä¸‰ä¸ªä¸»è¦æ­¥éª¤:\n\n1ï¸âƒ£ ç™»å½•è¡¨å•\n${data.login}\n\n2ï¸âƒ£ æœç´¢åŠŸèƒ½\nç»“æœæ•°: ${data.search?.length || 0}\n\n3ï¸âƒ£ æ•°æ®å¡«å†™\nå·²å¡«å†™å§“åå’Œé‚®ç®±\n\nâ° é¡µé¢æ—¶é—´: ${data.time}\n\nğŸ’¡ äº®ç‚¹:\nâ€¢ å¤šæ­¥éª¤æµç¨‹è‡ªåŠ¨åŒ–\nâ€¢ è·¨åŒºåŸŸæ•°æ®æå–\nâ€¢ CSS æ ·å¼æ³¨å…¥\nâ€¢ æ™ºèƒ½æ»šåŠ¨å®šä½`
        );
        console.log("å®Œæ•´æµç¨‹ç»“æœ:", data);
      } catch (error) {
        displayError("localUBrowserOutput", error);
      }
    }

    // ========== æ¨¡å¼3: InstantBrowser (å³æ—¶æ‰§è¡Œ) ==========

    let localInstantBrowser = null;

    // æ­¥éª¤1: æ‰“å¼€é¡µé¢
    async function testLocalInstantStart() {
      try {
        displayResult("localInstantOutput", "â³ æ­£åœ¨æ‰“å¼€æµ‹è¯•é¡µé¢...");

        localInstantBrowser = window.naimo.instantBrowser.create();
        const info = await localInstantBrowser.goto(TEST_URL, {
          width: 1200,
          height: 900
        });

        displayResult(
          "localInstantOutput",
          `âœ… æ­¥éª¤1å®Œæˆ: é¡µé¢å·²æ‰“å¼€\n\nğŸ“Š æµè§ˆå™¨ä¿¡æ¯:\nâ€¢ ID: ${info.id}\nâ€¢ URL: ${info.url}\nâ€¢ å¤§å°: ${info.width} x ${info.height}\n\nğŸ’¡ å³æ—¶æ‰§è¡Œæ¨¡å¼:\næ¯ä¸ªæ“ä½œç«‹å³æ‰§è¡Œ\nçª—å£ä¿æŒæ‰“å¼€\nå¯ä»¥é€æ­¥è°ƒè¯•\n\nâ¡ï¸ ç‚¹å‡»"â‘¡ å¡«å†™ç™»å½•"ç»§ç»­`
        );
        console.log("æµè§ˆå™¨å·²æ‰“å¼€:", info);
      } catch (error) {
        displayError("localInstantOutput", error);
      }
    }

    // æ­¥éª¤2: å¡«å†™ç™»å½•
    async function testLocalInstantLogin() {
      try {
        if (!localInstantBrowser) {
          throw new Error("è¯·å…ˆç‚¹å‡»\"â‘  æ‰“å¼€é¡µé¢\"");
        }

        displayResult("localInstantOutput", "â³ æ­£åœ¨å¡«å†™ç™»å½•è¡¨å•...");

        await localInstantBrowser.wait("#username");
        await localInstantBrowser.wait(500);
        await localInstantBrowser.type("#username", "instant_user", { delay: 50 });
        await localInstantBrowser.wait(300);
        await localInstantBrowser.type("#password", "instant123", { delay: 50 });
        await localInstantBrowser.wait(300);
        await localInstantBrowser.click("#remember");
        await localInstantBrowser.wait(300);
        await localInstantBrowser.click("#loginForm button[type='submit']");
        await localInstantBrowser.wait(1000);

        const loginResult = await localInstantBrowser.evaluate(`
          document.querySelector('#loginResult')?.textContent || ''
        `);

        displayResult(
          "localInstantOutput",
          `âœ… æ­¥éª¤2å®Œæˆ: ç™»å½•è¡¨å•å·²æäº¤\n\nğŸ“ æ“ä½œè®°å½•:\nâ€¢ è¾“å…¥ç”¨æˆ·å: instant_user\nâ€¢ è¾“å…¥å¯†ç : ******\nâ€¢ å‹¾é€‰è®°ä½æˆ‘: âœ“\nâ€¢ ç‚¹å‡»ç™»å½•æŒ‰é’®: âœ“\n\nğŸ“‹ ç™»å½•ç»“æœ:\n${loginResult}\n\nâ¡ï¸ ç‚¹å‡»"â‘¢ æ‰§è¡Œæœç´¢"ç»§ç»­`
        );
        console.log("ç™»å½•ç»“æœ:", loginResult);
      } catch (error) {
        displayError("localInstantOutput", error);
      }
    }

    // æ­¥éª¤3: æ‰§è¡Œæœç´¢
    async function testLocalInstantSearch() {
      try {
        if (!localInstantBrowser) {
          throw new Error("è¯·å…ˆç‚¹å‡»\"â‘  æ‰“å¼€é¡µé¢\"");
        }

        displayResult("localInstantOutput", "â³ æ­£åœ¨æ‰§è¡Œæœç´¢...");

        await localInstantBrowser.scroll("#searchInput");
        await localInstantBrowser.wait(500);
        await localInstantBrowser.type("#searchInput", "å³æ—¶æ‰§è¡Œæµ‹è¯•", { delay: 80 });
        await localInstantBrowser.wait(300);
        await localInstantBrowser.click("#searchBtn");
        await localInstantBrowser.wait(1500);

        const results = await localInstantBrowser.evaluate(`
          Array.from(document.querySelectorAll('#searchList li')).map(li => li.textContent)
        `);

        displayResult(
          "localInstantOutput",
          `âœ… æ­¥éª¤3å®Œæˆ: æœç´¢å·²æ‰§è¡Œ\n\nğŸ” æœç´¢å…³é”®è¯: å³æ—¶æ‰§è¡Œæµ‹è¯•\nğŸ“Š ç»“æœæ•°é‡: ${results.length}\n\næœç´¢ç»“æœ:\n${results.join('\n')}\n\nâ¡ï¸ ç‚¹å‡»"â‘£ å¡«å†™è¡¨å•"ç»§ç»­`
        );
        console.log("æœç´¢ç»“æœ:", results);
      } catch (error) {
        displayError("localInstantOutput", error);
      }
    }

    // æ­¥éª¤4: å¡«å†™è¡¨å•
    async function testLocalInstantForm() {
      try {
        if (!localInstantBrowser) {
          throw new Error("è¯·å…ˆç‚¹å‡»\"â‘  æ‰“å¼€é¡µé¢\"");
        }

        displayResult("localInstantOutput", "â³ æ­£åœ¨å¡«å†™æ•°æ®è¡¨å•...");

        await localInstantBrowser.scroll("#name");
        await localInstantBrowser.wait(500);
        await localInstantBrowser.type("#name", "èµµå…­", { delay: 80 });
        await localInstantBrowser.wait(200);
        await localInstantBrowser.type("#email", "zhaoliu@instant.com", { delay: 60 });
        await localInstantBrowser.wait(200);
        await localInstantBrowser.type("#age", "28", { delay: 100 });
        await localInstantBrowser.wait(200);

        // ä½¿ç”¨ evaluate ç›´æ¥æ“ä½œ select
        await localInstantBrowser.evaluate(`
          document.querySelector('#city').value = 'shenzhen';
        `);
        await localInstantBrowser.wait(200);

        await localInstantBrowser.click("#hobby1");
        await localInstantBrowser.wait(100);
        await localInstantBrowser.click("#hobby2");
        await localInstantBrowser.wait(100);
        await localInstantBrowser.type("#comment", "å³æ—¶æ‰§è¡Œæ¨¡å¼å¯ä»¥éšæ—¶è°ƒæ•´æµç¨‹", { delay: 50 });
        await localInstantBrowser.wait(500);

        const screenshot = await localInstantBrowser.screenshot();

        displayResult(
          "localInstantOutput",
          `âœ… æ­¥éª¤4å®Œæˆ: è¡¨å•å·²å¡«å†™\n\nğŸ“‹ è¡¨å•å†…å®¹:\nâ€¢ å§“å: èµµå…­\nâ€¢ é‚®ç®±: zhaoliu@instant.com\nâ€¢ å¹´é¾„: 28\nâ€¢ åŸå¸‚: æ·±åœ³\nâ€¢ å…´è¶£: é˜…è¯»ã€è¿åŠ¨\nâ€¢ å¤‡æ³¨: å·²å¡«å†™\n\nğŸ“¸ å·²æˆªå›¾: ${screenshot?.length || 0} å­—èŠ‚\n\nğŸ’¡ å³æ—¶æ‰§è¡Œæ¨¡å¼ä¼˜åŠ¿:\nâ€¢ å¯ä»¥éšæ—¶åœæ­¢\nâ€¢ å¯ä»¥æŸ¥çœ‹ä¸­é—´çŠ¶æ€\nâ€¢ å¯ä»¥æ ¹æ®ç»“æœè°ƒæ•´æµç¨‹\nâ€¢ çª—å£ä¿æŒæ‰“å¼€ä¾¿äºè°ƒè¯•\n\nâ¡ï¸ ç‚¹å‡»"â‘¤ å…³é—­æµè§ˆå™¨"ç»“æŸ`
        );
        console.log("è¡¨å•å¡«å†™å®Œæˆï¼Œæˆªå›¾:", screenshot);
      } catch (error) {
        displayError("localInstantOutput", error);
      }
    }

    // æ­¥éª¤5: å…³é—­æµè§ˆå™¨
    async function testLocalInstantClose() {
      try {
        if (!localInstantBrowser) {
          displayResult("localInstantOutput", "âš ï¸ æµè§ˆå™¨å·²å…³é—­æˆ–æœªåˆ›å»º");
          return;
        }

        displayResult("localInstantOutput", "â³ æ­£åœ¨å…³é—­æµè§ˆå™¨...");

        await localInstantBrowser.close();
        localInstantBrowser = null;

        displayResult(
          "localInstantOutput",
          `âœ… æµè§ˆå™¨å·²å…³é—­\n\nğŸ“Š å³æ—¶æ‰§è¡Œæ¨¡å¼æ€»ç»“:\n\nä¼˜ç‚¹:\nâ€¢ âœ… çµæ´»å¯æ§\nâ€¢ âœ… ä¾¿äºè°ƒè¯•\nâ€¢ âœ… å¯äº¤äº’\nâ€¢ âœ… å¯ä¸­é€”è°ƒæ•´\n\né€‚ç”¨åœºæ™¯:\nâ€¢ éœ€è¦äººå·¥å¹²é¢„çš„ä»»åŠ¡\nâ€¢ å¤æ‚çš„å¤šæ­¥éª¤æµç¨‹\nâ€¢ éœ€è¦æ ¹æ®ç»“æœè°ƒæ•´çš„åœºæ™¯\nâ€¢ å¼€å‘å’Œè°ƒè¯•é˜¶æ®µ\n\nğŸ’¡ å¯ä»¥é‡æ–°ç‚¹å‡»"â‘  æ‰“å¼€é¡µé¢"å¼€å§‹æ–°çš„æµ‹è¯•`
        );
      } catch (error) {
        displayError("localInstantOutput", error);
        localInstantBrowser = null;
      }
    }

    // ==================== åˆå§‹åŒ– ====================
    window.addEventListener("DOMContentLoaded", () => {
      console.log("API æµ‹è¯•é¢æ¿å·²åŠ è½½");
      window.naimo.log.info("API æµ‹è¯•é¢æ¿å·²åˆå§‹åŒ–");
    });
  </script>
</body>

</html>